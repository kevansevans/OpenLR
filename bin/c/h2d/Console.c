// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <h2d/Console.h>
#include <hxd/Event.h>
void h2d_Console_hide(h2d__Console);
extern hl_type t$String;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern String s$;
String h2d_HtmlText_set_text(h2d__HtmlText,String);
extern hl_type t$vrt_a6bfc9e;
extern hl_type t$hl_types_ArrayObj;
extern hl_type t$_dyn;
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
void h2d_Console_handleCommand(h2d__Console,String);
#include <hxd/Window.h>
#include <h2d/Scene.h>
void h2d_Object_onAdd(h2d__Object);
h2d__Scene h2d_Object_getScene(h2d__Object);
extern hl_type t$fun_4df0d04;
void hxd_Window_addEventTarget(hxd__Window,vclosure*);
void hxd_Window_removeEventTarget(hxd__Window,vclosure*);
void h2d_Object_onRemove(h2d__Object);
#include <hxd/EventKind.h>
#include <h2d/Font.h>
double h2d_Text_get_textHeight(h2d__Text);
void h2d_Console_show(h2d__Console);
vvirtual* haxe_ds_StringMap_keys(haxe__ds__StringMap);
#include <hl/types/ArrayDyn.h>
#include <h2d/ConsoleArg.h>
extern hl_type t$fun_abea61a;
extern hl_type t$vrt_bb86e68;
extern hl_type t$fun_bb950e4;
extern hl_type t$fun_b3142bd;
extern hl_type t$vrt_c8138d1;
hl__types__ArrayDyn Lambda_array(vvirtual*);
extern hl_type t$hl_types_ArrayDyn;
void hl_types_ArrayObj_sort(hl__types__ArrayObj,vclosure*);
extern String s$help;
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
bool haxe_ds_StringMap_exists(haxe__ds__StringMap,String);
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
extern String s$Command_not_found_;
String String___add__(String,String);
extern String s$b15835f;
vdynamic* haxe_Exception_thrown(vdynamic*);
extern String s$6666cd7;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_820f49a;
int String___compare(String,vdynamic*);
extern String s$b99834b;
extern hl_type t$vrt_6b9bbd4;
extern hl_type t$h2d_ConsoleArg;
extern String s$853ae90;
String Type_enumConstructor(vdynamic*);
String String_substr(String,int,vdynamic*);
extern String s$_0_1;
extern String s$43ec3e5;
String hl_types_ArrayObj_join(hl__types__ArrayObj,String);
extern String s$7215ee9;
extern hl_type t$nul_bool;
extern String s$8154172;
extern String s$0fbd177;
extern String s$f910c9f;
void h2d_Console_log(h2d__Console,String,vdynamic*);
bool h2d_Object_set_visible(h2d__Object,bool);
String h2d_TextInput_set_text(h2d__TextInput,String);
void h2d_TextInput_focus(h2d__TextInput);
int String_indexOf(String,String,vdynamic*);
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);
String String_charAt(String,int);
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
#include <haxe/Exception.h>
#include <_std/String.h>
String StringTools_trim(String);
vdynamic* String_charCodeAt(String,int);
extern hl_type t$_i32;
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern hl_type t$ctx_c92cbb3;
extern hl_type t$fun_5a2d535;
extern String s$5e732a1;
extern String s$Bad_formated_string;
extern String s$Unknown_command_;
void hl_types_ArrayDyn_new(hl__types__ArrayDyn);
int hl_types_ArrayDyn_push(hl__types__ArrayDyn,vdynamic*);
extern String s$Missing_argument_;
vdynamic* Std_parseInt(String);
extern String s$_should_be_Int_for_argument_;
double Std_parseFloat(String);
extern String s$_should_be_Float_for_argument_;
extern hl_type t$_f64;
extern String s$_should_be_Bool_for_argument_;
extern String s$f380c35;
extern String s$_for_argument_;
vdynamic* Reflect_callMethod(vdynamic*,vdynamic*,hl__types__ArrayDyn);
haxe__Exception haxe_Exception_caught(vdynamic*);
extern $String g$_String;
bool Std_isOfType(vdynamic*,vdynamic*);
extern String s$ERROR_;
extern String s$_font_color_;
String StringTools_hex(int,vdynamic*);
extern String s$490d6e0;
String StringTools_htmlEscape(String,vdynamic*);
extern String s$_font_br_;
#include <h2d/RenderContext.h>
#include <h2d/Tile.h>
vdynamic* h2d_Text_set_maxWidth(h2d__Text,vdynamic*);
void h2d_Tile_scaleToSize(h2d__Tile,double,double);
extern h2d__$Console g$_h2d_Console;
void h2d_Object_sync(h2d__Object,h2d__RenderContext);
void h2d_Object_new(h2d__Object,h2d__Object);
extern hl_type t$h2d_HtmlText;
void h2d_HtmlText_new(h2d__HtmlText,h2d__Font,h2d__Object);
extern hl_type t$vrt_1a17fe0;
extern hl_type t$h2d_Bitmap;
h2d__Tile h2d_Tile_fromColor(int,vdynamic*,vdynamic*,vdynamic*);
void h2d_Bitmap_new(h2d__Bitmap,h2d__Tile,h2d__Object);
extern hl_type t$h2d_Text;
void h2d_Text_new(h2d__Text,h2d__Font,h2d__Object);
extern hl_type t$h2d_TextInput;
void h2d_TextInput_new(h2d__TextInput,h2d__Font,h2d__Object);
extern hl_type t$fun_06b5587;
int h2d_Text_set_textColor(h2d__Text,int);
extern hl_type t$haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
extern String s$Show_help;
extern String s$command;
extern venum* g$h2d_ConsoleArg_AString;
extern hl_type t$fun_0221c1d;
extern String s$cls;
extern String s$Clear_console;
extern String s$d1457b7;

void h2d_Console_new__$1(h2d__Console r0,hxd__Event r1) {
	if( r0 == NULL ) hl_null_access();
	h2d_Console_hide(r0);
	return;
}

void h2d_Console_new__$2(h2d__Console r0) {
	String r5;
	hl__types__ArrayObj r1;
	hl_type *r3;
	h2d__HtmlText r6;
	int r4;
	varray *r2;
	if( r0 == NULL ) hl_null_access();
	r3 = &t$String;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->logs = r1;
	r6 = r0->logTxt;
	if( r6 == NULL ) hl_null_access();
	r5 = (String)s$;
	r5 = h2d_HtmlText_set_text(r6,r5);
	return;
}

void h2d_Console_addCommand(h2d__Console r0,String r1,String r2,hl__types__ArrayObj r3,vdynamic* r4) {
	String r8;
	vvirtual *r7;
	haxe__ds__StringMap r6;
	r6 = r0->commands;
	if( r6 == NULL ) hl_null_access();
	r7 = hl_alloc_virtual(&t$vrt_a6bfc9e);
	if( r2 ) goto label$40582a2_3_6;
	r8 = (String)s$;
	goto label$40582a2_3_7;
	label$40582a2_3_6:
	r8 = r2;
	label$40582a2_3_7:
	if( hl_vfields(r7)[2] ) *(String*)(hl_vfields(r7)[2]) = (String)r8; else hl_dyn_setp(r7->value,84620235/*help*/,&t$String,r8);
	if( hl_vfields(r7)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r7)[0]) = (hl__types__ArrayObj)r3; else hl_dyn_setp(r7->value,7638631/*args*/,&t$hl_types_ArrayObj,r3);
	if( hl_vfields(r7)[1] ) *(vdynamic**)(hl_vfields(r7)[1]) = (vdynamic*)r4; else hl_dyn_setp(r7->value,18576142/*callb*/,&t$_dyn,r4);
	haxe_ds_StringMap_set(r6,r1,((vdynamic*)r7));
	return;
}

void h2d_Console_addAlias(h2d__Console r0,String r1,String r2) {
	haxe__ds__StringMap r4;
	r4 = r0->aliases;
	if( r4 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r4,r1,((vdynamic*)r2));
	return;
}

void h2d_Console_runCommand(h2d__Console r0,String r1) {
	h2d_Console_handleCommand(r0,r1);
	return;
}

void h2d_Console_onAdd(h2d__Console r0) {
	hxd__Window r2;
	vclosure *r4;
	h2d__Scene r3;
	h2d_Object_onAdd(((h2d__Object)r0));
	r3 = h2d_Object_getScene(((h2d__Object)r0));
	if( r3 == NULL ) hl_null_access();
	r2 = r3->window;
	if( r2 == NULL ) hl_null_access();
	r4 = hl_alloc_closure_ptr(&t$fun_4df0d04,r0->$type->vobj_proto[15],r0);
	hxd_Window_addEventTarget(r2,r4);
	return;
}

void h2d_Console_onRemove(h2d__Console r0) {
	hxd__Window r2;
	vclosure *r4;
	h2d__Scene r3;
	r3 = h2d_Object_getScene(((h2d__Object)r0));
	if( r3 == NULL ) hl_null_access();
	r2 = r3->window;
	if( r2 == NULL ) hl_null_access();
	r4 = hl_alloc_closure_ptr(&t$fun_4df0d04,r0->$type->vobj_proto[15],r0);
	hxd_Window_removeEventTarget(r2,r4);
	h2d_Object_onRemove(((h2d__Object)r0));
	return;
}

void h2d_Console_onEvent(h2d__Console r0,hxd__Event r1) {
	venum *r4;
	bool r5;
	h2d__HtmlText r6;
	h2d__Font r9;
	h2d__Bitmap r13;
	double r7, r8, r11;
	h2d__TextInput r10;
	int r3, r12;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->kind;
	if( r4 == NULL ) hl_null_access();
	r3 = HL__ENUM_INDEX__(r4);
	switch(r3) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
			goto label$40582a2_8_47;
		case 5:
			r6 = r0->logTxt;
			if( r6 == NULL ) hl_null_access();
			r5 = r6->visible;
			if( !r5 ) goto label$40582a2_8_38;
			r7 = r0->logDY;
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r9 = r10->font;
			if( r9 == NULL ) hl_null_access();
			r8 = r9->lineHeight;
			r11 = r1->wheelDelta;
			r8 = r8 * r11;
			r11 = 3.;
			r8 = r8 * r11;
			r7 = r7 - r8;
			r0->logDY = r7;
			r7 = r0->logDY;
			r8 = 0.;
			if( !(r7 < r8) ) goto label$40582a2_8_27;
			r7 = 0.;
			r0->logDY = r7;
			label$40582a2_8_27:
			r7 = r0->logDY;
			r6 = r0->logTxt;
			if( r6 == NULL ) hl_null_access();
			r8 = h2d_Text_get_textHeight(((h2d__Text)r6));
			if( !(r8 < r7) ) goto label$40582a2_8_36;
			r6 = r0->logTxt;
			if( r6 == NULL ) hl_null_access();
			r7 = h2d_Text_get_textHeight(((h2d__Text)r6));
			r0->logDY = r7;
			label$40582a2_8_36:
			r5 = false;
			r1->propagate = r5;
			label$40582a2_8_38:
			goto label$40582a2_8_47;
		case 11:
			r3 = r1->charCode;
			r12 = r0->shortKeyChar;
			if( r3 != r12 ) goto label$40582a2_8_47;
			r13 = r0->bg;
			if( r13 == NULL ) hl_null_access();
			r5 = r13->visible;
			if( r5 ) goto label$40582a2_8_47;
			h2d_Console_show(r0);
	}
	label$40582a2_8_47:
	return;
}

vvirtual* h2d_Console_showHelp__$1(h2d__Console r0) {
	haxe__ds__StringMap r2;
	vvirtual *r1;
	if( r0 == NULL ) hl_null_access();
	r2 = r0->commands;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_ds_StringMap_keys(r2);
	return r1;
}

void h2d_Console_showHelp(h2d__Console r0,String r1) {
	String r3, r15, r21, r23, r24, r25, r33;
	haxe__ds__StringMap r14;
	vvirtual *r6, *r9, *r20, *r22, *r28;
	hl__types__ArrayObj r4, r10, r27;
	venum *r29, *r30;
	hl_type *r17;
	bool r12;
	vclosure *r7, *r11;
	hl__types__ArrayDyn r5;
	vdynamic *r8, *r31, *r32;
	varray *r16;
	int r13, r18, r19, r26;
	static vclosure cl$0 = { &t$fun_abea61a, hl_dyn_compare, 0 };
	if( r1 ) goto label$40582a2_10_16;
	r6 = hl_alloc_virtual(&t$vrt_bb86e68);
	r7 = hl_alloc_closure_ptr(&t$fun_bb950e4,h2d_Console_showHelp__$1,r0);
	if( hl_vfields(r6)[0] ) *(vclosure**)(hl_vfields(r6)[0]) = (vclosure*)r7; else hl_dyn_setp(r6->value,-207992737/*iterator*/,&t$fun_b3142bd,r7);
	r9 = hl_to_virtual(&t$vrt_c8138d1,(vdynamic*)r6);
	r5 = Lambda_array(r9);
	r10 = (hl__types__ArrayObj)hl_dyn_castp(&r5,&t$hl_types_ArrayDyn,&t$hl_types_ArrayObj);
	r4 = r10;
	if( r10 == NULL ) hl_null_access();
	r11 = &cl$0;
	hl_types_ArrayObj_sort(r10,r11);
	r3 = (String)s$help;
	r12 = hl_types_ArrayObj_remove(r10,((vdynamic*)r3));
	r3 = (String)s$help;
	r13 = hl_types_ArrayObj_push(r10,((vdynamic*)r3));
	goto label$40582a2_10_42;
	label$40582a2_10_16:
	r14 = r0->aliases;
	if( r14 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_exists(r14,r1);
	if( !r12 ) goto label$40582a2_10_25;
	r14 = r0->aliases;
	if( r14 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r14,r1);
	r3 = (String)r8;
	r1 = r3;
	label$40582a2_10_25:
	r14 = r0->commands;
	if( r14 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_exists(r14,r1);
	if( r12 ) goto label$40582a2_10_35;
	r3 = (String)s$Command_not_found_;
	r3 = String___add__(r3,r1);
	r15 = (String)s$b15835f;
	r3 = String___add__(r3,r15);
	r8 = haxe_Exception_thrown(((vdynamic*)r3));
	hl_throw((vdynamic*)r8);
	label$40582a2_10_35:
	r17 = &t$String;
	r13 = 1;
	r16 = hl_alloc_array(r17,r13);
	r13 = 0;
	((String*)(r16 + 1))[r13] = r1;
	r10 = hl_types_ArrayObj_alloc(r16);
	r4 = r10;
	label$40582a2_10_42:
	r13 = 0;
	label$40582a2_10_43:
	if( r4 == NULL ) hl_null_access();
	r19 = r4->length;
	if( r13 >= r19 ) goto label$40582a2_10_151;
	r19 = r4->length;
	if( ((unsigned)r13) < ((unsigned)r19) ) goto label$40582a2_10_51;
	r3 = NULL;
	goto label$40582a2_10_54;
	label$40582a2_10_51:
	r16 = r4->array;
	r8 = ((vdynamic**)(r16 + 1))[r13];
	r3 = (String)r8;
	label$40582a2_10_54:
	++r13;
	r14 = r0->commands;
	if( r14 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r14,r3);
	r20 = hl_to_virtual(&t$vrt_a6bfc9e,(vdynamic*)r8);
	r15 = (String)s$6666cd7;
	r15 = String___add__(r15,r3);
	r14 = r0->aliases;
	if( r14 == NULL ) hl_null_access();
	r22 = haxe_ds_StringMap_keys(r14);
	label$40582a2_10_64:
	if( r22 == NULL ) hl_null_access();
	if( hl_vfields(r22)[0] ) r12 = ((bool (*)(vdynamic*))hl_vfields(r22)[0])(r22->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r22->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r12 = (bool)ret.v.i;
	}
	if( !r12 ) goto label$40582a2_10_79;
	if( hl_vfields(r22)[1] ) r21 = ((String (*)(vdynamic*))hl_vfields(r22)[1])(r22->value); else {
		r21 = (String)hl_dyn_call_obj(r22->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
	}
	r14 = r0->aliases;
	if( r14 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r14,r21);
	r23 = (String)r8;
	if( r23 != r3 && (!r23 || !r3 || String___compare(r23,(vdynamic*)r3) != 0) ) goto label$40582a2_10_78;
	r24 = (String)s$b99834b;
	r24 = String___add__(r24,r21);
	r23 = String___add__(r15,r24);
	r15 = r23;
	label$40582a2_10_78:
	goto label$40582a2_10_64;
	label$40582a2_10_79:
	r18 = 0;
	if( r20 == NULL ) hl_null_access();
	r10 = hl_vfields(r20)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r20)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r20->value,7638631/*args*/,&t$hl_types_ArrayObj);
	label$40582a2_10_82:
	if( r10 == NULL ) hl_null_access();
	r26 = r10->length;
	if( r18 >= r26 ) goto label$40582a2_10_139;
	r26 = r10->length;
	if( ((unsigned)r18) < ((unsigned)r26) ) goto label$40582a2_10_90;
	r28 = NULL;
	goto label$40582a2_10_93;
	label$40582a2_10_90:
	r16 = r10->array;
	r8 = ((vdynamic**)(r16 + 1))[r18];
	r28 = hl_to_virtual(&t$vrt_6b9bbd4,(vdynamic*)r8);
	label$40582a2_10_93:
	++r18;
	if( r28 == NULL ) hl_null_access();
	r21 = hl_vfields(r28)[0] ? (*(String*)(hl_vfields(r28)[0])) : (String)hl_dyn_getp(r28->value,150958933/*name*/,&t$String);
	r29 = hl_vfields(r28)[2] ? (*(venum**)(hl_vfields(r28)[2])) : (venum*)hl_dyn_getp(r28->value,116/*t*/,&t$h2d_ConsoleArg);
	if( r29 == NULL ) hl_null_access();
	r19 = HL__ENUM_INDEX__(r29);
	switch(r19) {
		default:
			goto label$40582a2_10_125;
		case 0:
		case 1:
			r24 = (String)s$853ae90;
			r30 = hl_vfields(r28)[2] ? (*(venum**)(hl_vfields(r28)[2])) : (venum*)hl_dyn_getp(r28->value,116/*t*/,&t$h2d_ConsoleArg);
			r25 = Type_enumConstructor(((vdynamic*)r30));
			if( r25 == NULL ) hl_null_access();
			r19 = 1;
			r31 = NULL;
			r25 = String_substr(r25,r19,r31);
			r24 = String___add__(r24,r25);
			r23 = String___add__(r21,r24);
			r21 = r23;
			goto label$40582a2_10_125;
		case 2:
			goto label$40582a2_10_125;
		case 3:
			r24 = (String)s$_0_1;
			r23 = String___add__(r21,r24);
			r21 = r23;
			goto label$40582a2_10_125;
		case 4:
			r27 = ((h2d_ConsoleArg_AEnum*)r29)->p0;
			r24 = (String)s$43ec3e5;
			if( r27 == NULL ) hl_null_access();
			r25 = (String)s$b99834b;
			r25 = hl_types_ArrayObj_join(r27,r25);
			r24 = String___add__(r24,r25);
			r23 = String___add__(r21,r24);
			r21 = r23;
	}
	label$40582a2_10_125:
	r24 = (String)s$7215ee9;
	r32 = hl_vfields(r28)[1] ? (*(vdynamic**)(hl_vfields(r28)[1])) : (vdynamic*)hl_dyn_getp(r28->value,5545011/*opt*/,&t$nul_bool);
	r12 = r32 ? r32->v.b : 0;
	if( !r12 ) goto label$40582a2_10_134;
	r25 = (String)s$8154172;
	r25 = String___add__(r25,r21);
	r33 = (String)s$0fbd177;
	r25 = String___add__(r25,r33);
	goto label$40582a2_10_135;
	label$40582a2_10_134:
	r25 = r21;
	label$40582a2_10_135:
	r24 = String___add__(r24,r25);
	r23 = String___add__(r15,r24);
	r15 = r23;
	goto label$40582a2_10_82;
	label$40582a2_10_139:
	if( r20 == NULL ) hl_null_access();
	r21 = hl_vfields(r20)[2] ? (*(String*)(hl_vfields(r20)[2])) : (String)hl_dyn_getp(r20->value,84620235/*help*/,&t$String);
	r23 = (String)s$;
	if( r21 == r23 || (r21 && r23 && String___compare(r21,(vdynamic*)r23) == 0) ) goto label$40582a2_10_148;
	r23 = (String)s$f910c9f;
	r24 = hl_vfields(r20)[2] ? (*(String*)(hl_vfields(r20)[2])) : (String)hl_dyn_getp(r20->value,84620235/*help*/,&t$String);
	r23 = String___add__(r23,r24);
	r21 = String___add__(r15,r23);
	r15 = r21;
	label$40582a2_10_148:
	r31 = NULL;
	h2d_Console_log(r0,r15,r31);
	goto label$40582a2_10_43;
	label$40582a2_10_151:
	return;
}

void h2d_Console_hide(h2d__Console r0) {
	String r3;
	bool r1;
	h2d__Text r5;
	h2d__Bitmap r2;
	h2d__TextInput r4;
	int r6;
	r2 = r0->bg;
	if( r2 == NULL ) hl_null_access();
	r1 = false;
	r1 = h2d_Object_set_visible(((h2d__Object)r2),r1);
	r4 = r0->tf;
	if( r4 == NULL ) hl_null_access();
	r3 = (String)s$;
	r3 = h2d_TextInput_set_text(r4,r3);
	r5 = r0->hintTxt;
	if( r5 == NULL ) hl_null_access();
	r3 = (String)s$;
	r3 = ((String (*)(h2d__Text,String))r5->$type->vobj_proto[16])(r5,r3);
	r4 = r0->tf;
	if( r4 == NULL ) hl_null_access();
	r6 = -1;
	r4->cursorIndex = r6;
	return;
}

void h2d_Console_show(h2d__Console r0) {
	String r6;
	bool r1;
	h2d__Bitmap r2;
	h2d__TextInput r4, r7;
	int r5;
	r2 = r0->bg;
	if( r2 == NULL ) hl_null_access();
	r1 = true;
	r1 = h2d_Object_set_visible(((h2d__Object)r2),r1);
	r4 = r0->tf;
	if( r4 == NULL ) hl_null_access();
	h2d_TextInput_focus(r4);
	r4 = r0->tf;
	if( r4 == NULL ) hl_null_access();
	r7 = r0->tf;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->text;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->length;
	r4->cursorIndex = r5;
	r5 = -1;
	r0->logIndex = r5;
	return;
}

String h2d_Console_getCommandSuggestion(h2d__Console r0,String r1) {
	String r2, r3, r9;
	haxe__ds__StringMap r5;
	vvirtual *r4, *r6;
	bool r7;
	vdynamic *r10;
	int r8, r11;
	r3 = (String)s$;
	if( r1 != r3 && (!r1 || !r3 || String___compare(r1,(vdynamic*)r3) != 0) ) goto label$40582a2_13_4;
	r2 = (String)s$;
	return r2;
	label$40582a2_13_4:
	r2 = (String)s$;
	r5 = r0->commands;
	if( r5 == NULL ) hl_null_access();
	r4 = haxe_ds_StringMap_keys(r5);
	r6 = r4;
	label$40582a2_13_9:
	if( r6 == NULL ) hl_null_access();
	if( hl_vfields(r6)[0] ) r7 = ((bool (*)(vdynamic*))hl_vfields(r6)[0])(r6->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r6->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r7 = (bool)ret.v.i;
	}
	if( !r7 ) goto label$40582a2_13_27;
	if( hl_vfields(r6)[1] ) r3 = ((String (*)(vdynamic*))hl_vfields(r6)[1])(r6->value); else {
		r3 = (String)hl_dyn_call_obj(r6->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
	}
	if( r3 == NULL ) hl_null_access();
	r10 = NULL;
	r8 = String_indexOf(r3,r1,r10);
	r11 = 0;
	if( r8 != r11 ) goto label$40582a2_13_26;
	r9 = (String)s$;
	if( r2 == r9 || (r2 && r9 && String___compare(r2,(vdynamic*)r9) == 0) ) goto label$40582a2_13_25;
	if( r2 == NULL ) hl_null_access();
	r8 = r2->length;
	r11 = r3->length;
	if( r11 >= r8 ) goto label$40582a2_13_26;
	label$40582a2_13_25:
	r2 = r3;
	label$40582a2_13_26:
	goto label$40582a2_13_9;
	label$40582a2_13_27:
	return r2;
}

void h2d_Console_handleKey(h2d__Console r0,hxd__Event r1) {
	String r7, r9, r12;
	hl__types__ArrayObj r14;
	bool r3;
	h2d__HtmlText r13;
	h2d__Text r8;
	h2d__Bitmap r4;
	h2d__TextInput r10, r11;
	vdynamic *r5;
	varray *r16;
	int r6, r15, r17;
	r4 = r0->bg;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->visible;
	if( r3 ) goto label$40582a2_14_5;
	return;
	label$40582a2_14_5:
	if( r1 == NULL ) hl_null_access();
	r6 = r1->keyCode;
	switch(r6) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 8:
		case 10:
		case 11:
		case 12:
		case 14:
		case 15:
		case 16:
		case 17:
		case 18:
		case 19:
		case 20:
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
		case 26:
		case 28:
		case 29:
		case 30:
		case 31:
		case 32:
		case 33:
		case 34:
		case 35:
		case 36:
		case 37:
		case 39:
		case 41:
		case 42:
		case 43:
		case 44:
		case 45:
		case 46:
		case 47:
		case 48:
		case 49:
		case 50:
		case 51:
		case 52:
		case 53:
		case 54:
		case 55:
		case 56:
		case 57:
		case 58:
		case 59:
		case 60:
		case 61:
		case 62:
		case 63:
		case 64:
		case 65:
		case 66:
		case 67:
		case 68:
		case 69:
		case 70:
		case 71:
		case 72:
		case 73:
		case 74:
		case 75:
		case 76:
		case 77:
		case 78:
		case 79:
		case 80:
		case 81:
		case 82:
		case 83:
		case 84:
		case 85:
		case 86:
		case 87:
		case 88:
		case 89:
		case 90:
		case 91:
		case 92:
		case 93:
		case 94:
		case 95:
		case 96:
		case 97:
		case 98:
		case 99:
		case 100:
		case 101:
		case 102:
		case 103:
		case 104:
		case 105:
		case 106:
		case 107:
			goto label$40582a2_14_168;
		case 9:
			r3 = r0->autoComplete;
			if( !r3 ) goto label$40582a2_14_32;
			r8 = r0->hintTxt;
			if( r8 == NULL ) hl_null_access();
			r7 = r8->text;
			r9 = (String)s$;
			if( r7 == r9 || (r7 && r9 && String___compare(r7,(vdynamic*)r9) == 0) ) goto label$40582a2_14_32;
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r8 = r0->hintTxt;
			if( r8 == NULL ) hl_null_access();
			r7 = r8->text;
			r9 = (String)s$7215ee9;
			r7 = String___add__(r7,r9);
			r7 = h2d_TextInput_set_text(r10,r7);
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r11 = r0->tf;
			if( r11 == NULL ) hl_null_access();
			r7 = r11->text;
			if( r7 == NULL ) hl_null_access();
			r6 = r7->length;
			r10->cursorIndex = r6;
			label$40582a2_14_32:
			goto label$40582a2_14_168;
		case 13:
		case 108:
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r7 = r10->text;
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r9 = (String)s$;
			r9 = h2d_TextInput_set_text(r10,r9);
			r8 = r0->hintTxt;
			if( r8 == NULL ) hl_null_access();
			r9 = (String)s$;
			r9 = ((String (*)(h2d__Text,String))r8->$type->vobj_proto[16])(r8,r9);
			r3 = r0->autoComplete;
			if( !r3 ) goto label$40582a2_14_50;
			r9 = h2d_Console_getCommandSuggestion(r0,r7);
			r12 = (String)s$;
			if( r9 == r12 || (r9 && r12 && String___compare(r9,(vdynamic*)r12) == 0) ) goto label$40582a2_14_50;
			r7 = r9;
			label$40582a2_14_50:
			h2d_Console_handleCommand(r0,r7);
			r13 = r0->logTxt;
			if( r13 == NULL ) hl_null_access();
			r3 = r13->visible;
			if( r3 ) goto label$40582a2_14_59;
			r4 = r0->bg;
			if( r4 == NULL ) hl_null_access();
			r3 = false;
			r3 = h2d_Object_set_visible(((h2d__Object)r4),r3);
			label$40582a2_14_59:
			r3 = true;
			r1->cancel = r3;
			return;
		case 27:
			h2d_Console_hide(r0);
			goto label$40582a2_14_168;
		case 38:
			r14 = r0->logs;
			if( r14 == NULL ) hl_null_access();
			r6 = r14->length;
			r15 = 0;
			if( r6 == r15 ) goto label$40582a2_14_72;
			r6 = r0->logIndex;
			r15 = 0;
			if( r6 != r15 ) goto label$40582a2_14_73;
			label$40582a2_14_72:
			return;
			label$40582a2_14_73:
			r6 = r0->logIndex;
			r15 = -1;
			if( r6 != r15 ) goto label$40582a2_14_87;
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r7 = r10->text;
			r0->curCmd = r7;
			r14 = r0->logs;
			if( r14 == NULL ) hl_null_access();
			r6 = r14->length;
			r15 = 1;
			r6 = r6 - r15;
			r0->logIndex = r6;
			goto label$40582a2_14_90;
			label$40582a2_14_87:
			r6 = r0->logIndex;
			--r6;
			r0->logIndex = r6;
			label$40582a2_14_90:
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r14 = r0->logs;
			if( r14 == NULL ) hl_null_access();
			r6 = r0->logIndex;
			r15 = r14->length;
			if( ((unsigned)r6) < ((unsigned)r15) ) goto label$40582a2_14_99;
			r7 = NULL;
			goto label$40582a2_14_102;
			label$40582a2_14_99:
			r16 = r14->array;
			r5 = ((vdynamic**)(r16 + 1))[r6];
			r7 = (String)r5;
			label$40582a2_14_102:
			r7 = h2d_TextInput_set_text(r10,r7);
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r11 = r0->tf;
			if( r11 == NULL ) hl_null_access();
			r7 = r11->text;
			if( r7 == NULL ) hl_null_access();
			r6 = r7->length;
			r10->cursorIndex = r6;
			goto label$40582a2_14_168;
		case 40:
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r7 = r10->text;
			r9 = r0->curCmd;
			if( r7 != r9 && (!r7 || !r9 || String___compare(r7,(vdynamic*)r9) != 0) ) goto label$40582a2_14_118;
			return;
			label$40582a2_14_118:
			r6 = r0->logIndex;
			r14 = r0->logs;
			if( r14 == NULL ) hl_null_access();
			r15 = r14->length;
			r17 = 1;
			r15 = r15 - r17;
			if( r6 != r15 ) goto label$40582a2_14_144;
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r7 = r0->curCmd;
			if( r7 ) goto label$40582a2_14_131;
			r7 = (String)s$;
			goto label$40582a2_14_132;
			label$40582a2_14_131:
			r7 = r0->curCmd;
			label$40582a2_14_132:
			r7 = h2d_TextInput_set_text(r10,r7);
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r11 = r0->tf;
			if( r11 == NULL ) hl_null_access();
			r7 = r11->text;
			if( r7 == NULL ) hl_null_access();
			r6 = r7->length;
			r10->cursorIndex = r6;
			r6 = -1;
			r0->logIndex = r6;
			return;
			label$40582a2_14_144:
			r6 = r0->logIndex;
			++r6;
			r0->logIndex = r6;
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r14 = r0->logs;
			if( r14 == NULL ) hl_null_access();
			r6 = r0->logIndex;
			r15 = r14->length;
			if( ((unsigned)r6) < ((unsigned)r15) ) goto label$40582a2_14_156;
			r7 = NULL;
			goto label$40582a2_14_159;
			label$40582a2_14_156:
			r16 = r14->array;
			r5 = ((vdynamic**)(r16 + 1))[r6];
			r7 = (String)r5;
			label$40582a2_14_159:
			r7 = h2d_TextInput_set_text(r10,r7);
			r10 = r0->tf;
			if( r10 == NULL ) hl_null_access();
			r11 = r0->tf;
			if( r11 == NULL ) hl_null_access();
			r7 = r11->text;
			if( r7 == NULL ) hl_null_access();
			r6 = r7->length;
			r10->cursorIndex = r6;
	}
	label$40582a2_14_168:
	return;
}

void h2d_Console_handleCmdChange(h2d__Console r0) {
	String r4;
	bool r1;
	h2d__Text r2;
	h2d__TextInput r5;
	r2 = r0->hintTxt;
	if( r2 == NULL ) hl_null_access();
	r1 = r0->autoComplete;
	r1 = h2d_Object_set_visible(((h2d__Object)r2),r1);
	r1 = r0->autoComplete;
	if( !r1 ) goto label$40582a2_15_14;
	r2 = r0->hintTxt;
	if( r2 == NULL ) hl_null_access();
	r5 = r0->tf;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->text;
	r4 = h2d_Console_getCommandSuggestion(r0,r4);
	r4 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r4);
	goto label$40582a2_15_18;
	label$40582a2_15_14:
	r2 = r0->hintTxt;
	if( r2 == NULL ) hl_null_access();
	r4 = (String)s$;
	r4 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r4);
	label$40582a2_15_18:
	return;
}

String h2d_Console_handleCommand__$1(venum* r0,String r1) {
	String r2, r8, r14;
	hl__types__ArrayObj r9;
	hl__types__ArrayBytes_Int r4;
	vdynamic *r13;
	varray *r12;
	vbyte *r7;
	int r5, r6, r10, r11;
	r2 = (String)s$;
	label$40582a2_16_1:
	r4 = ((Enumt$ctx_c92cbb3*)r0)->p2;
	if( r4 == NULL ) hl_null_access();
	r5 = 0;
	r6 = r4->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$40582a2_16_9;
	r5 = 0;
	goto label$40582a2_16_13;
	label$40582a2_16_9:
	r7 = r4->bytes;
	r6 = 2;
	r6 = r5 << r6;
	r5 = *(int*)(r7 + r6);
	label$40582a2_16_13:
	r8 = ((Enumt$ctx_c92cbb3*)r0)->p0;
	if( r8 == NULL ) hl_null_access();
	r6 = r8->length;
	if( r5 >= r6 ) goto label$40582a2_16_77;
	r9 = ((Enumt$ctx_c92cbb3*)r0)->p1;
	if( r9 == NULL ) hl_null_access();
	r5 = 0;
	r8 = ((Enumt$ctx_c92cbb3*)r0)->p0;
	if( r8 == NULL ) hl_null_access();
	r4 = ((Enumt$ctx_c92cbb3*)r0)->p2;
	if( r4 == NULL ) hl_null_access();
	r6 = 0;
	r10 = r4->length;
	if( ((unsigned)r6) < ((unsigned)r10) ) goto label$40582a2_16_28;
	hl_types_ArrayBytes_Int___expand(r4,r6);
	label$40582a2_16_28:
	r7 = r4->bytes;
	r10 = 2;
	r10 = r6 << r10;
	r11 = *(int*)(r7 + r10);
	++r11;
	*(int*)(r7 + r10) = r11;
	r8 = String_charAt(r8,r11);
	r6 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$40582a2_16_38;
	hl_types_ArrayObj___expand(r9,r5);
	label$40582a2_16_38:
	r12 = r9->array;
	((String*)(r12 + 1))[r5] = r8;
	r9 = ((Enumt$ctx_c92cbb3*)r0)->p1;
	if( r9 == NULL ) hl_null_access();
	r5 = 0;
	r6 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$40582a2_16_47;
	r8 = NULL;
	goto label$40582a2_16_50;
	label$40582a2_16_47:
	r12 = r9->array;
	r13 = ((vdynamic**)(r12 + 1))[r5];
	r8 = (String)r13;
	label$40582a2_16_50:
	if( r8 != r1 && (!r8 || !r1 || String___compare(r8,(vdynamic*)r1) != 0) ) goto label$40582a2_16_64;
	r4 = ((Enumt$ctx_c92cbb3*)r0)->p2;
	if( r4 == NULL ) hl_null_access();
	r5 = 0;
	r6 = r4->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$40582a2_16_57;
	hl_types_ArrayBytes_Int___expand(r4,r5);
	label$40582a2_16_57:
	r7 = r4->bytes;
	r6 = 2;
	r6 = r5 << r6;
	r10 = *(int*)(r7 + r6);
	++r10;
	*(int*)(r7 + r6) = r10;
	return r2;
	label$40582a2_16_64:
	r9 = ((Enumt$ctx_c92cbb3*)r0)->p1;
	if( r9 == NULL ) hl_null_access();
	r5 = 0;
	r6 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$40582a2_16_71;
	r14 = NULL;
	goto label$40582a2_16_74;
	label$40582a2_16_71:
	r12 = r9->array;
	r13 = ((vdynamic**)(r12 + 1))[r5];
	r14 = (String)r13;
	label$40582a2_16_74:
	r8 = String___add__(r2,r14);
	r2 = r8;
	goto label$40582a2_16_1;
	label$40582a2_16_77:
	r8 = NULL;
	return r8;
}

void h2d_Console_handleCommand(h2d__Console r0,String r1) {
	$String r39;
	String r2, r7, r22, r24, r32;
	vvirtual *r27, *r30;
	haxe__ds__StringMap r26;
	hl__types__ArrayObj r9, r13, r20;
	venum *r19, *r33;
	hl_type *r11;
	bool r25, r36;
	hl__types__ArrayBytes_Int r14;
	double r34;
	hl__types__ArrayDyn r28;
	vclosure *r18;
	haxe__Exception r38;
	vdynamic *r4, *r6, *r8, *r31, *r37;
	vbyte *r15, *r21;
	varray *r10;
	int r5, r12, r16, r17, r23, r29, r35;
	hl_trap_ctx trap$0;
	r2 = StringTools_trim(r1);
	r1 = r2;
	if( r2 == NULL ) hl_null_access();
	r5 = 0;
	r4 = String_charCodeAt(r2,r5);
	r5 = 47;
	r6 = hl_alloc_dynamic(&t$_i32);
	r6->v.i = r5;
	if( r4 != r6 && (!r4 || !r6 || (r4->v.i != r6->v.i)) ) goto label$40582a2_17_12;
	r5 = 1;
	r4 = NULL;
	r2 = String_substr(r2,r5,r4);
	r1 = r2;
	label$40582a2_17_12:
	r7 = (String)s$;
	if( r2 != r7 && (!r2 || !r7 || String___compare(r2,(vdynamic*)r7) != 0) ) goto label$40582a2_17_16;
	h2d_Console_hide(r0);
	return;
	label$40582a2_17_16:
	r9 = r0->logs;
	if( r9 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r9,((vdynamic*)r2));
	r5 = -1;
	r0->logIndex = r5;
	r5 = 12582912;
	r11 = &t$String;
	r12 = 0;
	r10 = hl_alloc_array(r11,r12);
	r9 = hl_types_ArrayObj_alloc(r10);
	r11 = &t$String;
	r12 = 1;
	r10 = hl_alloc_array(r11,r12);
	r2 = (String)s$;
	r12 = 0;
	((String*)(r10 + 1))[r12] = r2;
	r13 = hl_types_ArrayObj_alloc(r10);
	r12 = 4;
	r15 = hl_alloc_bytes(r12);
	r12 = 0;
	r16 = 0;
	r17 = 2;
	r17 = r12 << r17;
	*(int*)(r15 + r17) = r16;
	++r12;
	r12 = 1;
	r14 = hl_types_ArrayBase_allocI32(r15,r12);
	r19 = hl_alloc_enum(&t$ctx_c92cbb3,0);
	((Enumt$ctx_c92cbb3*)r19)->p0 = (String)r1;
	((Enumt$ctx_c92cbb3*)r19)->p1 = (hl__types__ArrayObj)r13;
	((Enumt$ctx_c92cbb3*)r19)->p2 = (hl__types__ArrayBytes_Int)r14;
	r18 = hl_alloc_closure_ptr(&t$fun_5a2d535,h2d_Console_handleCommand__$1,r19);
	r2 = (String)s$;
	label$40582a2_17_49:
	if( r14 == NULL ) hl_null_access();
	r12 = 0;
	r16 = r14->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_56;
	r12 = 0;
	goto label$40582a2_17_60;
	label$40582a2_17_56:
	r15 = r14->bytes;
	r16 = 2;
	r16 = r12 << r16;
	r12 = *(int*)(r15 + r16);
	label$40582a2_17_60:
	if( r1 == NULL ) hl_null_access();
	r16 = r1->length;
	if( r12 >= r16 ) goto label$40582a2_17_308;
	if( r13 == NULL ) hl_null_access();
	r12 = 0;
	r16 = 0;
	r17 = r14->length;
	if( ((unsigned)r16) < ((unsigned)r17) ) goto label$40582a2_17_70;
	r16 = 0;
	goto label$40582a2_17_74;
	label$40582a2_17_70:
	r15 = r14->bytes;
	r17 = 2;
	r17 = r16 << r17;
	r16 = *(int*)(r15 + r17);
	label$40582a2_17_74:
	r7 = String_charAt(r1,r16);
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_78;
	hl_types_ArrayObj___expand(r13,r12);
	label$40582a2_17_78:
	r10 = r13->array;
	((String*)(r10 + 1))[r12] = r7;
	r12 = 0;
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_85;
	r7 = NULL;
	goto label$40582a2_17_88;
	label$40582a2_17_85:
	r10 = r13->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r7 = (String)r8;
	label$40582a2_17_88:
	if( !r7 ) goto label$40582a2_17_97;
	r12 = r7->length;
	r16 = 1;
	if( r12 != r16 ) goto label$40582a2_17_97;
	r15 = r7->bytes;
	r21 = (vbyte*)USTR("\t");
	r12 = hl_string_compare(r15,r21,r12);
	r16 = 0;
	if( r12 == r16 ) goto label$40582a2_17_135;
	label$40582a2_17_97:
	if( !r7 ) goto label$40582a2_17_106;
	r12 = r7->length;
	r16 = 1;
	if( r12 != r16 ) goto label$40582a2_17_106;
	r15 = r7->bytes;
	r21 = (vbyte*)USTR(" ");
	r12 = hl_string_compare(r15,r21,r12);
	r16 = 0;
	if( r12 == r16 ) goto label$40582a2_17_135;
	label$40582a2_17_106:
	if( !r7 ) goto label$40582a2_17_115;
	r12 = r7->length;
	r16 = 1;
	if( r12 != r16 ) goto label$40582a2_17_115;
	r15 = r7->bytes;
	r21 = (vbyte*)USTR("\"");
	r12 = hl_string_compare(r15,r21,r12);
	r16 = 0;
	if( r12 == r16 ) goto label$40582a2_17_209;
	label$40582a2_17_115:
	if( !r7 ) goto label$40582a2_17_124;
	r12 = r7->length;
	r16 = 1;
	if( r12 != r16 ) goto label$40582a2_17_124;
	r15 = r7->bytes;
	r21 = (vbyte*)USTR("'");
	r12 = hl_string_compare(r15,r21,r12);
	r16 = 0;
	if( r12 == r16 ) goto label$40582a2_17_209;
	label$40582a2_17_124:
	r12 = 0;
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_129;
	r22 = NULL;
	goto label$40582a2_17_132;
	label$40582a2_17_129:
	r10 = r13->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r22 = (String)r8;
	label$40582a2_17_132:
	r7 = String___add__(r2,r22);
	r2 = r7;
	goto label$40582a2_17_297;
	label$40582a2_17_135:
	r12 = 0;
	r16 = 0;
	r17 = r14->length;
	if( ((unsigned)r16) < ((unsigned)r17) ) goto label$40582a2_17_141;
	r16 = 0;
	goto label$40582a2_17_145;
	label$40582a2_17_141:
	r15 = r14->bytes;
	r17 = 2;
	r17 = r16 << r17;
	r16 = *(int*)(r15 + r17);
	label$40582a2_17_145:
	r7 = String_charAt(r1,r16);
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_149;
	hl_types_ArrayObj___expand(r13,r12);
	label$40582a2_17_149:
	r10 = r13->array;
	((String*)(r10 + 1))[r12] = r7;
	label$40582a2_17_151:
	if( r13 == NULL ) hl_null_access();
	r12 = 0;
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_158;
	r7 = NULL;
	goto label$40582a2_17_161;
	label$40582a2_17_158:
	r10 = r13->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r7 = (String)r8;
	label$40582a2_17_161:
	r22 = (String)s$7215ee9;
	if( r7 == r22 || (r7 && r22 && String___compare(r7,(vdynamic*)r22) == 0) ) goto label$40582a2_17_173;
	r12 = 0;
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_168;
	r7 = NULL;
	goto label$40582a2_17_171;
	label$40582a2_17_168:
	r10 = r13->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r7 = (String)r8;
	label$40582a2_17_171:
	r22 = (String)s$5e732a1;
	if( r7 != r22 && (!r7 || !r22 || String___compare(r7,(vdynamic*)r22) != 0) ) goto label$40582a2_17_193;
	label$40582a2_17_173:
	r12 = 0;
	if( r1 == NULL ) hl_null_access();
	if( r14 == NULL ) hl_null_access();
	r16 = 0;
	r17 = r14->length;
	if( ((unsigned)r16) < ((unsigned)r17) ) goto label$40582a2_17_180;
	hl_types_ArrayBytes_Int___expand(r14,r16);
	label$40582a2_17_180:
	r15 = r14->bytes;
	r17 = 2;
	r17 = r16 << r17;
	r23 = *(int*)(r15 + r17);
	++r23;
	*(int*)(r15 + r17) = r23;
	r7 = String_charAt(r1,r23);
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_190;
	hl_types_ArrayObj___expand(r13,r12);
	label$40582a2_17_190:
	r10 = r13->array;
	((String*)(r10 + 1))[r12] = r7;
	goto label$40582a2_17_151;
	label$40582a2_17_193:
	if( r14 == NULL ) hl_null_access();
	r12 = 0;
	r16 = r14->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_198;
	hl_types_ArrayBytes_Int___expand(r14,r12);
	label$40582a2_17_198:
	r15 = r14->bytes;
	r16 = 2;
	r16 = r12 << r16;
	r17 = *(int*)(r15 + r16);
	--r17;
	*(int*)(r15 + r16) = r17;
	if( r9 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r9,((vdynamic*)r2));
	r7 = (String)s$;
	r2 = r7;
	goto label$40582a2_17_297;
	label$40582a2_17_209:
	if( r18 == NULL ) hl_null_access();
	r12 = 0;
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_215;
	r7 = NULL;
	goto label$40582a2_17_218;
	label$40582a2_17_215:
	r10 = r13->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r7 = (String)r8;
	label$40582a2_17_218:
	r7 = r18->hasValue ? ((String (*)(vdynamic*,String))r18->fun)((vdynamic*)r18->value,r7) : ((String (*)(String))r18->fun)(r7);
	if( r7 ) goto label$40582a2_17_224;
	r22 = (String)s$Bad_formated_string;
	r4 = hl_alloc_dynamic(&t$_i32);
	r4->v.i = r5;
	h2d_Console_log(r0,r22,r4);
	return;
	label$40582a2_17_224:
	if( r9 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r9,((vdynamic*)r7));
	r22 = (String)s$;
	r2 = r22;
	r12 = 0;
	r16 = 0;
	r17 = r14->length;
	if( ((unsigned)r16) < ((unsigned)r17) ) goto label$40582a2_17_234;
	r16 = 0;
	goto label$40582a2_17_238;
	label$40582a2_17_234:
	r15 = r14->bytes;
	r17 = 2;
	r17 = r16 << r17;
	r16 = *(int*)(r15 + r17);
	label$40582a2_17_238:
	r22 = String_charAt(r1,r16);
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_242;
	hl_types_ArrayObj___expand(r13,r12);
	label$40582a2_17_242:
	r10 = r13->array;
	((String*)(r10 + 1))[r12] = r22;
	label$40582a2_17_244:
	if( r13 == NULL ) hl_null_access();
	r12 = 0;
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_251;
	r22 = NULL;
	goto label$40582a2_17_254;
	label$40582a2_17_251:
	r10 = r13->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r22 = (String)r8;
	label$40582a2_17_254:
	r24 = (String)s$7215ee9;
	if( r22 == r24 || (r22 && r24 && String___compare(r22,(vdynamic*)r24) == 0) ) goto label$40582a2_17_266;
	r12 = 0;
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_261;
	r22 = NULL;
	goto label$40582a2_17_264;
	label$40582a2_17_261:
	r10 = r13->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r22 = (String)r8;
	label$40582a2_17_264:
	r24 = (String)s$5e732a1;
	if( r22 != r24 && (!r22 || !r24 || String___compare(r22,(vdynamic*)r24) != 0) ) goto label$40582a2_17_286;
	label$40582a2_17_266:
	r12 = 0;
	if( r1 == NULL ) hl_null_access();
	if( r14 == NULL ) hl_null_access();
	r16 = 0;
	r17 = r14->length;
	if( ((unsigned)r16) < ((unsigned)r17) ) goto label$40582a2_17_273;
	hl_types_ArrayBytes_Int___expand(r14,r16);
	label$40582a2_17_273:
	r15 = r14->bytes;
	r17 = 2;
	r17 = r16 << r17;
	r23 = *(int*)(r15 + r17);
	++r23;
	*(int*)(r15 + r17) = r23;
	r22 = String_charAt(r1,r23);
	r16 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_283;
	hl_types_ArrayObj___expand(r13,r12);
	label$40582a2_17_283:
	r10 = r13->array;
	((String*)(r10 + 1))[r12] = r22;
	goto label$40582a2_17_244;
	label$40582a2_17_286:
	if( r14 == NULL ) hl_null_access();
	r12 = 0;
	r16 = r14->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_291;
	hl_types_ArrayBytes_Int___expand(r14,r12);
	label$40582a2_17_291:
	r15 = r14->bytes;
	r16 = 2;
	r16 = r12 << r16;
	r17 = *(int*)(r15 + r16);
	--r17;
	*(int*)(r15 + r16) = r17;
	label$40582a2_17_297:
	r12 = 0;
	r16 = r14->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_301;
	hl_types_ArrayBytes_Int___expand(r14,r12);
	label$40582a2_17_301:
	r15 = r14->bytes;
	r16 = 2;
	r16 = r12 << r16;
	r17 = *(int*)(r15 + r16);
	++r17;
	*(int*)(r15 + r16) = r17;
	goto label$40582a2_17_49;
	label$40582a2_17_308:
	if( r9 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r9,((vdynamic*)r2));
	r12 = 0;
	r16 = r9->length;
	if( ((unsigned)r12) < ((unsigned)r16) ) goto label$40582a2_17_315;
	r7 = NULL;
	goto label$40582a2_17_318;
	label$40582a2_17_315:
	r10 = r9->array;
	r8 = ((vdynamic**)(r10 + 1))[r12];
	r7 = (String)r8;
	label$40582a2_17_318:
	r26 = r0->aliases;
	if( r26 == NULL ) hl_null_access();
	r25 = haxe_ds_StringMap_exists(r26,r7);
	if( !r25 ) goto label$40582a2_17_327;
	r26 = r0->aliases;
	if( r26 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r26,r7);
	r22 = (String)r8;
	r7 = r22;
	label$40582a2_17_327:
	r26 = r0->commands;
	if( r26 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r26,r7);
	r27 = hl_to_virtual(&t$vrt_a6bfc9e,(vdynamic*)r8);
	if( r27 ) goto label$40582a2_17_339;
	r22 = (String)s$Unknown_command_;
	r22 = String___add__(r22,r7);
	r24 = (String)s$b15835f;
	r22 = String___add__(r22,r24);
	r4 = hl_alloc_dynamic(&t$_i32);
	r4->v.i = r5;
	h2d_Console_log(r0,r22,r4);
	return;
	label$40582a2_17_339:
	r28 = (hl__types__ArrayDyn)hl_alloc_obj(&t$hl_types_ArrayDyn);
	hl_types_ArrayDyn_new(r28);
	r12 = 0;
	if( r27 == NULL ) hl_null_access();
	r20 = hl_vfields(r27)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r27)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r27->value,7638631/*args*/,&t$hl_types_ArrayObj);
	if( r20 == NULL ) hl_null_access();
	r16 = r20->length;
	label$40582a2_17_346:
	if( r12 >= r16 ) goto label$40582a2_17_539;
	r17 = r12;
	++r12;
	if( r27 == NULL ) hl_null_access();
	r20 = hl_vfields(r27)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r27)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r27->value,7638631/*args*/,&t$hl_types_ArrayObj);
	if( r20 == NULL ) hl_null_access();
	r29 = r20->length;
	if( ((unsigned)r17) < ((unsigned)r29) ) goto label$40582a2_17_357;
	r30 = NULL;
	goto label$40582a2_17_360;
	label$40582a2_17_357:
	r10 = r20->array;
	r8 = ((vdynamic**)(r10 + 1))[r17];
	r30 = hl_to_virtual(&t$vrt_6b9bbd4,(vdynamic*)r8);
	label$40582a2_17_360:
	if( r9 == NULL ) hl_null_access();
	r29 = 1;
	r23 = r17 + r29;
	r29 = r9->length;
	if( ((unsigned)r23) < ((unsigned)r29) ) goto label$40582a2_17_367;
	r22 = NULL;
	goto label$40582a2_17_370;
	label$40582a2_17_367:
	r10 = r9->array;
	r8 = ((vdynamic**)(r10 + 1))[r23];
	r22 = (String)r8;
	label$40582a2_17_370:
	if( r22 ) goto label$40582a2_17_385;
	if( r30 == NULL ) hl_null_access();
	r31 = hl_vfields(r30)[1] ? (*(vdynamic**)(hl_vfields(r30)[1])) : (vdynamic*)hl_dyn_getp(r30->value,5545011/*opt*/,&t$nul_bool);
	r25 = r31 ? r31->v.b : 0;
	if( !r25 ) goto label$40582a2_17_379;
	if( r28 == NULL ) hl_null_access();
	r8 = NULL;
	r23 = hl_types_ArrayDyn_push(r28,r8);
	goto label$40582a2_17_346;
	label$40582a2_17_379:
	r24 = (String)s$Missing_argument_;
	r32 = hl_vfields(r30)[0] ? (*(String*)(hl_vfields(r30)[0])) : (String)hl_dyn_getp(r30->value,150958933/*name*/,&t$String);
	r24 = String___add__(r24,r32);
	r4 = hl_alloc_dynamic(&t$_i32);
	r4->v.i = r5;
	h2d_Console_log(r0,r24,r4);
	return;
	label$40582a2_17_385:
	if( r30 == NULL ) hl_null_access();
	r33 = hl_vfields(r30)[2] ? (*(venum**)(hl_vfields(r30)[2])) : (venum*)hl_dyn_getp(r30->value,116/*t*/,&t$h2d_ConsoleArg);
	if( r33 == NULL ) hl_null_access();
	r23 = HL__ENUM_INDEX__(r33);
	switch(r23) {
		default:
			goto label$40582a2_17_538;
		case 0:
			r4 = Std_parseInt(r22);
			if( r4 ) goto label$40582a2_17_402;
			r24 = (String)s$;
			r24 = String___add__(r24,r22);
			r32 = (String)s$_should_be_Int_for_argument_;
			r24 = String___add__(r24,r32);
			r32 = hl_vfields(r30)[0] ? (*(String*)(hl_vfields(r30)[0])) : (String)hl_dyn_getp(r30->value,150958933/*name*/,&t$String);
			r24 = String___add__(r24,r32);
			r6 = hl_alloc_dynamic(&t$_i32);
			r6->v.i = r5;
			h2d_Console_log(r0,r24,r6);
			return;
			label$40582a2_17_402:
			if( r28 == NULL ) hl_null_access();
			r23 = hl_types_ArrayDyn_push(r28,((vdynamic*)r4));
			goto label$40582a2_17_538;
		case 1:
			r34 = Std_parseFloat(r22);
			r25 = hl_math_isnan(r34);
			if( !r25 ) goto label$40582a2_17_417;
			r24 = (String)s$;
			r24 = String___add__(r24,r22);
			r32 = (String)s$_should_be_Float_for_argument_;
			r24 = String___add__(r24,r32);
			r32 = hl_vfields(r30)[0] ? (*(String*)(hl_vfields(r30)[0])) : (String)hl_dyn_getp(r30->value,150958933/*name*/,&t$String);
			r24 = String___add__(r24,r32);
			r4 = hl_alloc_dynamic(&t$_i32);
			r4->v.i = r5;
			h2d_Console_log(r0,r24,r4);
			return;
			label$40582a2_17_417:
			if( r28 == NULL ) hl_null_access();
			r8 = hl_alloc_dynamic(&t$_f64);
			r8->v.d = r34;
			r23 = hl_types_ArrayDyn_push(r28,r8);
			goto label$40582a2_17_538;
		case 2:
			if( r28 == NULL ) hl_null_access();
			r20 = hl_vfields(r27)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r27)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r27->value,7638631/*args*/,&t$hl_types_ArrayObj);
			if( r20 == NULL ) hl_null_access();
			r23 = r20->length;
			r29 = 1;
			if( r23 != r29 ) goto label$40582a2_17_443;
			if( r1 == NULL ) hl_null_access();
			r23 = 0;
			r29 = r9->length;
			if( ((unsigned)r23) < ((unsigned)r29) ) goto label$40582a2_17_433;
			r32 = NULL;
			goto label$40582a2_17_436;
			label$40582a2_17_433:
			r10 = r9->array;
			r8 = ((vdynamic**)(r10 + 1))[r23];
			r32 = (String)r8;
			label$40582a2_17_436:
			if( r32 == NULL ) hl_null_access();
			r23 = r32->length;
			r4 = NULL;
			r24 = String_substr(r1,r23,r4);
			r24 = StringTools_trim(r24);
			r8 = ((vdynamic*)r24);
			goto label$40582a2_17_444;
			label$40582a2_17_443:
			r8 = ((vdynamic*)r22);
			label$40582a2_17_444:
			r23 = hl_types_ArrayDyn_push(r28,r8);
			goto label$40582a2_17_538;
		case 3:
			if( !r22 ) goto label$40582a2_17_455;
			r23 = r22->length;
			r29 = 1;
			if( r23 != r29 ) goto label$40582a2_17_455;
			r15 = r22->bytes;
			r21 = (vbyte*)USTR("1");
			r23 = hl_string_compare(r15,r21,r23);
			r29 = 0;
			if( r23 == r29 ) goto label$40582a2_17_491;
			label$40582a2_17_455:
			if( !r22 ) goto label$40582a2_17_464;
			r23 = r22->length;
			r29 = 4;
			if( r23 != r29 ) goto label$40582a2_17_464;
			r15 = r22->bytes;
			r21 = (vbyte*)USTR("true");
			r23 = hl_string_compare(r15,r21,r23);
			r29 = 0;
			if( r23 == r29 ) goto label$40582a2_17_491;
			label$40582a2_17_464:
			if( !r22 ) goto label$40582a2_17_473;
			r23 = r22->length;
			r29 = 1;
			if( r23 != r29 ) goto label$40582a2_17_473;
			r15 = r22->bytes;
			r21 = (vbyte*)USTR("0");
			r23 = hl_string_compare(r15,r21,r23);
			r29 = 0;
			if( r23 == r29 ) goto label$40582a2_17_496;
			label$40582a2_17_473:
			if( !r22 ) goto label$40582a2_17_482;
			r23 = r22->length;
			r29 = 5;
			if( r23 != r29 ) goto label$40582a2_17_482;
			r15 = r22->bytes;
			r21 = (vbyte*)USTR("false");
			r23 = hl_string_compare(r15,r21,r23);
			r29 = 0;
			if( r23 == r29 ) goto label$40582a2_17_496;
			label$40582a2_17_482:
			r24 = (String)s$;
			r24 = String___add__(r24,r22);
			r32 = (String)s$_should_be_Bool_for_argument_;
			r24 = String___add__(r24,r32);
			r32 = hl_vfields(r30)[0] ? (*(String*)(hl_vfields(r30)[0])) : (String)hl_dyn_getp(r30->value,150958933/*name*/,&t$String);
			r24 = String___add__(r24,r32);
			r4 = hl_alloc_dynamic(&t$_i32);
			r4->v.i = r5;
			h2d_Console_log(r0,r24,r4);
			return;
			label$40582a2_17_491:
			if( r28 == NULL ) hl_null_access();
			r25 = true;
			r8 = hl_alloc_dynbool(r25);
			r23 = hl_types_ArrayDyn_push(r28,r8);
			goto label$40582a2_17_500;
			label$40582a2_17_496:
			if( r28 == NULL ) hl_null_access();
			r25 = false;
			r8 = hl_alloc_dynbool(r25);
			r23 = hl_types_ArrayDyn_push(r28,r8);
			label$40582a2_17_500:
			goto label$40582a2_17_538;
		case 4:
			r20 = ((h2d_ConsoleArg_AEnum*)r33)->p0;
			r25 = false;
			r23 = 0;
			label$40582a2_17_504:
			if( r20 == NULL ) hl_null_access();
			r35 = r20->length;
			if( r23 >= r35 ) goto label$40582a2_17_522;
			r35 = r20->length;
			if( ((unsigned)r23) < ((unsigned)r35) ) goto label$40582a2_17_512;
			r24 = NULL;
			goto label$40582a2_17_515;
			label$40582a2_17_512:
			r10 = r20->array;
			r8 = ((vdynamic**)(r10 + 1))[r23];
			r24 = (String)r8;
			label$40582a2_17_515:
			++r23;
			if( r22 != r24 && (!r22 || !r24 || String___compare(r22,(vdynamic*)r24) != 0) ) goto label$40582a2_17_521;
			r36 = true;
			r25 = r36;
			if( r28 == NULL ) hl_null_access();
			r29 = hl_types_ArrayDyn_push(r28,((vdynamic*)r24));
			label$40582a2_17_521:
			goto label$40582a2_17_504;
			label$40582a2_17_522:
			if( r25 ) goto label$40582a2_17_538;
			r24 = (String)s$;
			r24 = String___add__(r24,r22);
			r32 = (String)s$f380c35;
			r24 = String___add__(r24,r32);
			r32 = (String)s$b99834b;
			r32 = hl_types_ArrayObj_join(r20,r32);
			r24 = String___add__(r24,r32);
			r32 = (String)s$_for_argument_;
			r24 = String___add__(r24,r32);
			if( r30 == NULL ) hl_null_access();
			r32 = hl_vfields(r30)[0] ? (*(String*)(hl_vfields(r30)[0])) : (String)hl_dyn_getp(r30->value,150958933/*name*/,&t$String);
			r24 = String___add__(r24,r32);
			r4 = hl_alloc_dynamic(&t$_i32);
			r4->v.i = r5;
			h2d_Console_log(r0,r24,r4);
			return;
	}
	label$40582a2_17_538:
	goto label$40582a2_17_346;
	label$40582a2_17_539:
	hl_trap(trap$0,r8,label$40582a2_17_546);
	r8 = NULL;
	if( r27 == NULL ) hl_null_access();
	r37 = hl_vfields(r27)[1] ? (*(vdynamic**)(hl_vfields(r27)[1])) : (vdynamic*)hl_dyn_getp(r27->value,18576142/*callb*/,&t$_dyn);
	r8 = Reflect_callMethod(r8,r37,r28);
	hl_endtrap(trap$0);
	goto label$40582a2_17_560;
	label$40582a2_17_546:
	r37 = NULL;
	r38 = haxe_Exception_caught(r8);
	if( r38 == NULL ) hl_null_access();
	r37 = ((vdynamic* (*)(haxe__Exception))r38->$type->vobj_proto[0])(r38);
	r39 = ($String)g$_String;
	r25 = Std_isOfType(r37,((vdynamic*)r39));
	if( !r25 ) goto label$40582a2_17_559;
	r22 = (String)hl_dyn_castp(&r37,&t$_dyn,&t$String);
	r24 = (String)s$ERROR_;
	r24 = String___add__(r24,r22);
	r4 = hl_alloc_dynamic(&t$_i32);
	r4->v.i = r5;
	h2d_Console_log(r0,r24,r4);
	goto label$40582a2_17_560;
	label$40582a2_17_559:
	hl_throw((vdynamic*)r8);
	label$40582a2_17_560:
	return;
}

void h2d_Console_log(h2d__Console r0,String r1,vdynamic* r2) {
	String r9, r11, r12;
	bool r17;
	h2d__HtmlText r8, r10;
	double r7, r15, r16;
	h2d__TextInput r6;
	vdynamic *r4, *r14;
	int r5, r13;
	if( r2 ) goto label$40582a2_18_6;
	r6 = r0->tf;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->textColor;
	r4 = hl_alloc_dynamic(&t$_i32);
	r4->v.i = r5;
	r2 = r4;
	label$40582a2_18_6:
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r7 = h2d_Text_get_textHeight(((h2d__Text)r8));
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r10 = r0->logTxt;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->text;
	r11 = (String)s$_font_color_;
	r5 = r2 ? r2->v.i : 0;
	r13 = 16777215;
	r5 = r5 & r13;
	r13 = 6;
	r4 = hl_alloc_dynamic(&t$_i32);
	r4->v.i = r13;
	r12 = StringTools_hex(r5,r4);
	r11 = String___add__(r11,r12);
	r12 = (String)s$490d6e0;
	r11 = String___add__(r11,r12);
	r14 = NULL;
	r12 = StringTools_htmlEscape(r1,r14);
	r11 = String___add__(r11,r12);
	r12 = (String)s$_font_br_;
	r11 = String___add__(r11,r12);
	r9 = String___add__(r9,r11);
	r9 = h2d_HtmlText_set_text(r8,r9);
	r15 = r0->logDY;
	r16 = 0.;
	if( r15 == r16 ) goto label$40582a2_18_41;
	r15 = r0->logDY;
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r16 = h2d_Text_get_textHeight(((h2d__Text)r8));
	r16 = r16 - r7;
	r15 = r15 + r16;
	r0->logDY = r15;
	label$40582a2_18_41:
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r15 = 1.;
	r8->alpha = r15;
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r17 = true;
	r17 = h2d_Object_set_visible(((h2d__Object)r8),r17);
	r15 = hl_sys_time();
	r0->lastLogTime = r15;
	return;
}

void h2d_Console_sync(h2d__Console r0,h2d__RenderContext r1) {
	h2d__$Console r15;
	bool r4;
	h2d__HtmlText r13;
	h2d__Tile r10;
	h2d__Bitmap r11;
	double r5, r12, r14, r16;
	h2d__TextInput r9;
	vdynamic *r8;
	h2d__Scene r2;
	int r6, r7;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->scene;
	if( !r2 ) goto label$40582a2_19_32;
	r4 = true;
	r0->posChanged = r4;
	r5 = 0.;
	r0->x = r5;
	r4 = true;
	r0->posChanged = r4;
	if( r2 == NULL ) hl_null_access();
	r6 = r2->height;
	r7 = r0->height;
	r6 = r6 - r7;
	r5 = (double)r6;
	r0->y = r5;
	r6 = r2->width;
	r0->width = r6;
	r9 = r0->tf;
	if( r9 == NULL ) hl_null_access();
	r6 = r0->width;
	r5 = (double)r6;
	r8 = hl_alloc_dynamic(&t$_f64);
	r8->v.d = r5;
	r8 = h2d_Text_set_maxWidth(((h2d__Text)r9),r8);
	r11 = r0->bg;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->tile;
	if( r10 == NULL ) hl_null_access();
	r6 = r0->width;
	r5 = (double)r6;
	r6 = r0->height;
	r12 = (double)r6;
	h2d_Tile_scaleToSize(r10,r5,r12);
	label$40582a2_19_32:
	r13 = r0->logTxt;
	if( r13 == NULL ) hl_null_access();
	r4 = r13->visible;
	if( !r4 ) goto label$40582a2_19_67;
	r11 = r0->bg;
	if( r11 == NULL ) hl_null_access();
	r5 = r11->y;
	r12 = h2d_Text_get_textHeight(((h2d__Text)r13));
	r5 = r5 - r12;
	r12 = r0->logDY;
	r5 = r5 + r12;
	r4 = true;
	r13->posChanged = r4;
	r13->y = r5;
	r5 = hl_sys_time();
	r12 = r0->lastLogTime;
	r5 = r5 - r12;
	r15 = (h2d__$Console)g$_h2d_Console;
	r14 = r15->HIDE_LOG_TIMEOUT;
	if( !(r14 < r5) ) goto label$40582a2_19_67;
	r11 = r0->bg;
	if( r11 == NULL ) hl_null_access();
	r4 = r11->visible;
	if( r4 ) goto label$40582a2_19_67;
	r12 = r13->alpha;
	r14 = r1->elapsedTime;
	r16 = 4.;
	r14 = r14 * r16;
	r12 = r12 - r14;
	r13->alpha = r12;
	r12 = r13->alpha;
	r14 = 0.;
	if( !(r14 >= r12) ) goto label$40582a2_19_67;
	r4 = false;
	r4 = h2d_Object_set_visible(((h2d__Object)r13),r4);
	label$40582a2_19_67:
	h2d_Object_sync(((h2d__Object)r0),r1);
	return;
}

void h2d_Console_new(h2d__Console r0,h2d__Font r1,h2d__Object r2) {
	String r23, r24, r26;
	haxe__ds__StringMap r22;
	hl__types__ArrayObj r10;
	vvirtual *r9, *r25;
	venum *r27;
	hl_type *r12;
	bool r3;
	h2d__Tile r14;
	h2d__HtmlText r8;
	h2d__Text r18;
	vclosure *r20, *r21, *r29;
	h2d__Bitmap r13;
	double r5;
	h2d__TextInput r19;
	vdynamic *r15, *r16, *r17, *r28;
	varray *r11;
	int r4, r7;
	r3 = true;
	r0->autoComplete = r3;
	r4 = 47;
	r0->shortKeyChar = r4;
	r5 = 0.;
	r0->logDY = r5;
	h2d_Object_new(((h2d__Object)r0),r2);
	if( r1 == NULL ) hl_null_access();
	r5 = r1->lineHeight;
	r4 = hl_math_ceil(r5);
	r7 = 2;
	r4 = r4 + r7;
	r0->height = r4;
	r8 = (h2d__HtmlText)hl_alloc_obj(&t$h2d_HtmlText);
	h2d_HtmlText_new(r8,r1,((h2d__Object)r0));
	r0->logTxt = r8;
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r3 = true;
	r8->posChanged = r3;
	r5 = 2.;
	r8->x = r5;
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r9 = hl_alloc_virtual(&t$vrt_1a17fe0);
	r4 = 0;
	r5 = (double)r4;
	if( hl_vfields(r9)[2] ) *(double*)(hl_vfields(r9)[2]) = (double)r5; else hl_dyn_setd(r9->value,22420/*dx*/,r5);
	r4 = 1;
	r5 = (double)r4;
	if( hl_vfields(r9)[3] ) *(double*)(hl_vfields(r9)[3]) = (double)r5; else hl_dyn_setd(r9->value,22421/*dy*/,r5);
	r4 = 0;
	if( hl_vfields(r9)[1] ) *(int*)(hl_vfields(r9)[1]) = (int)r4; else hl_dyn_seti(r9->value,173830765/*color*/,&t$_i32,r4);
	r5 = 0.5;
	if( hl_vfields(r9)[0] ) *(double*)(hl_vfields(r9)[0]) = (double)r5; else hl_dyn_setd(r9->value,26650595/*alpha*/,r5);
	r8->dropShadow = r9;
	r8 = r0->logTxt;
	if( r8 == NULL ) hl_null_access();
	r3 = false;
	r3 = h2d_Object_set_visible(((h2d__Object)r8),r3);
	r12 = &t$String;
	r4 = 0;
	r11 = hl_alloc_array(r12,r4);
	r10 = hl_types_ArrayObj_alloc(r11);
	r0->logs = r10;
	r4 = -1;
	r0->logIndex = r4;
	r13 = (h2d__Bitmap)hl_alloc_obj(&t$h2d_Bitmap);
	r4 = 0;
	r7 = 1;
	r15 = hl_alloc_dynamic(&t$_i32);
	r15->v.i = r7;
	r7 = 1;
	r16 = hl_alloc_dynamic(&t$_i32);
	r16->v.i = r7;
	r5 = 0.5;
	r17 = hl_alloc_dynamic(&t$_f64);
	r17->v.d = r5;
	r14 = h2d_Tile_fromColor(r4,r15,r16,r17);
	h2d_Bitmap_new(r13,r14,((h2d__Object)r0));
	r0->bg = r13;
	r13 = r0->bg;
	if( r13 == NULL ) hl_null_access();
	r3 = false;
	r3 = h2d_Object_set_visible(((h2d__Object)r13),r3);
	r18 = (h2d__Text)hl_alloc_obj(&t$h2d_Text);
	r13 = r0->bg;
	h2d_Text_new(r18,r1,((h2d__Object)r13));
	r0->hintTxt = r18;
	r18 = r0->hintTxt;
	if( r18 == NULL ) hl_null_access();
	r3 = true;
	r18->posChanged = r3;
	r5 = 2.;
	r18->x = r5;
	r18 = r0->hintTxt;
	if( r18 == NULL ) hl_null_access();
	r3 = true;
	r18->posChanged = r3;
	r5 = 1.;
	r18->y = r5;
	r18 = r0->hintTxt;
	if( r18 == NULL ) hl_null_access();
	r4 = -1;
	r4 = ((int (*)(h2d__Text,int))r18->$type->vobj_proto[19])(r18,r4);
	r18 = r0->hintTxt;
	if( r18 == NULL ) hl_null_access();
	r5 = 0.5;
	r18->alpha = r5;
	r19 = (h2d__TextInput)hl_alloc_obj(&t$h2d_TextInput);
	r13 = r0->bg;
	h2d_TextInput_new(r19,r1,((h2d__Object)r13));
	r0->tf = r19;
	r19 = r0->tf;
	if( r19 == NULL ) hl_null_access();
	r20 = hl_alloc_closure_ptr(&t$fun_4df0d04,h2d_Console_handleKey,r0);
	r19->onKeyDown = r20;
	r19 = r0->tf;
	if( r19 == NULL ) hl_null_access();
	r21 = hl_alloc_closure_ptr(&t$fun_06b5587,h2d_Console_handleCmdChange,r0);
	r19->onChange = r21;
	r19 = r0->tf;
	if( r19 == NULL ) hl_null_access();
	r20 = hl_alloc_closure_ptr(&t$fun_4df0d04,h2d_Console_new__$1,r0);
	r19->onFocusLost = r20;
	r19 = r0->tf;
	if( r19 == NULL ) hl_null_access();
	r3 = true;
	r19->posChanged = r3;
	r5 = 2.;
	r19->x = r5;
	r19 = r0->tf;
	if( r19 == NULL ) hl_null_access();
	r3 = true;
	r19->posChanged = r3;
	r5 = 1.;
	r19->y = r5;
	r19 = r0->tf;
	if( r19 == NULL ) hl_null_access();
	r4 = -1;
	r4 = h2d_Text_set_textColor(((h2d__Text)r19),r4);
	r22 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r22);
	r0->commands = r22;
	r22 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r22);
	r0->aliases = r22;
	r23 = (String)s$help;
	r24 = (String)s$Show_help;
	r12 = &t$vrt_6b9bbd4;
	r4 = 1;
	r11 = hl_alloc_array(r12,r4);
	r25 = hl_alloc_virtual(&t$vrt_6b9bbd4);
	r26 = (String)s$command;
	if( hl_vfields(r25)[0] ) *(String*)(hl_vfields(r25)[0]) = (String)r26; else hl_dyn_setp(r25->value,150958933/*name*/,&t$String,r26);
	r27 = (venum*)g$h2d_ConsoleArg_AString;
	if( hl_vfields(r25)[2] ) *(venum**)(hl_vfields(r25)[2]) = (venum*)r27; else hl_dyn_setp(r25->value,116/*t*/,&t$h2d_ConsoleArg,r27);
	r3 = true;
	r28 = hl_alloc_dynbool(r3);
	if( hl_vfields(r25)[1] ) *(vdynamic**)(hl_vfields(r25)[1]) = (vdynamic*)r28; else hl_dyn_setp(r25->value,5545011/*opt*/,&t$nul_bool,r28);
	r4 = 0;
	((vvirtual**)(r11 + 1))[r4] = r25;
	r10 = hl_types_ArrayObj_alloc(r11);
	r29 = hl_alloc_closure_ptr(&t$fun_0221c1d,h2d_Console_showHelp,r0);
	h2d_Console_addCommand(r0,r23,r24,r10,((vdynamic*)r29));
	r23 = (String)s$cls;
	r24 = (String)s$Clear_console;
	r12 = &t$vrt_6b9bbd4;
	r4 = 0;
	r11 = hl_alloc_array(r12,r4);
	r10 = hl_types_ArrayObj_alloc(r11);
	r21 = hl_alloc_closure_ptr(&t$fun_06b5587,h2d_Console_new__$2,r0);
	h2d_Console_addCommand(r0,r23,r24,r10,((vdynamic*)r21));
	r23 = (String)s$d1457b7;
	r24 = (String)s$help;
	h2d_Console_addAlias(r0,r23,r24);
	return;
}

