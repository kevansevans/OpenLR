// Generated by HLC 4.1.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <h2d/HtmlText.h>
#include <h2d/RenderContext.h>
#include <hl/types/ArrayBytes_Float.h>
#include <hxsl/Shader.h>
#include <h3d/Matrix.h>
extern hl_type t$h3d_shader_ColorMatrix;
void h3d_shader_ColorMatrix_new(h3d__shader__ColorMatrix,hl__types__ArrayBytes_Float);
hxsl__Shader h2d_Drawable_addShader(h2d__Drawable,hxsl__Shader);
void h3d_Matrix_zero(h3d__Matrix);
extern hl_type t$_i32;
void h2d_TileGroup_drawWith(h2d__TileGroup,h2d__RenderContext,h2d__Drawable);
bool h2d_Drawable_removeShader(h2d__Drawable,hxsl__Shader);
extern h2d__$HtmlText g$_h2d_HtmlText;
String h2d_Text_set_text(h2d__Text,String);
#include <haxe/Exception.h>
Xml Xml_parse(String);
haxe__Exception haxe_Exception_caught(vdynamic*);
extern String s$Could_not_parse_;
String String___add__(String,String);
extern String s$bbee82c;
String Std_string(vdynamic*);
extern String s$9371d7a;
vdynamic* haxe_Exception_thrown(vdynamic*);
void h2d_HtmlText_validateNodes(h2d__HtmlText,Xml);
#include <_std/Xml.h>
#include <haxe/iterators/ArrayIterator.h>
#include <hl/types/ArrayDyn.h>
extern $Xml g$_Xml;
extern String s$63ec124;
String _Xml_XmlType_Impl__toString(int);
String String_toLowerCase(String);
#include <hl/natives.h>
extern String s$bold;
extern String s$face;
bool Xml_exists(Xml,String);
String Xml_get(Xml,String);
extern String s$src;
extern String s$italic;
extern String s$925902a;
extern hl_type t$haxe_iterators_ArrayIterator;
extern hl_type t$hl_types_ArrayDyn;
extern hl_type t$hl_types_ArrayObj;
void haxe_iterators_ArrayIterator_new(haxe__iterators__ArrayIterator,hl__types__ArrayDyn);
extern hl_type t$vrt_15cf21a;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_efa96ab;
#include <_std/Math.h>
void h2d_TileGroup_clear(h2d__TileGroup);
extern hl_type t$h2d_Object;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
void h2d_TileGroup_setDefaultColor(h2d__TileGroup,int,double*);
extern $Math g$_Math;
extern hl_type t$vrt_9a44900;
extern hl_type t$vrt_abef2f5;
extern hl_type t$Xml;
extern hl_type t$h2d_Font;
void h2d_HtmlText_buildSizes(h2d__HtmlText,Xml,h2d__Font,hl__types__ArrayObj,vvirtual*);
extern venum* g$h2d_Align_MultilineCenter;
extern venum* g$h2d_Align_MultilineRight;
extern venum* g$h2d_Align_Center;
void h2d_HtmlText_addNode(h2d__HtmlText,Xml,h2d__Font,venum*,bool,hl__types__ArrayObj);
#include <haxe/ds/IntMap.h>
#include <h2d/FontChar.h>
#include <hxd/Charset.h>
extern String s$Bad_node_type_unexpected_;
vdynamic* String_charCodeAt(String,int);
vdynamic* haxe_ds_IntMap_get(haxe__ds__IntMap,int);
vdynamic* hxd_Charset_resolveChar(hxd__Charset,int,haxe__ds__IntMap);
bool hxd_Charset_isSpace(hxd__Charset,int);
double h2d_FontChar_getKerningOffset(h2d__FontChar,int);
String String_substr(String,int,vdynamic*);
extern String s$68b329d;
extern hl_type t$ctx_42364b3;
extern hl_type t$fun_b198ffc;
extern venum* g$h2d_LineHeightMode_Constant;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
vvirtual* Xml_attributes(Xml);
extern hl_type t$fun_820f49a;
int String___compare(String,vdynamic*);
h2d__Tile h2d_Tile_fromColor(int,vdynamic*,vdynamic*,vdynamic*);
double Math_max(double,double);
extern venum* g$h2d_LineHeightMode_Accurate;
extern String s$p;
String h2d_HtmlText_htmlToText(h2d__HtmlText,String);
vdynamic* hl_types_ArrayObj_pop(hl__types__ArrayObj);
extern hl_type t$String;
bool hxd_Charset_isBreakChar(hxd__Charset,int);
bool hxd_Charset_isComplementChar(hxd__Charset,int);
extern String s$;
String hl_types_ArrayObj_join(hl__types__ArrayObj,String);
extern String s$7215ee9;
String EReg_replace(EReg,String,String);
#include <hxd/Event.h>
#include <h2d/col/Point.h>
#include <h2d/FontType.h>
#include <h2d/Bitmap.h>
#include <h2d/TileLayerContent.h>
extern String s$href;
extern hl_type t$h2d_Interactive;
void h2d_Interactive_new(h2d__Interactive,double,double,h2d__Object,vvirtual*);
extern hl_type t$ctx_d68f9c9;
extern hl_type t$fun_25e7e5c;
extern hl_type t$h2d_TileGroup;
void h2d_TileGroup_new(h2d__TileGroup,h2d__Tile,h2d__Object);
extern hl_type t$h3d_shader_SignedDistanceField;
void h3d_shader_SignedDistanceField_new(h3d__shader__SignedDistanceField);
extern hl_type t$h3d_Vector;
void h3d_Vector_new(h3d__Vector,double*,double*,double*,double*);
extern String s$01abfc7;
String String_charAt(String,int);
extern String s$0x;
vdynamic* Std_parseInt(String);
double Std_parseFloat(String);
extern hl_type t$h2d_Bitmap;
void h2d_Bitmap_new(h2d__Bitmap,h2d__Tile,h2d__Object);
extern String s$align;
extern venum* g$h2d_Align_Left;
extern venum* g$h2d_Align_Right;
void h2d_TileLayerContent_add(h2d__TileLayerContent,double,double,double,double,double,double,h2d__Tile);
void h2d_Text_rebuild(h2d__Text);
#include <h2d/col/Bounds.h>
extern h2d__$Bitmap g$_h2d_Bitmap;
bool Std_isOfType(vdynamic*,vdynamic*);
bool h2d_Object_set_visible(h2d__Object,bool);
void h2d_Text_getBoundsRec(h2d__Text,h2d__Object,h2d__col__Bounds,bool);
extern hl_type t$fun_4fb336a;
extern hl_type t$fun_75db657;
extern hl_type t$fun_a333c47;
extern hl_type t$fun_fb4afe0;
extern venum* g$h2d_ImageVerticalAlign_Bottom;
void h2d_Text_new(h2d__Text,h2d__Font,h2d__Object);

h2d__Tile h2d_HtmlText_defaultLoadImage(String r0) {
	h2d__Tile r1;
	r1 = NULL;
	return r1;
}

h2d__Font h2d_HtmlText_defaultLoadFont(String r0) {
	h2d__Font r1;
	r1 = NULL;
	return r1;
}

String h2d_HtmlText_defaultFormatText(String r0) {
	return r0;
}

void h2d_HtmlText_draw(h2d__HtmlText r0,h2d__RenderContext r1) {
	vvirtual *r3;
	bool r17;
	hxsl__Shader r12;
	hl__types__ArrayBytes_Float r11;
	h3d__shader__ColorMatrix r10;
	h2d__TileGroup r16;
	double r4, r5, r6, r7, r8, r9;
	int r14, r15;
	h3d__Matrix r13;
	r3 = r0->dropShadow;
	if( !r3 ) goto label$4f418b7_4_89;
	r4 = r0->absX;
	r5 = r0->absY;
	r6 = r0->absX;
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r7 = hl_vfields(r3)[2] ? (*(double*)(hl_vfields(r3)[2])) : (double)hl_dyn_getd(r3->value,22420/*dx*/);
	r8 = r0->matA;
	r7 = r7 * r8;
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r8 = hl_vfields(r3)[3] ? (*(double*)(hl_vfields(r3)[3])) : (double)hl_dyn_getd(r3->value,22421/*dy*/);
	r9 = r0->matC;
	r8 = r8 * r9;
	r7 = r7 + r8;
	r6 = r6 + r7;
	r0->absX = r6;
	r6 = r0->absY;
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r7 = hl_vfields(r3)[2] ? (*(double*)(hl_vfields(r3)[2])) : (double)hl_dyn_getd(r3->value,22420/*dx*/);
	r8 = r0->matB;
	r7 = r7 * r8;
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r8 = hl_vfields(r3)[3] ? (*(double*)(hl_vfields(r3)[3])) : (double)hl_dyn_getd(r3->value,22421/*dy*/);
	r9 = r0->matD;
	r8 = r8 * r9;
	r7 = r7 + r8;
	r6 = r6 + r7;
	r0->absY = r6;
	r10 = r0->dropMatrix;
	if( r10 ) goto label$4f418b7_4_38;
	r10 = (h3d__shader__ColorMatrix)hl_alloc_obj(&t$h3d_shader_ColorMatrix);
	r11 = NULL;
	h3d_shader_ColorMatrix_new(r10,r11);
	r0->dropMatrix = r10;
	label$4f418b7_4_38:
	r10 = r0->dropMatrix;
	r12 = h2d_Drawable_addShader(((h2d__Drawable)r0),((hxsl__Shader)r10));
	r10 = (h3d__shader__ColorMatrix)r12;
	r10 = r0->dropMatrix;
	if( r10 == NULL ) hl_null_access();
	r13 = r10->matrix__;
	if( r13 == NULL ) hl_null_access();
	h3d_Matrix_zero(r13);
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r14 = hl_vfields(r3)[1] ? (*(int*)(hl_vfields(r3)[1])) : (int)hl_dyn_geti(r3->value,173830765/*color*/,&t$_i32);
	r15 = 16;
	r14 = r14 >> r15;
	r15 = 255;
	r14 = r14 & r15;
	r6 = (double)r14;
	r7 = 255.;
	r6 = r6 / r7;
	r13->_41 = r6;
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r14 = hl_vfields(r3)[1] ? (*(int*)(hl_vfields(r3)[1])) : (int)hl_dyn_geti(r3->value,173830765/*color*/,&t$_i32);
	r15 = 8;
	r14 = r14 >> r15;
	r15 = 255;
	r14 = r14 & r15;
	r6 = (double)r14;
	r7 = 255.;
	r6 = r6 / r7;
	r13->_42 = r6;
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r14 = hl_vfields(r3)[1] ? (*(int*)(hl_vfields(r3)[1])) : (int)hl_dyn_geti(r3->value,173830765/*color*/,&t$_i32);
	r15 = 255;
	r14 = r14 & r15;
	r6 = (double)r14;
	r7 = 255.;
	r6 = r6 / r7;
	r13->_43 = r6;
	r3 = r0->dropShadow;
	if( r3 == NULL ) hl_null_access();
	r6 = hl_vfields(r3)[0] ? (*(double*)(hl_vfields(r3)[0])) : (double)hl_dyn_getd(r3->value,26650595/*alpha*/);
	r13->_44 = r6;
	r16 = r0->glyphs;
	if( r16 == NULL ) hl_null_access();
	h2d_TileGroup_drawWith(r16,r1,((h2d__Drawable)r0));
	r10 = r0->dropMatrix;
	r17 = h2d_Drawable_removeShader(((h2d__Drawable)r0),((hxsl__Shader)r10));
	r0->absX = r4;
	r0->absY = r5;
	goto label$4f418b7_4_91;
	label$4f418b7_4_89:
	r10 = NULL;
	r0->dropMatrix = r10;
	label$4f418b7_4_91:
	r16 = r0->glyphs;
	if( r16 == NULL ) hl_null_access();
	h2d_TileGroup_drawWith(r16,r1,((h2d__Drawable)r0));
	return;
}

h2d__Tile h2d_HtmlText_loadImage(h2d__HtmlText r0,String r1) {
	h2d__Tile r2;
	h2d__$HtmlText r4;
	vclosure *r3;
	r4 = (h2d__$HtmlText)g$_h2d_HtmlText;
	r3 = r4->defaultLoadImage;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->hasValue ? ((h2d__Tile (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r1) : ((h2d__Tile (*)(String))r3->fun)(r1);
	return r2;
}

h2d__Font h2d_HtmlText_loadFont(h2d__HtmlText r0,String r1) {
	h2d__$HtmlText r4;
	h2d__Font r2, r5;
	vclosure *r3;
	r4 = (h2d__$HtmlText)g$_h2d_HtmlText;
	r3 = r4->defaultLoadFont;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->hasValue ? ((h2d__Font (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r1) : ((h2d__Font (*)(String))r3->fun)(r1);
	if( r2 ) goto label$4f418b7_6_7;
	r5 = r0->font;
	return r5;
	label$4f418b7_6_7:
	return r2;
}

void h2d_HtmlText_onHyperlink(h2d__HtmlText r0,String r1) {
	return;
}

String h2d_HtmlText_formatText(h2d__HtmlText r0,String r1) {
	String r2;
	h2d__$HtmlText r4;
	vclosure *r3;
	r4 = (h2d__$HtmlText)g$_h2d_HtmlText;
	r3 = r4->defaultFormatText;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->hasValue ? ((String (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r1) : ((String (*)(String))r3->fun)(r1);
	return r2;
}

String h2d_HtmlText_set_text(h2d__HtmlText r0,String r1) {
	String r2;
	vclosure *r3;
	r3 = r0->formatText;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->hasValue ? ((String (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r1) : ((String (*)(String))r3->fun)(r1);
	r2 = h2d_Text_set_text(((h2d__Text)r0),r2);
	return r1;
}

Xml h2d_HtmlText_parseText(h2d__HtmlText r0,String r1) {
	String r4, r8;
	Xml r3;
	haxe__Exception r6;
	vdynamic *r2, *r5, *r7;
	hl_trap_ctx trap$0;
	hl_trap(trap$0,r2,label$4f418b7_10_5);
	r3 = Xml_parse(r1);
	hl_endtrap(trap$0);
	return r3;
	hl_endtrap(trap$0);
	label$4f418b7_10_5:
	r5 = NULL;
	r6 = haxe_Exception_caught(r2);
	if( r6 == NULL ) hl_null_access();
	r5 = ((vdynamic* (*)(haxe__Exception))r6->$type->vobj_proto[0])(r6);
	r4 = (String)s$Could_not_parse_;
	r4 = String___add__(r4,r1);
	r8 = (String)s$bbee82c;
	r4 = String___add__(r4,r8);
	r8 = Std_string(r5);
	r4 = String___add__(r4,r8);
	r8 = (String)s$9371d7a;
	r4 = String___add__(r4,r8);
	r7 = haxe_Exception_thrown(((vdynamic*)r4));
	hl_throw((vdynamic*)r7);
}

void h2d_HtmlText_validateText(h2d__HtmlText r0) {
	String r2;
	Xml r1;
	r2 = r0->text;
	r1 = h2d_HtmlText_parseText(r0,r2);
	r0->textXml = r1;
	r1 = r0->textXml;
	h2d_HtmlText_validateNodes(r0,r1);
	return;
}

void h2d_HtmlText_validateNodes(h2d__HtmlText r0,Xml r1) {
	String r8, r9, r17;
	vvirtual *r21;
	hl__types__ArrayObj r19;
	bool r14;
	haxe__iterators__ArrayIterator r18;
	$Xml r6;
	Xml r4;
	h2d__Tile r15;
	h2d__Font r12;
	hl__types__ArrayDyn r20;
	vclosure *r13, *r16;
	vdynamic *r7;
	vbyte *r10, *r11;
	int r3, r5;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->nodeType;
	r5 = 0;
	if( r3 != r5 ) goto label$4f418b7_12_122;
	r3 = r1->nodeType;
	r6 = ($Xml)g$_Xml;
	r5 = r6->Element;
	if( r3 == r5 ) goto label$4f418b7_12_14;
	r8 = (String)s$63ec124;
	r3 = r1->nodeType;
	r9 = _Xml_XmlType_Impl__toString(r3);
	r8 = String___add__(r8,r9);
	r7 = haxe_Exception_thrown(((vdynamic*)r8));
	hl_throw((vdynamic*)r7);
	label$4f418b7_12_14:
	r8 = r1->nodeName;
	if( r8 == NULL ) hl_null_access();
	r8 = String_toLowerCase(r8);
	if( !r8 ) goto label$4f418b7_12_26;
	r3 = r8->length;
	r5 = 1;
	if( r3 != r5 ) goto label$4f418b7_12_26;
	r10 = r8->bytes;
	r11 = (vbyte*)USTR("b");
	r3 = hl_string_compare(r10,r11,r3);
	r5 = 0;
	if( r3 == r5 ) goto label$4f418b7_12_72;
	label$4f418b7_12_26:
	if( !r8 ) goto label$4f418b7_12_35;
	r3 = r8->length;
	r5 = 4;
	if( r3 != r5 ) goto label$4f418b7_12_35;
	r10 = r8->bytes;
	r11 = (vbyte*)USTR("bold");
	r3 = hl_string_compare(r10,r11,r3);
	r5 = 0;
	if( r3 == r5 ) goto label$4f418b7_12_72;
	label$4f418b7_12_35:
	if( !r8 ) goto label$4f418b7_12_44;
	r3 = r8->length;
	r5 = 4;
	if( r3 != r5 ) goto label$4f418b7_12_44;
	r10 = r8->bytes;
	r11 = (vbyte*)USTR("font");
	r3 = hl_string_compare(r10,r11,r3);
	r5 = 0;
	if( r3 == r5 ) goto label$4f418b7_12_77;
	label$4f418b7_12_44:
	if( !r8 ) goto label$4f418b7_12_53;
	r3 = r8->length;
	r5 = 3;
	if( r3 != r5 ) goto label$4f418b7_12_53;
	r10 = r8->bytes;
	r11 = (vbyte*)USTR("img");
	r3 = hl_string_compare(r10,r11,r3);
	r5 = 0;
	if( r3 == r5 ) goto label$4f418b7_12_86;
	label$4f418b7_12_53:
	if( !r8 ) goto label$4f418b7_12_62;
	r3 = r8->length;
	r5 = 1;
	if( r3 != r5 ) goto label$4f418b7_12_62;
	r10 = r8->bytes;
	r11 = (vbyte*)USTR("i");
	r3 = hl_string_compare(r10,r11,r3);
	r5 = 0;
	if( r3 == r5 ) goto label$4f418b7_12_92;
	label$4f418b7_12_62:
	if( !r8 ) goto label$4f418b7_12_71;
	r3 = r8->length;
	r5 = 6;
	if( r3 != r5 ) goto label$4f418b7_12_71;
	r10 = r8->bytes;
	r11 = (vbyte*)USTR("italic");
	r3 = hl_string_compare(r10,r11,r3);
	r5 = 0;
	if( r3 == r5 ) goto label$4f418b7_12_92;
	label$4f418b7_12_71:
	goto label$4f418b7_12_96;
	label$4f418b7_12_72:
	r13 = r0->loadFont;
	if( r13 == NULL ) hl_null_access();
	r9 = (String)s$bold;
	r12 = r13->hasValue ? ((h2d__Font (*)(vdynamic*,String))r13->fun)((vdynamic*)r13->value,r9) : ((h2d__Font (*)(String))r13->fun)(r9);
	goto label$4f418b7_12_96;
	label$4f418b7_12_77:
	r9 = (String)s$face;
	r14 = Xml_exists(r1,r9);
	if( !r14 ) goto label$4f418b7_12_85;
	r13 = r0->loadFont;
	if( r13 == NULL ) hl_null_access();
	r9 = (String)s$face;
	r9 = Xml_get(r1,r9);
	r12 = r13->hasValue ? ((h2d__Font (*)(vdynamic*,String))r13->fun)((vdynamic*)r13->value,r9) : ((h2d__Font (*)(String))r13->fun)(r9);
	label$4f418b7_12_85:
	goto label$4f418b7_12_96;
	label$4f418b7_12_86:
	r16 = r0->loadImage;
	if( r16 == NULL ) hl_null_access();
	r9 = (String)s$src;
	r9 = Xml_get(r1,r9);
	r15 = r16->hasValue ? ((h2d__Tile (*)(vdynamic*,String))r16->fun)((vdynamic*)r16->value,r9) : ((h2d__Tile (*)(String))r16->fun)(r9);
	goto label$4f418b7_12_96;
	label$4f418b7_12_92:
	r13 = r0->loadFont;
	if( r13 == NULL ) hl_null_access();
	r9 = (String)s$italic;
	r12 = r13->hasValue ? ((h2d__Font (*)(vdynamic*,String))r13->fun)((vdynamic*)r13->value,r9) : ((h2d__Font (*)(String))r13->fun)(r9);
	label$4f418b7_12_96:
	r3 = r1->nodeType;
	r6 = ($Xml)g$_Xml;
	r5 = r6->Document;
	if( r3 == r5 ) goto label$4f418b7_12_110;
	r3 = r1->nodeType;
	r6 = ($Xml)g$_Xml;
	r5 = r6->Element;
	if( r3 == r5 ) goto label$4f418b7_12_110;
	r9 = (String)s$925902a;
	r3 = r1->nodeType;
	r17 = _Xml_XmlType_Impl__toString(r3);
	r9 = String___add__(r9,r17);
	r7 = haxe_Exception_thrown(((vdynamic*)r9));
	hl_throw((vdynamic*)r7);
	label$4f418b7_12_110:
	r18 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
	r19 = r1->children;
	r20 = (hl__types__ArrayDyn)hl_dyn_castp(&r19,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayIterator_new(r18,r20);
	r21 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r18);
	label$4f418b7_12_115:
	if( r21 == NULL ) hl_null_access();
	if( hl_vfields(r21)[0] ) r14 = ((bool (*)(vdynamic*))hl_vfields(r21)[0])(r21->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r21->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r14 = (bool)ret.v.i;
	}
	if( !r14 ) goto label$4f418b7_12_122;
	if( hl_vfields(r21)[1] ) r4 = ((Xml (*)(vdynamic*))hl_vfields(r21)[1])(r21->value); else {
		r4 = (Xml)hl_dyn_call_obj(r21->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
	}
	h2d_HtmlText_validateNodes(r0,r1);
	goto label$4f418b7_12_115;
	label$4f418b7_12_122:
	return;
}

void h2d_HtmlText_initGlyphs(h2d__HtmlText r0,String r1,bool* r2) {
	String r20, r27;
	vvirtual *r23, *r25, *r30;
	hl__types__ArrayObj r8, r11;
	venum *r33, *r35;
	hl_type *r16;
	bool r3, r5;
	h2d__Object r12, r15;
	haxe__iterators__ArrayIterator r28;
	$Xml r26;
	Xml r18, r19;
	h2d__Font r24;
	$Math r22;
	hl__types__ArrayDyn r29;
	double r21, r31, r32, r34, r36;
	h2d__TileGroup r6;
	double *r17;
	vdynamic *r13;
	varray *r14;
	int r7, r9, r10;
	if( r2 ) goto label$4f418b7_13_3;
	r3 = true;
	goto label$4f418b7_13_4;
	label$4f418b7_13_3:
	r3 = *r2;
	label$4f418b7_13_4:
	if( !r3 ) goto label$4f418b7_13_35;
	r6 = r0->glyphs;
	if( r6 == NULL ) hl_null_access();
	h2d_TileGroup_clear(r6);
	r7 = 0;
	r8 = r0->elements;
	label$4f418b7_13_10:
	if( r8 == NULL ) hl_null_access();
	r10 = r8->length;
	if( r7 >= r10 ) goto label$4f418b7_13_30;
	r10 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r10) ) goto label$4f418b7_13_18;
	r12 = NULL;
	goto label$4f418b7_13_21;
	label$4f418b7_13_18:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r7];
	r12 = (h2d__Object)r13;
	label$4f418b7_13_21:
	++r7;
	if( !r12 ) goto label$4f418b7_13_29;
	if( r12 == NULL ) hl_null_access();
	r15 = r12->parent;
	if( !r15 ) goto label$4f418b7_13_29;
	r15 = r12->parent;
	if( r15 == NULL ) hl_null_access();
	((void (*)(h2d__Object,h2d__Object))r15->$type->vobj_proto[6])(r15,r12);
	label$4f418b7_13_29:
	goto label$4f418b7_13_10;
	label$4f418b7_13_30:
	r16 = &t$h2d_Object;
	r7 = 0;
	r14 = hl_alloc_array(r16,r7);
	r8 = hl_types_ArrayObj_alloc(r14);
	r0->elements = r8;
	label$4f418b7_13_35:
	r6 = r0->glyphs;
	if( r6 == NULL ) hl_null_access();
	r7 = r0->textColor;
	r17 = NULL;
	h2d_TileGroup_setDefaultColor(r6,r7,r17);
	r18 = r0->textXml;
	if( r18 ) goto label$4f418b7_13_45;
	r19 = h2d_HtmlText_parseText(r0,r1);
	r18 = r19;
	goto label$4f418b7_13_47;
	label$4f418b7_13_45:
	r19 = r0->textXml;
	r18 = r19;
	label$4f418b7_13_47:
	r21 = 0.;
	r0->yPos = r21;
	r21 = 0.;
	r0->xMax = r21;
	r22 = ($Math)g$_Math;
	r21 = r22->POSITIVE_INFINITY;
	r0->xMin = r21;
	r7 = 0;
	r0->sizePos = r7;
	r21 = 0.;
	r0->calcYMin = r21;
	r16 = &t$vrt_9a44900;
	r7 = 1;
	r14 = hl_alloc_array(r16,r7);
	r23 = hl_alloc_virtual(&t$vrt_9a44900);
	r21 = 0.;
	if( hl_vfields(r23)[2] ) *(double*)(hl_vfields(r23)[2]) = (double)r21; else hl_dyn_setd(r23->value,-362629759/*width*/,r21);
	r24 = r0->font;
	if( r24 == NULL ) hl_null_access();
	r21 = r24->lineHeight;
	if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r21; else hl_dyn_setd(r23->value,38537191/*height*/,r21);
	r24 = r0->font;
	if( r24 == NULL ) hl_null_access();
	r21 = r24->baseLine;
	if( hl_vfields(r23)[0] ) *(double*)(hl_vfields(r23)[0]) = (double)r21; else hl_dyn_setd(r23->value,-67041115/*baseLine*/,r21);
	r7 = 0;
	((vvirtual**)(r14 + 1))[r7] = r23;
	r8 = hl_types_ArrayObj_alloc(r14);
	r7 = -1;
	r0->prevChar = r7;
	r5 = true;
	r0->newLine = r5;
	r25 = hl_alloc_virtual(&t$vrt_abef2f5);
	r19 = NULL;
	if( hl_vfields(r25)[3] ) *(Xml*)(hl_vfields(r25)[3]) = (Xml)r19; else hl_dyn_setp(r25->value,151653132/*node*/,&t$Xml,r19);
	r7 = 0;
	if( hl_vfields(r25)[4] ) *(int*)(hl_vfields(r25)[4]) = (int)r7; else hl_dyn_seti(r25->value,5594516/*pos*/,&t$_i32,r7);
	r24 = r0->font;
	if( hl_vfields(r25)[1] ) *(h2d__Font*)(hl_vfields(r25)[1]) = (h2d__Font)r24; else hl_dyn_setp(r25->value,62938841/*font*/,&t$h2d_Font,r24);
	r7 = -1;
	if( hl_vfields(r25)[5] ) *(int*)(hl_vfields(r25)[5]) = (int)r7; else hl_dyn_seti(r25->value,177028969/*prevChar*/,&t$_i32,r7);
	r7 = 0;
	r21 = (double)r7;
	if( hl_vfields(r25)[6] ) *(double*)(hl_vfields(r25)[6]) = (double)r21; else hl_dyn_setd(r25->value,-362629759/*width*/,r21);
	r7 = 0;
	r21 = (double)r7;
	if( hl_vfields(r25)[2] ) *(double*)(hl_vfields(r25)[2]) = (double)r21; else hl_dyn_setd(r25->value,38537191/*height*/,r21);
	r7 = 0;
	r21 = (double)r7;
	if( hl_vfields(r25)[0] ) *(double*)(hl_vfields(r25)[0]) = (double)r21; else hl_dyn_setd(r25->value,-67041115/*baseLine*/,r21);
	if( r18 == NULL ) hl_null_access();
	r7 = r18->nodeType;
	r26 = ($Xml)g$_Xml;
	r9 = r26->Document;
	if( r7 == r9 ) goto label$4f418b7_13_112;
	r7 = r18->nodeType;
	r26 = ($Xml)g$_Xml;
	r9 = r26->Element;
	if( r7 == r9 ) goto label$4f418b7_13_112;
	r20 = (String)s$925902a;
	r7 = r18->nodeType;
	r27 = _Xml_XmlType_Impl__toString(r7);
	r20 = String___add__(r20,r27);
	r13 = haxe_Exception_thrown(((vdynamic*)r20));
	hl_throw((vdynamic*)r13);
	label$4f418b7_13_112:
	r28 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
	r11 = r18->children;
	r29 = (hl__types__ArrayDyn)hl_dyn_castp(&r11,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayIterator_new(r28,r29);
	r30 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r28);
	label$4f418b7_13_117:
	if( r30 == NULL ) hl_null_access();
	if( hl_vfields(r30)[0] ) r5 = ((bool (*)(vdynamic*))hl_vfields(r30)[0])(r30->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r30->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r5 = (bool)ret.v.i;
	}
	if( !r5 ) goto label$4f418b7_13_125;
	if( hl_vfields(r30)[1] ) r19 = ((Xml (*)(vdynamic*))hl_vfields(r30)[1])(r30->value); else {
		r19 = (Xml)hl_dyn_call_obj(r30->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
	}
	r24 = r0->font;
	h2d_HtmlText_buildSizes(r0,r19,r24,r8,r25);
	goto label$4f418b7_13_117;
	label$4f418b7_13_125:
	r21 = 0.;
	r7 = 0;
	label$4f418b7_13_127:
	if( r8 == NULL ) hl_null_access();
	r10 = r8->length;
	if( r7 >= r10 ) goto label$4f418b7_13_145;
	r10 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r10) ) goto label$4f418b7_13_135;
	r23 = NULL;
	goto label$4f418b7_13_138;
	label$4f418b7_13_135:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r7];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_13_138:
	++r7;
	if( r23 == NULL ) hl_null_access();
	r31 = hl_vfields(r23)[2] ? (*(double*)(hl_vfields(r23)[2])) : (double)hl_dyn_getd(r23->value,-362629759/*width*/);
	if( !(r21 < r31) ) goto label$4f418b7_13_144;
	r31 = hl_vfields(r23)[2] ? (*(double*)(hl_vfields(r23)[2])) : (double)hl_dyn_getd(r23->value,-362629759/*width*/);
	r21 = r31;
	label$4f418b7_13_144:
	goto label$4f418b7_13_127;
	label$4f418b7_13_145:
	r0->calcWidth = r21;
	r7 = -1;
	r0->prevChar = r7;
	r5 = true;
	r0->newLine = r5;
	r33 = r0->textAlign;
	r7 = 0;
	r9 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$4f418b7_13_156;
	r23 = NULL;
	goto label$4f418b7_13_159;
	label$4f418b7_13_156:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r7];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_13_159:
	if( r23 == NULL ) hl_null_access();
	r31 = hl_vfields(r23)[2] ? (*(double*)(hl_vfields(r23)[2])) : (double)hl_dyn_getd(r23->value,-362629759/*width*/);
	if( r33 == NULL ) hl_null_access();
	r7 = HL__ENUM_INDEX__(r33);
	switch(r7) {
		default:
			goto label$4f418b7_13_204;
		case 0:
			r32 = 0.;
			r0->xPos = r32;
			r32 = r0->xMin;
			r34 = 0.;
			if( !(r34 < r32) ) goto label$4f418b7_13_172;
			r32 = 0.;
			r0->xMin = r32;
			label$4f418b7_13_172:
			goto label$4f418b7_13_204;
		case 1:
		case 2:
		case 3:
		case 4:
			r35 = (venum*)g$h2d_Align_MultilineCenter;
			if( r33 == r35 ) goto label$4f418b7_13_177;
			r35 = (venum*)g$h2d_Align_MultilineRight;
			if( r33 != r35 ) goto label$4f418b7_13_180;
			label$4f418b7_13_177:
			r32 = r0->calcWidth;
			r7 = hl_math_ceil(r32);
			goto label$4f418b7_13_187;
			label$4f418b7_13_180:
			r32 = r0->calcWidth;
			r34 = 0.;
			if( !(r32 < r34) ) goto label$4f418b7_13_185;
			r7 = 0;
			goto label$4f418b7_13_187;
			label$4f418b7_13_185:
			r32 = r0->realMaxWidth;
			r7 = hl_math_ceil(r32);
			label$4f418b7_13_187:
			r35 = (venum*)g$h2d_Align_Center;
			if( r33 == r35 ) goto label$4f418b7_13_191;
			r35 = (venum*)g$h2d_Align_MultilineCenter;
			if( r33 != r35 ) goto label$4f418b7_13_193;
			label$4f418b7_13_191:
			r32 = 0.5;
			goto label$4f418b7_13_194;
			label$4f418b7_13_193:
			r32 = 1.;
			label$4f418b7_13_194:
			r34 = (double)r7;
			r34 = r34 - r31;
			r34 = r34 * r32;
			r34 = hl_math_ffloor(r34);
			r0->xPos = r34;
			r34 = r0->xPos;
			r36 = r0->xMin;
			if( !(r34 < r36) ) goto label$4f418b7_13_204;
			r34 = r0->xPos;
			r0->xMin = r34;
	}
	label$4f418b7_13_204:
	if( r18 == NULL ) hl_null_access();
	r7 = r18->nodeType;
	r26 = ($Xml)g$_Xml;
	r9 = r26->Document;
	if( r7 == r9 ) goto label$4f418b7_13_219;
	r7 = r18->nodeType;
	r26 = ($Xml)g$_Xml;
	r9 = r26->Element;
	if( r7 == r9 ) goto label$4f418b7_13_219;
	r20 = (String)s$925902a;
	r7 = r18->nodeType;
	r27 = _Xml_XmlType_Impl__toString(r7);
	r20 = String___add__(r20,r27);
	r13 = haxe_Exception_thrown(((vdynamic*)r20));
	hl_throw((vdynamic*)r13);
	label$4f418b7_13_219:
	r28 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
	r11 = r18->children;
	r29 = (hl__types__ArrayDyn)hl_dyn_castp(&r11,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayIterator_new(r28,r29);
	r30 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r28);
	label$4f418b7_13_224:
	if( r30 == NULL ) hl_null_access();
	if( hl_vfields(r30)[0] ) r5 = ((bool (*)(vdynamic*))hl_vfields(r30)[0])(r30->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r30->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r5 = (bool)ret.v.i;
	}
	if( !r5 ) goto label$4f418b7_13_233;
	if( hl_vfields(r30)[1] ) r19 = ((Xml (*)(vdynamic*))hl_vfields(r30)[1])(r30->value); else {
		r19 = (Xml)hl_dyn_call_obj(r30->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
	}
	r24 = r0->font;
	r33 = r0->textAlign;
	h2d_HtmlText_addNode(r0,r19,r24,r33,r3,r8);
	goto label$4f418b7_13_224;
	label$4f418b7_13_233:
	r31 = r0->xPos;
	r32 = r0->xMax;
	if( !(r32 < r31) ) goto label$4f418b7_13_238;
	r31 = r0->xPos;
	r0->xMax = r31;
	label$4f418b7_13_238:
	r19 = NULL;
	r0->textXml = r19;
	r31 = r0->yPos;
	r32 = r0->xMin;
	r0->calcXMin = r32;
	r32 = r0->xMax;
	r34 = r0->xMin;
	r32 = r32 - r34;
	r0->calcWidth = r32;
	if( r8 == NULL ) hl_null_access();
	r7 = r0->sizePos;
	r9 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$4f418b7_13_253;
	r23 = NULL;
	goto label$4f418b7_13_256;
	label$4f418b7_13_253:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r7];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_13_256:
	if( r23 == NULL ) hl_null_access();
	r34 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	r32 = r31 + r34;
	r0->calcHeight = r32;
	r7 = r0->sizePos;
	r9 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$4f418b7_13_265;
	r23 = NULL;
	goto label$4f418b7_13_268;
	label$4f418b7_13_265:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r7];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_13_268:
	if( r23 == NULL ) hl_null_access();
	r34 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	r32 = r31 + r34;
	r0->calcSizeHeight = r32;
	r5 = true;
	r0->calcDone = r5;
	if( !r3 ) goto label$4f418b7_13_277;
	r5 = false;
	r0->needsRebuild = r5;
	label$4f418b7_13_277:
	return;
}

double h2d_HtmlText_buildSizes__$1(venum* r0) {
	String r9, r10, r28, r29;
	hxd__Charset r22;
	hl__types__ArrayObj r11, r12;
	vvirtual *r2, *r13;
	bool r24;
	haxe__ds__IntMap r19;
	$Xml r7;
	Xml r3, r5;
	h2d__HtmlText r27;
	h2d__Font r1;
	h2d__FontChar r20, r21;
	double r15, r17, r25, r26;
	vdynamic *r8, *r16, *r18;
	varray *r14;
	int r4, r6, r23, r30;
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r1 = hl_vfields(r2)[1] ? (*(h2d__Font*)(hl_vfields(r2)[1])) : (h2d__Font)hl_dyn_getp(r2->value,62938841/*font*/,&t$h2d_Font);
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r3 = hl_vfields(r2)[3] ? (*(Xml*)(hl_vfields(r2)[3])) : (Xml)hl_dyn_getp(r2->value,151653132/*node*/,&t$Xml);
	if( r3 == NULL ) hl_null_access();
	r4 = r3->nodeType;
	r7 = ($Xml)g$_Xml;
	r6 = r7->Document;
	if( r4 == r6 ) goto label$4f418b7_14_15;
	r4 = r3->nodeType;
	r7 = ($Xml)g$_Xml;
	r6 = r7->Element;
	if( r4 != r6 ) goto label$4f418b7_14_21;
	label$4f418b7_14_15:
	r9 = (String)s$Bad_node_type_unexpected_;
	r4 = r3->nodeType;
	r10 = _Xml_XmlType_Impl__toString(r4);
	r9 = String___add__(r9,r10);
	r8 = haxe_Exception_thrown(((vdynamic*)r9));
	hl_throw((vdynamic*)r8);
	label$4f418b7_14_21:
	r9 = r3->nodeValue;
	r11 = ((Enumt$ctx_42364b3*)r0)->p0;
	if( r11 == NULL ) hl_null_access();
	r12 = ((Enumt$ctx_42364b3*)r0)->p0;
	if( r12 == NULL ) hl_null_access();
	r4 = r12->length;
	r6 = 1;
	r4 = r4 - r6;
	r6 = r11->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$4f418b7_14_33;
	r13 = NULL;
	goto label$4f418b7_14_36;
	label$4f418b7_14_33:
	r14 = r11->array;
	r8 = ((vdynamic**)(r14 + 1))[r4];
	r13 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r8);
	label$4f418b7_14_36:
	if( r13 == NULL ) hl_null_access();
	r15 = hl_vfields(r13)[2] ? (*(double*)(hl_vfields(r13)[2])) : (double)hl_dyn_getd(r13->value,-362629759/*width*/);
	if( r9 == NULL ) hl_null_access();
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r4 = hl_vfields(r2)[4] ? (*(int*)(hl_vfields(r2)[4])) : (int)hl_dyn_geti(r2->value,5594516/*pos*/,&t$_i32);
	r16 = String_charCodeAt(r9,r4);
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r17 = hl_vfields(r2)[6] ? (*(double*)(hl_vfields(r2)[6])) : (double)hl_dyn_getd(r2->value,-362629759/*width*/);
	if( hl_vfields(r13)[2] ) *(double*)(hl_vfields(r13)[2]) = (double)r17; else hl_dyn_setd(r13->value,-362629759/*width*/,r17);
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r17 = hl_vfields(r2)[2] ? (*(double*)(hl_vfields(r2)[2])) : (double)hl_dyn_getd(r2->value,38537191/*height*/);
	if( hl_vfields(r13)[1] ) *(double*)(hl_vfields(r13)[1]) = (double)r17; else hl_dyn_setd(r13->value,38537191/*height*/,r17);
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r17 = hl_vfields(r2)[0] ? (*(double*)(hl_vfields(r2)[0])) : (double)hl_dyn_getd(r2->value,-67041115/*baseLine*/);
	if( hl_vfields(r13)[0] ) *(double*)(hl_vfields(r13)[0]) = (double)r17; else hl_dyn_setd(r13->value,-67041115/*baseLine*/,r17);
	r4 = r16 ? r16->v.i : 0;
	if( r1 == NULL ) hl_null_access();
	r19 = r1->glyphs;
	if( r19 == NULL ) hl_null_access();
	r8 = haxe_ds_IntMap_get(r19,r4);
	r20 = (h2d__FontChar)r8;
	if( r20 ) goto label$4f418b7_14_77;
	r22 = r1->charset;
	if( r22 == NULL ) hl_null_access();
	r19 = r1->glyphs;
	r8 = hxd_Charset_resolveChar(r22,r4,r19);
	r21 = (h2d__FontChar)r8;
	r20 = r21;
	if( r21 ) goto label$4f418b7_14_77;
	r23 = 13;
	if( r4 == r23 ) goto label$4f418b7_14_73;
	r23 = 10;
	if( r4 != r23 ) goto label$4f418b7_14_75;
	label$4f418b7_14_73:
	r21 = r1->nullChar;
	goto label$4f418b7_14_76;
	label$4f418b7_14_75:
	r21 = r1->defaultChar;
	label$4f418b7_14_76:
	r20 = r21;
	label$4f418b7_14_77:
	r22 = r1->charset;
	if( r22 == NULL ) hl_null_access();
	r6 = r16 ? r16->v.i : 0;
	r24 = hxd_Charset_isSpace(r22,r6);
	if( !r24 ) goto label$4f418b7_14_134;
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r25 = hl_vfields(r2)[6] ? (*(double*)(hl_vfields(r2)[6])) : (double)hl_dyn_getd(r2->value,-362629759/*width*/);
	r27 = ((Enumt$ctx_42364b3*)r0)->p2;
	if( r27 == NULL ) hl_null_access();
	r26 = r27->letterSpacing;
	r25 = r25 + r26;
	if( r20 == NULL ) hl_null_access();
	r26 = r20->width;
	r25 = r25 + r26;
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r6 = hl_vfields(r2)[5] ? (*(int*)(hl_vfields(r2)[5])) : (int)hl_dyn_geti(r2->value,177028969/*prevChar*/,&t$_i32);
	r26 = h2d_FontChar_getKerningOffset(r20,r6);
	r25 = r25 + r26;
	r17 = r15 - r25;
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r5 = hl_vfields(r2)[3] ? (*(Xml*)(hl_vfields(r2)[3])) : (Xml)hl_dyn_getp(r2->value,151653132/*node*/,&t$Xml);
	r6 = 0;
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r23 = hl_vfields(r2)[4] ? (*(int*)(hl_vfields(r2)[4])) : (int)hl_dyn_geti(r2->value,5594516/*pos*/,&t$_i32);
	r18 = hl_alloc_dynamic(&t$_i32);
	r18->v.i = r23;
	r10 = String_substr(r9,r6,r18);
	r28 = (String)s$68b329d;
	r10 = String___add__(r10,r28);
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r6 = hl_vfields(r2)[4] ? (*(int*)(hl_vfields(r2)[4])) : (int)hl_dyn_geti(r2->value,5594516/*pos*/,&t$_i32);
	r23 = 1;
	r6 = r6 + r23;
	r18 = NULL;
	r28 = String_substr(r9,r6,r18);
	r10 = String___add__(r10,r28);
	if( r5 == NULL ) hl_null_access();
	r6 = r5->nodeType;
	r7 = ($Xml)g$_Xml;
	r23 = r7->Document;
	if( r6 == r23 ) goto label$4f418b7_14_126;
	r6 = r5->nodeType;
	r7 = ($Xml)g$_Xml;
	r23 = r7->Element;
	if( r6 != r23 ) goto label$4f418b7_14_132;
	label$4f418b7_14_126:
	r28 = (String)s$Bad_node_type_unexpected_;
	r6 = r5->nodeType;
	r29 = _Xml_XmlType_Impl__toString(r6);
	r28 = String___add__(r28,r29);
	r8 = haxe_Exception_thrown(((vdynamic*)r28));
	hl_throw((vdynamic*)r8);
	label$4f418b7_14_132:
	r5->nodeValue = r10;
	goto label$4f418b7_14_185;
	label$4f418b7_14_134:
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r25 = hl_vfields(r2)[6] ? (*(double*)(hl_vfields(r2)[6])) : (double)hl_dyn_getd(r2->value,-362629759/*width*/);
	r27 = ((Enumt$ctx_42364b3*)r0)->p2;
	if( r27 == NULL ) hl_null_access();
	r26 = r27->letterSpacing;
	r25 = r25 + r26;
	if( r20 == NULL ) hl_null_access();
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r6 = hl_vfields(r2)[5] ? (*(int*)(hl_vfields(r2)[5])) : (int)hl_dyn_geti(r2->value,177028969/*prevChar*/,&t$_i32);
	r26 = h2d_FontChar_getKerningOffset(r20,r6);
	r25 = r25 + r26;
	r17 = r15 - r25;
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r5 = hl_vfields(r2)[3] ? (*(Xml*)(hl_vfields(r2)[3])) : (Xml)hl_dyn_getp(r2->value,151653132/*node*/,&t$Xml);
	r6 = 0;
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r23 = hl_vfields(r2)[4] ? (*(int*)(hl_vfields(r2)[4])) : (int)hl_dyn_geti(r2->value,5594516/*pos*/,&t$_i32);
	r30 = 1;
	r23 = r23 + r30;
	r18 = hl_alloc_dynamic(&t$_i32);
	r18->v.i = r23;
	r10 = String_substr(r9,r6,r18);
	r28 = (String)s$68b329d;
	r10 = String___add__(r10,r28);
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r6 = hl_vfields(r2)[4] ? (*(int*)(hl_vfields(r2)[4])) : (int)hl_dyn_geti(r2->value,5594516/*pos*/,&t$_i32);
	r23 = 1;
	r6 = r6 + r23;
	r18 = NULL;
	r28 = String_substr(r9,r6,r18);
	r10 = String___add__(r10,r28);
	if( r5 == NULL ) hl_null_access();
	r6 = r5->nodeType;
	r7 = ($Xml)g$_Xml;
	r23 = r7->Document;
	if( r6 == r23 ) goto label$4f418b7_14_178;
	r6 = r5->nodeType;
	r7 = ($Xml)g$_Xml;
	r23 = r7->Element;
	if( r6 != r23 ) goto label$4f418b7_14_184;
	label$4f418b7_14_178:
	r28 = (String)s$Bad_node_type_unexpected_;
	r6 = r5->nodeType;
	r29 = _Xml_XmlType_Impl__toString(r6);
	r28 = String___add__(r28,r29);
	r8 = haxe_Exception_thrown(((vdynamic*)r28));
	hl_throw((vdynamic*)r8);
	label$4f418b7_14_184:
	r5->nodeValue = r10;
	label$4f418b7_14_185:
	r2 = ((Enumt$ctx_42364b3*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r5 = NULL;
	if( hl_vfields(r2)[3] ) *(Xml*)(hl_vfields(r2)[3]) = (Xml)r5; else hl_dyn_setp(r2->value,151653132/*node*/,&t$Xml,r5);
	return r17;
}

void h2d_HtmlText_buildSizes(h2d__HtmlText r0,Xml r1,h2d__Font r2,hl__types__ArrayObj r3,vvirtual* r4) {
	String r14, r15, r27, r28, r29;
	hxd__Charset r58;
	vvirtual *r23, *r26, *r39, *r47;
	hl__types__ArrayObj r22;
	hl_type *r49;
	venum *r8, *r20, *r21, *r44;
	bool r25, r62;
	haxe__ds__IntMap r54;
	haxe__iterators__ArrayIterator r45;
	$Xml r12;
	Xml r10;
	h2d__Tile r30, r32;
	h2d__HtmlText r5;
	$Math r48;
	h2d__Font r18;
	h2d__FontChar r56, r57, r61, r68;
	hl__types__ArrayDyn r46;
	double r24, r37, r38, r40, r41, r42, r43, r70;
	vclosure *r7, *r19, *r31;
	vdynamic *r13, *r33, *r34, *r35, *r60, *r66, *r67;
	varray *r36;
	vbyte *r16, *r17;
	int r9, r11, r50, r51, r52, r53, r55, r59, r63, r64, r65, r69;
	r5 = r0;
	r8 = hl_alloc_enum(&t$ctx_42364b3,0);
	((Enumt$ctx_42364b3*)r8)->p0 = (hl__types__ArrayObj)r3;
	((Enumt$ctx_42364b3*)r8)->p1 = (vvirtual*)r4;
	((Enumt$ctx_42364b3*)r8)->p2 = (h2d__HtmlText)r0;
	r7 = hl_alloc_closure_ptr(&t$fun_b198ffc,h2d_HtmlText_buildSizes__$1,r8);
	if( r1 == NULL ) hl_null_access();
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Element;
	if( r9 != r11 ) goto label$4f418b7_15_402;
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Element;
	if( r9 == r11 ) goto label$4f418b7_15_21;
	r14 = (String)s$63ec124;
	r9 = r1->nodeType;
	r15 = _Xml_XmlType_Impl__toString(r9);
	r14 = String___add__(r14,r15);
	r13 = haxe_Exception_thrown(((vdynamic*)r14));
	hl_throw((vdynamic*)r13);
	label$4f418b7_15_21:
	r14 = r1->nodeName;
	if( r14 == NULL ) hl_null_access();
	r14 = String_toLowerCase(r14);
	if( !r14 ) goto label$4f418b7_15_33;
	r9 = r14->length;
	r11 = 1;
	if( r9 != r11 ) goto label$4f418b7_15_33;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("b");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_97;
	label$4f418b7_15_33:
	if( !r14 ) goto label$4f418b7_15_42;
	r9 = r14->length;
	r11 = 4;
	if( r9 != r11 ) goto label$4f418b7_15_42;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("bold");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_97;
	label$4f418b7_15_42:
	if( !r14 ) goto label$4f418b7_15_51;
	r9 = r14->length;
	r11 = 2;
	if( r9 != r11 ) goto label$4f418b7_15_51;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("br");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_103;
	label$4f418b7_15_51:
	if( !r14 ) goto label$4f418b7_15_60;
	r9 = r14->length;
	r11 = 4;
	if( r9 != r11 ) goto label$4f418b7_15_60;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("font");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_128;
	label$4f418b7_15_60:
	if( !r14 ) goto label$4f418b7_15_69;
	r9 = r14->length;
	r11 = 3;
	if( r9 != r11 ) goto label$4f418b7_15_69;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("img");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_146;
	label$4f418b7_15_69:
	if( !r14 ) goto label$4f418b7_15_78;
	r9 = r14->length;
	r11 = 1;
	if( r9 != r11 ) goto label$4f418b7_15_78;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("i");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_314;
	label$4f418b7_15_78:
	if( !r14 ) goto label$4f418b7_15_87;
	r9 = r14->length;
	r11 = 6;
	if( r9 != r11 ) goto label$4f418b7_15_87;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("italic");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_314;
	label$4f418b7_15_87:
	if( !r14 ) goto label$4f418b7_15_96;
	r9 = r14->length;
	r11 = 1;
	if( r9 != r11 ) goto label$4f418b7_15_96;
	r16 = r14->bytes;
	r17 = (vbyte*)USTR("p");
	r9 = hl_string_compare(r16,r17,r9);
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_320;
	label$4f418b7_15_96:
	goto label$4f418b7_15_346;
	label$4f418b7_15_97:
	r19 = r0->loadFont;
	if( r19 == NULL ) hl_null_access();
	r15 = (String)s$bold;
	r18 = r19->hasValue ? ((h2d__Font (*)(vdynamic*,String))r19->fun)((vdynamic*)r19->value,r15) : ((h2d__Font (*)(String))r19->fun)(r15);
	r2 = r18;
	goto label$4f418b7_15_346;
	label$4f418b7_15_103:
	if( r0 == NULL ) hl_null_access();
	r20 = r0->lineHeightMode;
	r21 = (venum*)g$h2d_LineHeightMode_Constant;
	if( r20 != r21 ) goto label$4f418b7_15_109;
	r18 = r0->font;
	goto label$4f418b7_15_110;
	label$4f418b7_15_109:
	r18 = r2;
	label$4f418b7_15_110:
	if( r3 == NULL ) hl_null_access();
	r23 = hl_alloc_virtual(&t$vrt_9a44900);
	r24 = 0.;
	if( hl_vfields(r23)[2] ) *(double*)(hl_vfields(r23)[2]) = (double)r24; else hl_dyn_setd(r23->value,-362629759/*width*/,r24);
	if( r18 == NULL ) hl_null_access();
	r24 = r18->lineHeight;
	if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r24; else hl_dyn_setd(r23->value,38537191/*height*/,r24);
	r24 = r18->baseLine;
	if( hl_vfields(r23)[0] ) *(double*)(hl_vfields(r23)[0]) = (double)r24; else hl_dyn_setd(r23->value,-67041115/*baseLine*/,r24);
	r9 = hl_types_ArrayObj_push(r3,((vdynamic*)r23));
	if( r4 == NULL ) hl_null_access();
	r10 = NULL;
	if( hl_vfields(r4)[3] ) *(Xml*)(hl_vfields(r4)[3]) = (Xml)r10; else hl_dyn_setp(r4->value,151653132/*node*/,&t$Xml,r10);
	r25 = true;
	r0->newLine = r25;
	r9 = -1;
	r0->prevChar = r9;
	goto label$4f418b7_15_346;
	label$4f418b7_15_128:
	r26 = Xml_attributes(r1);
	label$4f418b7_15_129:
	if( r26 == NULL ) hl_null_access();
	if( hl_vfields(r26)[0] ) r25 = ((bool (*)(vdynamic*))hl_vfields(r26)[0])(r26->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r26->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r25 = (bool)ret.v.i;
	}
	if( !r25 ) goto label$4f418b7_15_145;
	if( hl_vfields(r26)[1] ) r15 = ((String (*)(vdynamic*))hl_vfields(r26)[1])(r26->value); else {
		r15 = (String)hl_dyn_call_obj(r26->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
	}
	if( r1 == NULL ) hl_null_access();
	r27 = Xml_get(r1,r15);
	if( r15 == NULL ) hl_null_access();
	r28 = String_toLowerCase(r15);
	r29 = (String)s$face;
	if( r28 != r29 && (!r28 || !r29 || String___compare(r28,(vdynamic*)r29) != 0) ) goto label$4f418b7_15_144;
	r19 = r0->loadFont;
	if( r19 == NULL ) hl_null_access();
	r18 = r19->hasValue ? ((h2d__Font (*)(vdynamic*,String))r19->fun)((vdynamic*)r19->value,r27) : ((h2d__Font (*)(String))r19->fun)(r27);
	r2 = r18;
	label$4f418b7_15_144:
	goto label$4f418b7_15_129;
	label$4f418b7_15_145:
	goto label$4f418b7_15_346;
	label$4f418b7_15_146:
	r31 = r0->loadImage;
	if( r31 == NULL ) hl_null_access();
	r15 = (String)s$src;
	r15 = Xml_get(r1,r15);
	r30 = r31->hasValue ? ((h2d__Tile (*)(vdynamic*,String))r31->fun)((vdynamic*)r31->value,r15) : ((h2d__Tile (*)(String))r31->fun)(r15);
	if( r30 ) goto label$4f418b7_15_160;
	r9 = 16711935;
	r11 = 8;
	r33 = hl_alloc_dynamic(&t$_i32);
	r33->v.i = r11;
	r11 = 8;
	r34 = hl_alloc_dynamic(&t$_i32);
	r34->v.i = r11;
	r35 = NULL;
	r32 = h2d_Tile_fromColor(r9,r33,r34,r35);
	r30 = r32;
	label$4f418b7_15_160:
	if( r3 == NULL ) hl_null_access();
	r9 = r3->length;
	r11 = 1;
	r9 = r9 - r11;
	r11 = r3->length;
	if( ((unsigned)r9) < ((unsigned)r11) ) goto label$4f418b7_15_168;
	r23 = NULL;
	goto label$4f418b7_15_171;
	label$4f418b7_15_168:
	r36 = r3->array;
	r13 = ((vdynamic**)(r36 + 1))[r9];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_15_171:
	if( r23 == NULL ) hl_null_access();
	r24 = hl_vfields(r23)[2] ? (*(double*)(hl_vfields(r23)[2])) : (double)hl_dyn_getd(r23->value,-362629759/*width*/);
	if( r30 == NULL ) hl_null_access();
	r37 = r30->width;
	r24 = r24 + r37;
	r37 = r0->imageSpacing;
	r24 = r24 + r37;
	r37 = r0->realMaxWidth;
	r38 = 0.;
	if( !(r37 >= r38) ) goto label$4f418b7_15_254;
	r38 = r0->realMaxWidth;
	if( !(r38 < r24) ) goto label$4f418b7_15_254;
	r9 = r3->length;
	r11 = 1;
	r9 = r9 - r11;
	r11 = r3->length;
	if( ((unsigned)r9) < ((unsigned)r11) ) goto label$4f418b7_15_190;
	r23 = NULL;
	goto label$4f418b7_15_193;
	label$4f418b7_15_190:
	r36 = r3->array;
	r13 = ((vdynamic**)(r36 + 1))[r9];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_15_193:
	if( r23 == NULL ) hl_null_access();
	r37 = hl_vfields(r23)[2] ? (*(double*)(hl_vfields(r23)[2])) : (double)hl_dyn_getd(r23->value,-362629759/*width*/);
	r38 = 0.;
	if( !(r38 < r37) ) goto label$4f418b7_15_254;
	if( r4 == NULL ) hl_null_access();
	r10 = hl_vfields(r4)[3] ? (*(Xml*)(hl_vfields(r4)[3])) : (Xml)hl_dyn_getp(r4->value,151653132/*node*/,&t$Xml);
	if( !r10 ) goto label$4f418b7_15_253;
	if( r7 == NULL ) hl_null_access();
	r37 = r7->hasValue ? ((double (*)(vdynamic*))r7->fun)((vdynamic*)r7->value) : ((double (*)(void))r7->fun)();
	r38 = r30->width;
	r37 = r37 + r38;
	r38 = r0->imageSpacing;
	r37 = r37 + r38;
	r24 = r37;
	r9 = r3->length;
	r11 = 1;
	r9 = r9 - r11;
	r11 = r3->length;
	if( ((unsigned)r9) < ((unsigned)r11) ) goto label$4f418b7_15_214;
	r23 = NULL;
	goto label$4f418b7_15_217;
	label$4f418b7_15_214:
	r36 = r3->array;
	r13 = ((vdynamic**)(r36 + 1))[r9];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_15_217:
	r20 = r0->lineHeightMode;
	if( r20 == NULL ) hl_null_access();
	r9 = HL__ENUM_INDEX__(r20);
	r11 = 0;
	if( r9 != r11 ) goto label$4f418b7_15_245;
	r37 = r30->height;
	r38 = r30->dy;
	r37 = r37 - r38;
	if( r23 == NULL ) hl_null_access();
	r38 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	r37 = r37 - r38;
	r38 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	r40 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	r42 = 0.;
	if( !(r42 < r37) ) goto label$4f418b7_15_236;
	r41 = r38 + r37;
	r38 = r41;
	r41 = r40 + r37;
	r40 = r41;
	label$4f418b7_15_236:
	r39 = hl_alloc_virtual(&t$vrt_9a44900);
	if( hl_vfields(r39)[2] ) *(double*)(hl_vfields(r39)[2]) = (double)r24; else hl_dyn_setd(r39->value,-362629759/*width*/,r24);
	r43 = r30->dy;
	r42 = r40 + r43;
	r41 = Math_max(r38,r42);
	if( hl_vfields(r39)[1] ) *(double*)(hl_vfields(r39)[1]) = (double)r41; else hl_dyn_setd(r39->value,38537191/*height*/,r41);
	if( hl_vfields(r39)[0] ) *(double*)(hl_vfields(r39)[0]) = (double)r40; else hl_dyn_setd(r39->value,-67041115/*baseLine*/,r40);
	r9 = hl_types_ArrayObj_push(r3,((vdynamic*)r39));
	goto label$4f418b7_15_253;
	label$4f418b7_15_245:
	r39 = hl_alloc_virtual(&t$vrt_9a44900);
	if( hl_vfields(r39)[2] ) *(double*)(hl_vfields(r39)[2]) = (double)r37; else hl_dyn_setd(r39->value,-362629759/*width*/,r37);
	if( r23 == NULL ) hl_null_access();
	r37 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	if( hl_vfields(r39)[1] ) *(double*)(hl_vfields(r39)[1]) = (double)r37; else hl_dyn_setd(r39->value,38537191/*height*/,r37);
	r37 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	if( hl_vfields(r39)[0] ) *(double*)(hl_vfields(r39)[0]) = (double)r37; else hl_dyn_setd(r39->value,-67041115/*baseLine*/,r37);
	r9 = hl_types_ArrayObj_push(r3,((vdynamic*)r39));
	label$4f418b7_15_253:
	goto label$4f418b7_15_309;
	label$4f418b7_15_254:
	r9 = r3->length;
	r11 = 1;
	r9 = r9 - r11;
	r11 = r3->length;
	if( ((unsigned)r9) < ((unsigned)r11) ) goto label$4f418b7_15_261;
	r23 = NULL;
	goto label$4f418b7_15_264;
	label$4f418b7_15_261:
	r36 = r3->array;
	r13 = ((vdynamic**)(r36 + 1))[r9];
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	label$4f418b7_15_264:
	if( r23 == NULL ) hl_null_access();
	if( hl_vfields(r23)[2] ) *(double*)(hl_vfields(r23)[2]) = (double)r24; else hl_dyn_setd(r23->value,-362629759/*width*/,r24);
	r20 = r0->lineHeightMode;
	r21 = (venum*)g$h2d_LineHeightMode_Accurate;
	if( r20 != r21 ) goto label$4f418b7_15_309;
	r37 = r30->height;
	r38 = r30->dy;
	r37 = r37 - r38;
	r38 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	r37 = r37 - r38;
	r40 = 0.;
	if( !(r40 < r37) ) goto label$4f418b7_15_302;
	r44 = r0->imageVerticalAlign;
	if( r44 == NULL ) hl_null_access();
	r9 = HL__ENUM_INDEX__(r44);
	switch(r9) {
		default:
			goto label$4f418b7_15_302;
		case 0:
			r38 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
			r38 = r38 + r37;
			if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r38; else hl_dyn_setd(r23->value,38537191/*height*/,r38);
			goto label$4f418b7_15_302;
		case 1:
			r38 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
			r38 = r38 + r37;
			if( hl_vfields(r23)[0] ) *(double*)(hl_vfields(r23)[0]) = (double)r38; else hl_dyn_setd(r23->value,-67041115/*baseLine*/,r38);
			r38 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
			r38 = r38 + r37;
			if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r38; else hl_dyn_setd(r23->value,38537191/*height*/,r38);
			goto label$4f418b7_15_302;
		case 2:
			r38 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
			r38 = r38 + r37;
			if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r38; else hl_dyn_setd(r23->value,38537191/*height*/,r38);
			r38 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
			r41 = 2.;
			r40 = r37 / r41;
			r9 = (int)r40;
			r40 = (double)r9;
			r38 = r38 + r40;
			if( hl_vfields(r23)[0] ) *(double*)(hl_vfields(r23)[0]) = (double)r38; else hl_dyn_setd(r23->value,-67041115/*baseLine*/,r38);
	}
	label$4f418b7_15_302:
	r38 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	r40 = r30->dy;
	r38 = r38 + r40;
	r37 = r38;
	r38 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	if( !(r38 < r37) ) goto label$4f418b7_15_309;
	if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r37; else hl_dyn_setd(r23->value,38537191/*height*/,r37);
	label$4f418b7_15_309:
	r25 = false;
	r0->newLine = r25;
	r9 = -1;
	r0->prevChar = r9;
	goto label$4f418b7_15_346;
	label$4f418b7_15_314:
	r19 = r0->loadFont;
	if( r19 == NULL ) hl_null_access();
	r15 = (String)s$italic;
	r18 = r19->hasValue ? ((h2d__Font (*)(vdynamic*,String))r19->fun)((vdynamic*)r19->value,r15) : ((h2d__Font (*)(String))r19->fun)(r15);
	r2 = r18;
	goto label$4f418b7_15_346;
	label$4f418b7_15_320:
	r25 = r0->newLine;
	if( r25 ) goto label$4f418b7_15_346;
	if( r0 == NULL ) hl_null_access();
	r20 = r0->lineHeightMode;
	r21 = (venum*)g$h2d_LineHeightMode_Constant;
	if( r20 != r21 ) goto label$4f418b7_15_328;
	r18 = r0->font;
	goto label$4f418b7_15_329;
	label$4f418b7_15_328:
	r18 = r2;
	label$4f418b7_15_329:
	if( r3 == NULL ) hl_null_access();
	r23 = hl_alloc_virtual(&t$vrt_9a44900);
	r24 = 0.;
	if( hl_vfields(r23)[2] ) *(double*)(hl_vfields(r23)[2]) = (double)r24; else hl_dyn_setd(r23->value,-362629759/*width*/,r24);
	if( r18 == NULL ) hl_null_access();
	r24 = r18->lineHeight;
	if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r24; else hl_dyn_setd(r23->value,38537191/*height*/,r24);
	r24 = r18->baseLine;
	if( hl_vfields(r23)[0] ) *(double*)(hl_vfields(r23)[0]) = (double)r24; else hl_dyn_setd(r23->value,-67041115/*baseLine*/,r24);
	r9 = hl_types_ArrayObj_push(r3,((vdynamic*)r23));
	if( r4 == NULL ) hl_null_access();
	r10 = NULL;
	if( hl_vfields(r4)[3] ) *(Xml*)(hl_vfields(r4)[3]) = (Xml)r10; else hl_dyn_setp(r4->value,151653132/*node*/,&t$Xml,r10);
	r25 = true;
	r0->newLine = r25;
	r9 = -1;
	r0->prevChar = r9;
	label$4f418b7_15_346:
	if( r1 == NULL ) hl_null_access();
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Document;
	if( r9 == r11 ) goto label$4f418b7_15_361;
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Element;
	if( r9 == r11 ) goto label$4f418b7_15_361;
	r15 = (String)s$925902a;
	r9 = r1->nodeType;
	r27 = _Xml_XmlType_Impl__toString(r9);
	r15 = String___add__(r15,r27);
	r13 = haxe_Exception_thrown(((vdynamic*)r15));
	hl_throw((vdynamic*)r13);
	label$4f418b7_15_361:
	r45 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
	r22 = r1->children;
	r46 = (hl__types__ArrayDyn)hl_dyn_castp(&r22,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayIterator_new(r45,r46);
	r47 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r45);
	label$4f418b7_15_366:
	if( r47 == NULL ) hl_null_access();
	if( hl_vfields(r47)[0] ) r25 = ((bool (*)(vdynamic*))hl_vfields(r47)[0])(r47->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r47->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r25 = (bool)ret.v.i;
	}
	if( !r25 ) goto label$4f418b7_15_373;
	if( hl_vfields(r47)[1] ) r10 = ((Xml (*)(vdynamic*))hl_vfields(r47)[1])(r47->value); else {
		r10 = (Xml)hl_dyn_call_obj(r47->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
	}
	h2d_HtmlText_buildSizes(r0,r10,r2,r3,r4);
	goto label$4f418b7_15_366;
	label$4f418b7_15_373:
	r27 = (String)s$p;
	if( r14 != r27 && (!r14 || !r27 || String___compare(r14,(vdynamic*)r27) != 0) ) goto label$4f418b7_15_401;
	r25 = r0->newLine;
	if( r25 ) goto label$4f418b7_15_401;
	if( r5 == NULL ) hl_null_access();
	r20 = r5->lineHeightMode;
	r21 = (venum*)g$h2d_LineHeightMode_Constant;
	if( r20 != r21 ) goto label$4f418b7_15_383;
	r18 = r5->font;
	goto label$4f418b7_15_384;
	label$4f418b7_15_383:
	r18 = r2;
	label$4f418b7_15_384:
	if( r3 == NULL ) hl_null_access();
	r23 = hl_alloc_virtual(&t$vrt_9a44900);
	r24 = 0.;
	if( hl_vfields(r23)[2] ) *(double*)(hl_vfields(r23)[2]) = (double)r24; else hl_dyn_setd(r23->value,-362629759/*width*/,r24);
	if( r18 == NULL ) hl_null_access();
	r24 = r18->lineHeight;
	if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r24; else hl_dyn_setd(r23->value,38537191/*height*/,r24);
	r24 = r18->baseLine;
	if( hl_vfields(r23)[0] ) *(double*)(hl_vfields(r23)[0]) = (double)r24; else hl_dyn_setd(r23->value,-67041115/*baseLine*/,r24);
	r9 = hl_types_ArrayObj_push(r3,((vdynamic*)r23));
	if( r4 == NULL ) hl_null_access();
	r10 = NULL;
	if( hl_vfields(r4)[3] ) *(Xml*)(hl_vfields(r4)[3]) = (Xml)r10; else hl_dyn_setp(r4->value,151653132/*node*/,&t$Xml,r10);
	r25 = true;
	r5->newLine = r25;
	r9 = -1;
	r5->prevChar = r9;
	label$4f418b7_15_401:
	goto label$4f418b7_15_770;
	label$4f418b7_15_402:
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Document;
	if( r9 == r11 ) goto label$4f418b7_15_410;
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Element;
	if( r9 != r11 ) goto label$4f418b7_15_416;
	label$4f418b7_15_410:
	r14 = (String)s$Bad_node_type_unexpected_;
	r9 = r1->nodeType;
	r15 = _Xml_XmlType_Impl__toString(r9);
	r14 = String___add__(r14,r15);
	r13 = haxe_Exception_thrown(((vdynamic*)r14));
	hl_throw((vdynamic*)r13);
	label$4f418b7_15_416:
	r14 = r1->nodeValue;
	if( r14 == NULL ) hl_null_access();
	r9 = r14->length;
	r11 = 0;
	if( r9 == r11 ) goto label$4f418b7_15_770;
	r25 = false;
	r0->newLine = r25;
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Document;
	if( r9 == r11 ) goto label$4f418b7_15_431;
	r9 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r11 = r12->Element;
	if( r9 != r11 ) goto label$4f418b7_15_437;
	label$4f418b7_15_431:
	r14 = (String)s$Bad_node_type_unexpected_;
	r9 = r1->nodeType;
	r15 = _Xml_XmlType_Impl__toString(r9);
	r14 = String___add__(r14,r15);
	r13 = haxe_Exception_thrown(((vdynamic*)r14));
	hl_throw((vdynamic*)r13);
	label$4f418b7_15_437:
	r14 = r1->nodeValue;
	r14 = h2d_HtmlText_htmlToText(r0,r14);
	if( r0 == NULL ) hl_null_access();
	r20 = r0->lineHeightMode;
	r21 = (venum*)g$h2d_LineHeightMode_Constant;
	if( r20 != r21 ) goto label$4f418b7_15_445;
	r18 = r0->font;
	goto label$4f418b7_15_446;
	label$4f418b7_15_445:
	r18 = r2;
	label$4f418b7_15_446:
	if( r3 == NULL ) hl_null_access();
	r13 = hl_types_ArrayObj_pop(r3);
	r23 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r13);
	if( r23 == NULL ) hl_null_access();
	r24 = hl_vfields(r23)[2] ? (*(double*)(hl_vfields(r23)[2])) : (double)hl_dyn_getd(r23->value,-362629759/*width*/);
	r37 = r0->realMaxWidth;
	r38 = 0.;
	if( !(r37 < r38) ) goto label$4f418b7_15_457;
	r48 = ($Math)g$_Math;
	r37 = r48->POSITIVE_INFINITY;
	goto label$4f418b7_15_458;
	label$4f418b7_15_457:
	r37 = r0->realMaxWidth;
	label$4f418b7_15_458:
	r49 = &t$String;
	r9 = 0;
	r36 = hl_alloc_array(r49,r9);
	r22 = hl_types_ArrayObj_alloc(r36);
	r9 = 0;
	r38 = r24;
	r11 = 0;
	r50 = 0;
	if( r14 == NULL ) hl_null_access();
	r51 = r14->length;
	label$4f418b7_15_468:
	if( r50 >= r51 ) goto label$4f418b7_15_698;
	r52 = r50;
	++r50;
	if( r14 == NULL ) hl_null_access();
	r33 = String_charCodeAt(r14,r52);
	r53 = r33 ? r33->v.i : 0;
	if( r2 == NULL ) hl_null_access();
	r54 = r2->glyphs;
	if( r54 == NULL ) hl_null_access();
	r13 = haxe_ds_IntMap_get(r54,r53);
	r56 = (h2d__FontChar)r13;
	if( r56 ) goto label$4f418b7_15_496;
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r54 = r2->glyphs;
	r13 = hxd_Charset_resolveChar(r58,r53,r54);
	r57 = (h2d__FontChar)r13;
	r56 = r57;
	if( r57 ) goto label$4f418b7_15_496;
	r59 = 13;
	if( r53 == r59 ) goto label$4f418b7_15_492;
	r59 = 10;
	if( r53 != r59 ) goto label$4f418b7_15_494;
	label$4f418b7_15_492:
	r57 = r2->nullChar;
	goto label$4f418b7_15_495;
	label$4f418b7_15_494:
	r57 = r2->defaultChar;
	label$4f418b7_15_495:
	r56 = r57;
	label$4f418b7_15_496:
	r57 = r56;
	r55 = 10;
	r60 = hl_alloc_dynamic(&t$_i32);
	r60->v.i = r55;
	if( r33 == r60 || (r33 && r60 && (r33->v.i == r60->v.i)) ) goto label$4f418b7_15_502;
	r25 = false;
	goto label$4f418b7_15_503;
	label$4f418b7_15_502:
	r25 = true;
	label$4f418b7_15_503:
	if( r56 == NULL ) hl_null_access();
	r40 = r56->width;
	r55 = r0->prevChar;
	r41 = h2d_FontChar_getKerningOffset(r56,r55);
	r40 = r40 + r41;
	r59 = 1;
	r55 = r52 + r59;
	r34 = String_charCodeAt(r14,r55);
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r55 = r33 ? r33->v.i : 0;
	r62 = hxd_Charset_isBreakChar(r58,r55);
	if( !r62 ) goto label$4f418b7_15_663;
	if( !r34 ) goto label$4f418b7_15_522;
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r55 = r34 ? r34->v.i : 0;
	r62 = hxd_Charset_isComplementChar(r58,r55);
	if( r62 ) goto label$4f418b7_15_663;
	label$4f418b7_15_522:
	if( !(r37 < r38) ) goto label$4f418b7_15_542;
	if( r22 == NULL ) hl_null_access();
	r55 = r22->length;
	r59 = 0;
	if( r55 != r59 ) goto label$4f418b7_15_542;
	if( r4 == NULL ) hl_null_access();
	r10 = hl_vfields(r4)[3] ? (*(Xml*)(hl_vfields(r4)[3])) : (Xml)hl_dyn_getp(r4->value,151653132/*node*/,&t$Xml);
	if( !r10 ) goto label$4f418b7_15_542;
	if( r3 == NULL ) hl_null_access();
	r39 = hl_alloc_virtual(&t$vrt_9a44900);
	if( hl_vfields(r39)[2] ) *(double*)(hl_vfields(r39)[2]) = (double)r38; else hl_dyn_setd(r39->value,-362629759/*width*/,r38);
	if( r23 == NULL ) hl_null_access();
	r41 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	if( hl_vfields(r39)[1] ) *(double*)(hl_vfields(r39)[1]) = (double)r41; else hl_dyn_setd(r39->value,38537191/*height*/,r41);
	r41 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	if( hl_vfields(r39)[0] ) *(double*)(hl_vfields(r39)[0]) = (double)r41; else hl_dyn_setd(r39->value,-67041115/*baseLine*/,r41);
	r55 = hl_types_ArrayObj_push(r3,((vdynamic*)r39));
	if( r7 == NULL ) hl_null_access();
	r41 = r7->hasValue ? ((double (*)(vdynamic*))r7->fun)((vdynamic*)r7->value) : ((double (*)(void))r7->fun)();
	r38 = r41;
	label$4f418b7_15_542:
	r41 = r38 + r40;
	r42 = r0->letterSpacing;
	r41 = r41 + r42;
	r59 = 1;
	r55 = r52 + r59;
	r59 = r14->length;
	r63 = r0->prevChar;
	label$4f418b7_15_549:
	if( !(r37 >= r41) ) goto label$4f418b7_15_613;
	if( r55 >= r59 ) goto label$4f418b7_15_613;
	if( r14 == NULL ) hl_null_access();
	r64 = r55;
	++r55;
	r60 = String_charCodeAt(r14,r64);
	if( r2 == NULL ) hl_null_access();
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r64 = r60 ? r60->v.i : 0;
	r62 = hxd_Charset_isSpace(r58,r64);
	if( r62 ) goto label$4f418b7_15_565;
	r64 = 10;
	r67 = hl_alloc_dynamic(&t$_i32);
	r67->v.i = r64;
	if( r60 != r67 && (!r60 || !r67 || (r60->v.i != r67->v.i)) ) goto label$4f418b7_15_566;
	label$4f418b7_15_565:
	goto label$4f418b7_15_613;
	label$4f418b7_15_566:
	r64 = r60 ? r60->v.i : 0;
	r54 = r2->glyphs;
	if( r54 == NULL ) hl_null_access();
	r13 = haxe_ds_IntMap_get(r54,r64);
	r61 = (h2d__FontChar)r13;
	if( r61 ) goto label$4f418b7_15_587;
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r54 = r2->glyphs;
	r13 = hxd_Charset_resolveChar(r58,r64,r54);
	r68 = (h2d__FontChar)r13;
	r61 = r68;
	if( r68 ) goto label$4f418b7_15_587;
	r69 = 13;
	if( r64 == r69 ) goto label$4f418b7_15_583;
	r69 = 10;
	if( r64 != r69 ) goto label$4f418b7_15_585;
	label$4f418b7_15_583:
	r68 = r2->nullChar;
	goto label$4f418b7_15_586;
	label$4f418b7_15_585:
	r68 = r2->defaultChar;
	label$4f418b7_15_586:
	r61 = r68;
	label$4f418b7_15_587:
	if( r61 == NULL ) hl_null_access();
	r43 = r61->width;
	r70 = r0->letterSpacing;
	r43 = r43 + r70;
	r70 = h2d_FontChar_getKerningOffset(r61,r63);
	r43 = r43 + r70;
	r42 = r41 + r43;
	r41 = r42;
	r65 = r60 ? r60->v.i : 0;
	r63 = r65;
	r69 = 1;
	r65 = r55 + r69;
	r66 = String_charCodeAt(r14,r65);
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r65 = r60 ? r60->v.i : 0;
	r62 = hxd_Charset_isBreakChar(r58,r65);
	if( !r62 ) goto label$4f418b7_15_612;
	if( !r66 ) goto label$4f418b7_15_611;
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r65 = r66 ? r66->v.i : 0;
	r62 = hxd_Charset_isComplementChar(r58,r65);
	if( r62 ) goto label$4f418b7_15_612;
	label$4f418b7_15_611:
	goto label$4f418b7_15_613;
	label$4f418b7_15_612:
	goto label$4f418b7_15_549;
	label$4f418b7_15_613:
	if( !(r37 < r41) ) goto label$4f418b7_15_650;
	r69 = 1;
	r65 = r59 - r69;
	if( r52 == r65 ) goto label$4f418b7_15_650;
	r62 = true;
	r25 = r62;
	if( r2 == NULL ) hl_null_access();
	r58 = r2->charset;
	if( r58 == NULL ) hl_null_access();
	r64 = r33 ? r33->v.i : 0;
	r62 = hxd_Charset_isSpace(r58,r64);
	if( !r62 ) goto label$4f418b7_15_634;
	if( r22 == NULL ) hl_null_access();
	if( r14 == NULL ) hl_null_access();
	r65 = r52 - r9;
	r60 = hl_alloc_dynamic(&t$_i32);
	r60->v.i = r65;
	r15 = String_substr(r14,r9,r60);
	r64 = hl_types_ArrayObj_push(r22,((vdynamic*)r15));
	r61 = NULL;
	r57 = r61;
	goto label$4f418b7_15_643;
	label$4f418b7_15_634:
	if( r22 == NULL ) hl_null_access();
	if( r14 == NULL ) hl_null_access();
	r69 = 1;
	r65 = r52 + r69;
	r65 = r65 - r9;
	r60 = hl_alloc_dynamic(&t$_i32);
	r60->v.i = r65;
	r15 = String_substr(r14,r9,r60);
	r64 = hl_types_ArrayObj_push(r22,((vdynamic*)r15));
	++r11;
	label$4f418b7_15_643:
	if( r4 == NULL ) hl_null_access();
	r10 = NULL;
	if( hl_vfields(r4)[3] ) *(Xml*)(hl_vfields(r4)[3]) = (Xml)r10; else hl_dyn_setp(r4->value,151653132/*node*/,&t$Xml,r10);
	r65 = 1;
	r64 = r52 + r65;
	r9 = r64;
	goto label$4f418b7_15_663;
	label$4f418b7_15_650:
	if( r4 == NULL ) hl_null_access();
	if( hl_vfields(r4)[3] ) *(Xml*)(hl_vfields(r4)[3]) = (Xml)r1; else hl_dyn_setp(r4->value,151653132/*node*/,&t$Xml,r1);
	r64 = r52 + r11;
	if( hl_vfields(r4)[4] ) *(int*)(hl_vfields(r4)[4]) = (int)r64; else hl_dyn_seti(r4->value,5594516/*pos*/,&t$_i32,r64);
	r64 = r0->prevChar;
	if( hl_vfields(r4)[5] ) *(int*)(hl_vfields(r4)[5]) = (int)r64; else hl_dyn_seti(r4->value,177028969/*prevChar*/,&t$_i32,r64);
	if( hl_vfields(r4)[6] ) *(double*)(hl_vfields(r4)[6]) = (double)r38; else hl_dyn_setd(r4->value,-362629759/*width*/,r38);
	if( r23 == NULL ) hl_null_access();
	r42 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	if( hl_vfields(r4)[2] ) *(double*)(hl_vfields(r4)[2]) = (double)r42; else hl_dyn_setd(r4->value,38537191/*height*/,r42);
	r42 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	if( hl_vfields(r4)[0] ) *(double*)(hl_vfields(r4)[0]) = (double)r42; else hl_dyn_setd(r4->value,-67041115/*baseLine*/,r42);
	if( hl_vfields(r4)[1] ) *(h2d__Font*)(hl_vfields(r4)[1]) = (h2d__Font)r2; else hl_dyn_setp(r4->value,62938841/*font*/,&t$h2d_Font,r2);
	label$4f418b7_15_663:
	if( !r57 ) goto label$4f418b7_15_671;
	r55 = 10;
	r66 = hl_alloc_dynamic(&t$_i32);
	r66->v.i = r55;
	if( r33 == r66 || (r33 && r66 && (r33->v.i == r66->v.i)) ) goto label$4f418b7_15_671;
	r43 = r0->letterSpacing;
	r42 = r40 + r43;
	r41 = r38 + r42;
	r38 = r41;
	label$4f418b7_15_671:
	if( !r25 ) goto label$4f418b7_15_693;
	if( r3 == NULL ) hl_null_access();
	r39 = hl_alloc_virtual(&t$vrt_9a44900);
	if( hl_vfields(r39)[2] ) *(double*)(hl_vfields(r39)[2]) = (double)r38; else hl_dyn_setd(r39->value,-362629759/*width*/,r38);
	if( r23 == NULL ) hl_null_access();
	r41 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	if( hl_vfields(r39)[1] ) *(double*)(hl_vfields(r39)[1]) = (double)r41; else hl_dyn_setd(r39->value,38537191/*height*/,r41);
	r41 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	if( hl_vfields(r39)[0] ) *(double*)(hl_vfields(r39)[0]) = (double)r41; else hl_dyn_setd(r39->value,-67041115/*baseLine*/,r41);
	r55 = hl_types_ArrayObj_push(r3,((vdynamic*)r39));
	if( r18 == NULL ) hl_null_access();
	r41 = r18->lineHeight;
	if( hl_vfields(r23)[1] ) *(double*)(hl_vfields(r23)[1]) = (double)r41; else hl_dyn_setd(r23->value,38537191/*height*/,r41);
	r41 = r18->baseLine;
	if( hl_vfields(r23)[0] ) *(double*)(hl_vfields(r23)[0]) = (double)r41; else hl_dyn_setd(r23->value,-67041115/*baseLine*/,r41);
	r41 = 0.;
	r38 = r41;
	r55 = -1;
	r0->prevChar = r55;
	r62 = true;
	r0->newLine = r62;
	goto label$4f418b7_15_697;
	label$4f418b7_15_693:
	r55 = r33 ? r33->v.i : 0;
	r0->prevChar = r55;
	r62 = false;
	r0->newLine = r62;
	label$4f418b7_15_697:
	goto label$4f418b7_15_468;
	label$4f418b7_15_698:
	if( r14 == NULL ) hl_null_access();
	r51 = r14->length;
	if( r9 >= r51 ) goto label$4f418b7_15_732;
	if( !(r37 < r38) ) goto label$4f418b7_15_719;
	if( r4 == NULL ) hl_null_access();
	r10 = hl_vfields(r4)[3] ? (*(Xml*)(hl_vfields(r4)[3])) : (Xml)hl_dyn_getp(r4->value,151653132/*node*/,&t$Xml);
	if( !r10 ) goto label$4f418b7_15_719;
	r10 = hl_vfields(r4)[3] ? (*(Xml*)(hl_vfields(r4)[3])) : (Xml)hl_dyn_getp(r4->value,151653132/*node*/,&t$Xml);
	if( r10 == r1 ) goto label$4f418b7_15_719;
	if( r3 == NULL ) hl_null_access();
	r39 = hl_alloc_virtual(&t$vrt_9a44900);
	if( hl_vfields(r39)[2] ) *(double*)(hl_vfields(r39)[2]) = (double)r38; else hl_dyn_setd(r39->value,-362629759/*width*/,r38);
	if( r23 == NULL ) hl_null_access();
	r40 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	if( hl_vfields(r39)[1] ) *(double*)(hl_vfields(r39)[1]) = (double)r40; else hl_dyn_setd(r39->value,38537191/*height*/,r40);
	r40 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	if( hl_vfields(r39)[0] ) *(double*)(hl_vfields(r39)[0]) = (double)r40; else hl_dyn_setd(r39->value,-67041115/*baseLine*/,r40);
	r50 = hl_types_ArrayObj_push(r3,((vdynamic*)r39));
	if( r7 == NULL ) hl_null_access();
	r40 = r7->hasValue ? ((double (*)(vdynamic*))r7->fun)((vdynamic*)r7->value) : ((double (*)(void))r7->fun)();
	r38 = r40;
	label$4f418b7_15_719:
	if( r22 == NULL ) hl_null_access();
	r33 = NULL;
	r15 = String_substr(r14,r9,r33);
	r50 = hl_types_ArrayObj_push(r22,((vdynamic*)r15));
	if( r3 == NULL ) hl_null_access();
	r39 = hl_alloc_virtual(&t$vrt_9a44900);
	if( hl_vfields(r39)[2] ) *(double*)(hl_vfields(r39)[2]) = (double)r38; else hl_dyn_setd(r39->value,-362629759/*width*/,r38);
	if( r23 == NULL ) hl_null_access();
	r40 = hl_vfields(r23)[1] ? (*(double*)(hl_vfields(r23)[1])) : (double)hl_dyn_getd(r23->value,38537191/*height*/);
	if( hl_vfields(r39)[1] ) *(double*)(hl_vfields(r39)[1]) = (double)r40; else hl_dyn_setd(r39->value,38537191/*height*/,r40);
	r40 = hl_vfields(r23)[0] ? (*(double*)(hl_vfields(r23)[0])) : (double)hl_dyn_getd(r23->value,-67041115/*baseLine*/);
	if( hl_vfields(r39)[0] ) *(double*)(hl_vfields(r39)[0]) = (double)r40; else hl_dyn_setd(r39->value,-67041115/*baseLine*/,r40);
	r50 = hl_types_ArrayObj_push(r3,((vdynamic*)r39));
	label$4f418b7_15_732:
	r25 = r0->newLine;
	if( r25 ) goto label$4f418b7_15_738;
	if( r3 == NULL ) hl_null_access();
	r50 = r3->length;
	r51 = 0;
	if( r50 != r51 ) goto label$4f418b7_15_751;
	label$4f418b7_15_738:
	if( r3 == NULL ) hl_null_access();
	r39 = hl_alloc_virtual(&t$vrt_9a44900);
	r40 = 0.;
	if( hl_vfields(r39)[2] ) *(double*)(hl_vfields(r39)[2]) = (double)r40; else hl_dyn_setd(r39->value,-362629759/*width*/,r40);
	if( r18 == NULL ) hl_null_access();
	r40 = r18->lineHeight;
	if( hl_vfields(r39)[1] ) *(double*)(hl_vfields(r39)[1]) = (double)r40; else hl_dyn_setd(r39->value,38537191/*height*/,r40);
	r40 = r18->baseLine;
	if( hl_vfields(r39)[0] ) *(double*)(hl_vfields(r39)[0]) = (double)r40; else hl_dyn_setd(r39->value,-67041115/*baseLine*/,r40);
	r50 = hl_types_ArrayObj_push(r3,((vdynamic*)r39));
	if( r22 == NULL ) hl_null_access();
	r15 = (String)s$;
	r50 = hl_types_ArrayObj_push(r22,((vdynamic*)r15));
	label$4f418b7_15_751:
	if( r22 == NULL ) hl_null_access();
	r15 = (String)s$68b329d;
	r15 = hl_types_ArrayObj_join(r22,r15);
	if( r1 == NULL ) hl_null_access();
	r50 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r51 = r12->Document;
	if( r50 == r51 ) goto label$4f418b7_15_763;
	r50 = r1->nodeType;
	r12 = ($Xml)g$_Xml;
	r51 = r12->Element;
	if( r50 != r51 ) goto label$4f418b7_15_769;
	label$4f418b7_15_763:
	r27 = (String)s$Bad_node_type_unexpected_;
	r50 = r1->nodeType;
	r28 = _Xml_XmlType_Impl__toString(r50);
	r27 = String___add__(r27,r28);
	r13 = haxe_Exception_thrown(((vdynamic*)r27));
	hl_throw((vdynamic*)r13);
	label$4f418b7_15_769:
	r1->nodeValue = r15;
	label$4f418b7_15_770:
	return;
}

String h2d_HtmlText_htmlToText(h2d__HtmlText r0,String r1) {
	String r3, r6;
	bool r2;
	EReg r4;
	h2d__$HtmlText r5;
	r2 = r0->condenseWhite;
	if( !r2 ) goto label$4f418b7_16_8;
	r5 = (h2d__$HtmlText)g$_h2d_HtmlText;
	r4 = r5->REG_SPACES;
	if( r4 == NULL ) hl_null_access();
	r6 = (String)s$7215ee9;
	r3 = EReg_replace(r4,r1,r6);
	r1 = r3;
	label$4f418b7_16_8:
	return r1;
}

void h2d_HtmlText_addNode__$3(venum* r0,hxd__Event r1) {
	String r5;
	h2d__HtmlText r4;
	vclosure *r3;
	r4 = ((Enumt$ctx_d68f9c9*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->onHyperlink;
	if( r3 == NULL ) hl_null_access();
	r5 = ((Enumt$ctx_d68f9c9*)r0)->p1;
	r3->hasValue ? ((void (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r5) : ((void (*)(String))r3->fun)(r5);
	return;
}

void h2d_HtmlText_addNode__$2(venum* r0,hxd__Event r1) {
	String r5;
	h2d__HtmlText r4;
	vclosure *r3;
	r4 = ((Enumt$ctx_d68f9c9*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->onHyperlink;
	if( r3 == NULL ) hl_null_access();
	r5 = ((Enumt$ctx_d68f9c9*)r0)->p1;
	r3->hasValue ? ((void (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r5) : ((void (*)(String))r3->fun)(r5);
	return;
}

void h2d_HtmlText_addNode__$1(venum* r0,hxd__Event r1) {
	String r5;
	h2d__HtmlText r4;
	vclosure *r3;
	r4 = ((Enumt$ctx_d68f9c9*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->onHyperlink;
	if( r3 == NULL ) hl_null_access();
	r5 = ((Enumt$ctx_d68f9c9*)r0)->p1;
	r3->hasValue ? ((void (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r5) : ((void (*)(String))r3->fun)(r5);
	return;
}

void h2d_HtmlText_addNode__$5(venum* r0,hxd__Event r1) {
	String r5;
	h2d__HtmlText r4;
	vclosure *r3;
	r4 = ((Enumt$ctx_d68f9c9*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->onHyperlink;
	if( r3 == NULL ) hl_null_access();
	r5 = ((Enumt$ctx_d68f9c9*)r0)->p1;
	r3->hasValue ? ((void (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r5) : ((void (*)(String))r3->fun)(r5);
	return;
}

void h2d_HtmlText_addNode__$4(venum* r0,hxd__Event r1) {
	String r5;
	h2d__HtmlText r4;
	vclosure *r3;
	r4 = ((Enumt$ctx_d68f9c9*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->onHyperlink;
	if( r3 == NULL ) hl_null_access();
	r5 = ((Enumt$ctx_d68f9c9*)r0)->p1;
	r3->hasValue ? ((void (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r5) : ((void (*)(String))r3->fun)(r5);
	return;
}

void h2d_HtmlText_addNode__$6(venum* r0,hxd__Event r1) {
	String r5;
	h2d__HtmlText r4;
	vclosure *r3;
	r4 = ((Enumt$ctx_d68f9c9*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->onHyperlink;
	if( r3 == NULL ) hl_null_access();
	r5 = ((Enumt$ctx_d68f9c9*)r0)->p1;
	r3->hasValue ? ((void (*)(vdynamic*,String))r3->fun)((vdynamic*)r3->value,r5) : ((void (*)(String))r3->fun)(r5);
	return;
}

void h2d_HtmlText_addNode(h2d__HtmlText r0,Xml r1,h2d__Font r2,venum* r3,bool r4,hl__types__ArrayObj r5) {
	String r16, r17, r50, r51, r58;
	hxd__Charset r83;
	vvirtual *r28, *r29, *r49, *r75;
	hl__types__ArrayObj r25, r30;
	h2d__TileLayerContent r85;
	hl_type *r27;
	venum *r14, *r32, *r38, *r46, *r47, *r68;
	bool r20;
	haxe__ds__IntMap r80;
	haxe__iterators__ArrayIterator r73;
	$Xml r11;
	Xml r9;
	h2d__Tile r37, r66;
	h2d__HtmlText r6;
	hxsl__Shader r43;
	h2d__Font r33;
	h2d__FontChar r81, r82;
	h3d__Vector r12, r44, r45;
	h3d__shader__SignedDistanceField r39, r40;
	hl__types__ArrayDyn r74;
	h2d__Bitmap r72;
	vclosure *r31, *r34, *r65;
	double r22, r23, r41, r48, r59, r60, r61, r62, r63, r64, r69, r70, r71, r86, r87;
	h2d__TileGroup r13, r35, r36;
	double *r52, *r53, *r54, *r55;
	h2d__Interactive r21, r24;
	vdynamic *r15, *r42, *r56, *r57, *r67, *r78;
	varray *r26;
	vbyte *r18, *r19;
	int r8, r10, r76, r77, r79, r84;
	r6 = r0;
	if( r1 == NULL ) hl_null_access();
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Element;
	if( r8 != r10 ) goto label$4f418b7_23_1406;
	r12 = NULL;
	r13 = NULL;
	r14 = r3;
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Element;
	if( r8 == r10 ) goto label$4f418b7_23_19;
	r16 = (String)s$63ec124;
	r8 = r1->nodeType;
	r17 = _Xml_XmlType_Impl__toString(r8);
	r16 = String___add__(r16,r17);
	r15 = haxe_Exception_thrown(((vdynamic*)r16));
	hl_throw((vdynamic*)r15);
	label$4f418b7_23_19:
	r16 = r1->nodeName;
	if( r16 == NULL ) hl_null_access();
	r16 = String_toLowerCase(r16);
	if( !r16 ) goto label$4f418b7_23_31;
	r8 = r16->length;
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_31;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("a");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_104;
	label$4f418b7_23_31:
	if( !r16 ) goto label$4f418b7_23_40;
	r8 = r16->length;
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_40;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("b");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_193;
	label$4f418b7_23_40:
	if( !r16 ) goto label$4f418b7_23_49;
	r8 = r16->length;
	r10 = 4;
	if( r8 != r10 ) goto label$4f418b7_23_49;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("bold");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_193;
	label$4f418b7_23_49:
	if( !r16 ) goto label$4f418b7_23_58;
	r8 = r16->length;
	r10 = 2;
	if( r8 != r10 ) goto label$4f418b7_23_58;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("br");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_257;
	label$4f418b7_23_58:
	if( !r16 ) goto label$4f418b7_23_67;
	r8 = r16->length;
	r10 = 4;
	if( r8 != r10 ) goto label$4f418b7_23_67;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("font");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_410;
	label$4f418b7_23_67:
	if( !r16 ) goto label$4f418b7_23_76;
	r8 = r16->length;
	r10 = 3;
	if( r8 != r10 ) goto label$4f418b7_23_76;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("img");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_595;
	label$4f418b7_23_76:
	if( !r16 ) goto label$4f418b7_23_85;
	r8 = r16->length;
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_85;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("i");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_683;
	label$4f418b7_23_85:
	if( !r16 ) goto label$4f418b7_23_94;
	r8 = r16->length;
	r10 = 6;
	if( r8 != r10 ) goto label$4f418b7_23_94;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("italic");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_683;
	label$4f418b7_23_94:
	if( !r16 ) goto label$4f418b7_23_103;
	r8 = r16->length;
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_103;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("p");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_747;
	label$4f418b7_23_103:
	goto label$4f418b7_23_1032;
	label$4f418b7_23_104:
	r17 = (String)s$href;
	r20 = Xml_exists(r1,r17);
	if( !r20 ) goto label$4f418b7_23_192;
	if( r0 == NULL ) hl_null_access();
	r21 = r0->aInteractive;
	if( !r21 ) goto label$4f418b7_23_120;
	r21 = r0->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r22 = r0->xPos;
	r24 = r0->aInteractive;
	if( r24 == NULL ) hl_null_access();
	r23 = r24->x;
	r22 = r22 - r23;
	r21->width = r22;
	r21 = NULL;
	r0->aInteractive = r21;
	label$4f418b7_23_120:
	r25 = r0->aHrefs;
	if( r25 ) goto label$4f418b7_23_127;
	r27 = &t$String;
	r8 = 0;
	r26 = hl_alloc_array(r27,r8);
	r25 = hl_types_ArrayObj_alloc(r26);
	r0->aHrefs = r25;
	label$4f418b7_23_127:
	r25 = r0->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r17 = (String)s$href;
	r17 = Xml_get(r1,r17);
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r17));
	r25 = r0->aHrefs;
	if( !r25 ) goto label$4f418b7_23_192;
	r25 = r0->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r8 = r25->length;
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_192;
	r21 = (h2d__Interactive)hl_alloc_obj(&t$h2d_Interactive);
	r22 = 0.;
	if( r5 == NULL ) hl_null_access();
	r8 = r0->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_147;
	r28 = NULL;
	goto label$4f418b7_23_150;
	label$4f418b7_23_147:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_150:
	if( r28 == NULL ) hl_null_access();
	r23 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r29 = NULL;
	h2d_Interactive_new(r21,r22,r23,((h2d__Object)r0),r29);
	r0->aInteractive = r21;
	r25 = r0->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r30 = r0->aHrefs;
	if( r30 == NULL ) hl_null_access();
	r8 = r30->length;
	r10 = 1;
	r8 = r8 - r10;
	r10 = r25->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_166;
	r17 = NULL;
	goto label$4f418b7_23_169;
	label$4f418b7_23_166:
	r26 = r25->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r17 = (String)r15;
	label$4f418b7_23_169:
	r21 = r0->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r32 = hl_alloc_enum(&t$ctx_d68f9c9,0);
	((Enumt$ctx_d68f9c9*)r32)->p0 = (h2d__HtmlText)r0;
	((Enumt$ctx_d68f9c9*)r32)->p1 = (String)r17;
	r31 = hl_alloc_closure_ptr(&t$fun_25e7e5c,h2d_HtmlText_addNode__$1,r32);
	r21->onClick = r31;
	r21 = r0->aInteractive;
	r22 = r0->xPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->x = r22;
	r21 = r0->aInteractive;
	r22 = r0->yPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->y = r22;
	r25 = r0->elements;
	if( r25 == NULL ) hl_null_access();
	r21 = r0->aInteractive;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r21));
	label$4f418b7_23_192:
	goto label$4f418b7_23_1032;
	label$4f418b7_23_193:
	if( r0 == NULL ) hl_null_access();
	r34 = r0->loadFont;
	if( r34 == NULL ) hl_null_access();
	r17 = (String)s$bold;
	r33 = r34->hasValue ? ((h2d__Font (*)(vdynamic*,String))r34->fun)((vdynamic*)r34->value,r17) : ((h2d__Font (*)(String))r34->fun)(r17);
	r2 = r33;
	if( r13 ) goto label$4f418b7_23_202;
	r35 = r0->glyphs;
	r13 = r35;
	label$4f418b7_23_202:
	r35 = r0->glyphs;
	r36 = (h2d__TileGroup)hl_alloc_obj(&t$h2d_TileGroup);
	if( r33 ) goto label$4f418b7_23_207;
	r37 = NULL;
	goto label$4f418b7_23_209;
	label$4f418b7_23_207:
	if( r33 == NULL ) hl_null_access();
	r37 = r33->tile;
	label$4f418b7_23_209:
	h2d_TileGroup_new(r36,r37,((h2d__Object)r0));
	r0->glyphs = r36;
	if( !r33 ) goto label$4f418b7_23_237;
	if( r33 == NULL ) hl_null_access();
	r38 = r33->type;
	if( r38 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r38);
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_237;
	r22 = ((h2d_FontType_SignedDistanceField*)r38)->p2;
	r23 = ((h2d_FontType_SignedDistanceField*)r38)->p1;
	r8 = ((h2d_FontType_SignedDistanceField*)r38)->p0;
	r39 = (h3d__shader__SignedDistanceField)hl_alloc_obj(&t$h3d_shader_SignedDistanceField);
	h3d_shader_SignedDistanceField_new(r39);
	r20 = true;
	r39->constModified = r20;
	r39->channel__ = r8;
	r39->alphaCutoff__ = r23;
	r39->smoothing__ = r22;
	r36 = r0->glyphs;
	if( r36 == NULL ) hl_null_access();
	r20 = true;
	r42 = hl_alloc_dynbool(r20);
	r36->smooth = r42;
	r36 = r0->glyphs;
	if( r36 == NULL ) hl_null_access();
	r43 = h2d_Drawable_addShader(((h2d__Drawable)r36),((hxsl__Shader)r39));
	r40 = (h3d__shader__SignedDistanceField)r43;
	label$4f418b7_23_237:
	r36 = r0->glyphs;
	if( r36 == NULL ) hl_null_access();
	r44 = r36->curColor;
	if( r35 == NULL ) hl_null_access();
	r45 = r35->curColor;
	if( r44 == NULL ) hl_null_access();
	if( r45 == NULL ) hl_null_access();
	r22 = r45->x;
	r44->x = r22;
	r22 = r45->y;
	r44->y = r22;
	r22 = r45->z;
	r44->z = r22;
	r22 = r45->w;
	r44->w = r22;
	r25 = r0->elements;
	if( r25 == NULL ) hl_null_access();
	r36 = r0->glyphs;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r36));
	goto label$4f418b7_23_1032;
	label$4f418b7_23_257:
	if( r0 == NULL ) hl_null_access();
	r21 = r0->aInteractive;
	if( !r21 ) goto label$4f418b7_23_270;
	r21 = r0->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r22 = r0->xPos;
	r24 = r0->aInteractive;
	if( r24 == NULL ) hl_null_access();
	r23 = r24->x;
	r22 = r22 - r23;
	r21->width = r22;
	r21 = NULL;
	r0->aInteractive = r21;
	label$4f418b7_23_270:
	r22 = r0->xPos;
	r23 = r0->xMax;
	if( !(r23 < r22) ) goto label$4f418b7_23_275;
	r22 = r0->xPos;
	r0->xMax = r22;
	label$4f418b7_23_275:
	r22 = r0->yPos;
	if( r5 == NULL ) hl_null_access();
	r8 = r0->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_282;
	r28 = NULL;
	goto label$4f418b7_23_285;
	label$4f418b7_23_282:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_285:
	if( r28 == NULL ) hl_null_access();
	r23 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r41 = r0->lineSpacing;
	r23 = r23 + r41;
	r22 = r22 + r23;
	r0->yPos = r22;
	r8 = r0->sizePos;
	++r8;
	r0->sizePos = r8;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_298;
	r28 = NULL;
	goto label$4f418b7_23_301;
	label$4f418b7_23_298:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_301:
	if( r28 == NULL ) hl_null_access();
	r22 = hl_vfields(r28)[2] ? (*(double*)(hl_vfields(r28)[2])) : (double)hl_dyn_getd(r28->value,-362629759/*width*/);
	if( r3 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r3);
	switch(r8) {
		default:
			goto label$4f418b7_23_346;
		case 0:
			r23 = 0.;
			r0->xPos = r23;
			r23 = r0->xMin;
			r41 = 0.;
			if( !(r41 < r23) ) goto label$4f418b7_23_314;
			r23 = 0.;
			r0->xMin = r23;
			label$4f418b7_23_314:
			goto label$4f418b7_23_346;
		case 1:
		case 2:
		case 3:
		case 4:
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 == r47 ) goto label$4f418b7_23_319;
			r47 = (venum*)g$h2d_Align_MultilineRight;
			if( r3 != r47 ) goto label$4f418b7_23_322;
			label$4f418b7_23_319:
			r23 = r0->calcWidth;
			r8 = hl_math_ceil(r23);
			goto label$4f418b7_23_329;
			label$4f418b7_23_322:
			r23 = r0->calcWidth;
			r41 = 0.;
			if( !(r23 < r41) ) goto label$4f418b7_23_327;
			r8 = 0;
			goto label$4f418b7_23_329;
			label$4f418b7_23_327:
			r23 = r0->realMaxWidth;
			r8 = hl_math_ceil(r23);
			label$4f418b7_23_329:
			r47 = (venum*)g$h2d_Align_Center;
			if( r3 == r47 ) goto label$4f418b7_23_333;
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 != r47 ) goto label$4f418b7_23_335;
			label$4f418b7_23_333:
			r23 = 0.5;
			goto label$4f418b7_23_336;
			label$4f418b7_23_335:
			r23 = 1.;
			label$4f418b7_23_336:
			r41 = (double)r8;
			r41 = r41 - r22;
			r41 = r41 * r23;
			r41 = hl_math_ffloor(r41);
			r0->xPos = r41;
			r41 = r0->xPos;
			r48 = r0->xMin;
			if( !(r41 < r48) ) goto label$4f418b7_23_346;
			r41 = r0->xPos;
			r0->xMin = r41;
	}
	label$4f418b7_23_346:
	r25 = r0->aHrefs;
	if( !r25 ) goto label$4f418b7_23_405;
	r25 = r0->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r8 = r25->length;
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_405;
	r21 = (h2d__Interactive)hl_alloc_obj(&t$h2d_Interactive);
	r22 = 0.;
	r8 = r0->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_360;
	r28 = NULL;
	goto label$4f418b7_23_363;
	label$4f418b7_23_360:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_363:
	if( r28 == NULL ) hl_null_access();
	r23 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r29 = NULL;
	h2d_Interactive_new(r21,r22,r23,((h2d__Object)r0),r29);
	r0->aInteractive = r21;
	r25 = r0->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r30 = r0->aHrefs;
	if( r30 == NULL ) hl_null_access();
	r8 = r30->length;
	r10 = 1;
	r8 = r8 - r10;
	r10 = r25->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_379;
	r17 = NULL;
	goto label$4f418b7_23_382;
	label$4f418b7_23_379:
	r26 = r25->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r17 = (String)r15;
	label$4f418b7_23_382:
	r21 = r0->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r32 = hl_alloc_enum(&t$ctx_d68f9c9,0);
	((Enumt$ctx_d68f9c9*)r32)->p0 = (h2d__HtmlText)r0;
	((Enumt$ctx_d68f9c9*)r32)->p1 = (String)r17;
	r31 = hl_alloc_closure_ptr(&t$fun_25e7e5c,h2d_HtmlText_addNode__$2,r32);
	r21->onClick = r31;
	r21 = r0->aInteractive;
	r22 = r0->xPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->x = r22;
	r21 = r0->aInteractive;
	r22 = r0->yPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->y = r22;
	r25 = r0->elements;
	if( r25 == NULL ) hl_null_access();
	r21 = r0->aInteractive;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r21));
	label$4f418b7_23_405:
	r20 = true;
	r0->newLine = r20;
	r8 = -1;
	r0->prevChar = r8;
	goto label$4f418b7_23_1032;
	label$4f418b7_23_410:
	r49 = Xml_attributes(r1);
	label$4f418b7_23_411:
	if( r49 == NULL ) hl_null_access();
	if( hl_vfields(r49)[0] ) r20 = ((bool (*)(vdynamic*))hl_vfields(r49)[0])(r49->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r49->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r20 = (bool)ret.v.i;
	}
	if( !r20 ) goto label$4f418b7_23_594;
	if( hl_vfields(r49)[1] ) r17 = ((String (*)(vdynamic*))hl_vfields(r49)[1])(r49->value); else {
		r17 = (String)hl_dyn_call_obj(r49->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
	}
	if( r1 == NULL ) hl_null_access();
	r50 = Xml_get(r1,r17);
	if( r17 == NULL ) hl_null_access();
	r51 = String_toLowerCase(r17);
	if( !r51 ) goto label$4f418b7_23_429;
	r8 = r51->length;
	r10 = 5;
	if( r8 != r10 ) goto label$4f418b7_23_429;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("color");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_448;
	label$4f418b7_23_429:
	if( !r51 ) goto label$4f418b7_23_438;
	r8 = r51->length;
	r10 = 4;
	if( r8 != r10 ) goto label$4f418b7_23_438;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("face");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_506;
	label$4f418b7_23_438:
	if( !r51 ) goto label$4f418b7_23_447;
	r8 = r51->length;
	r10 = 7;
	if( r8 != r10 ) goto label$4f418b7_23_447;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("opacity");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_569;
	label$4f418b7_23_447:
	goto label$4f418b7_23_593;
	label$4f418b7_23_448:
	if( r12 ) goto label$4f418b7_23_464;
	r35 = r0->glyphs;
	if( r35 == NULL ) hl_null_access();
	r44 = r35->curColor;
	r45 = (h3d__Vector)hl_alloc_obj(&t$h3d_Vector);
	if( r44 == NULL ) hl_null_access();
	r22 = r44->x;
	r52 = &r22;
	r23 = r44->y;
	r53 = &r23;
	r41 = r44->z;
	r54 = &r41;
	r48 = r44->w;
	r55 = &r48;
	h3d_Vector_new(r45,r52,r53,r54,r55);
	r12 = r45;
	label$4f418b7_23_464:
	if( r50 == NULL ) hl_null_access();
	r8 = 0;
	r56 = String_charCodeAt(r50,r8);
	r8 = 35;
	r57 = hl_alloc_dynamic(&t$_i32);
	r57->v.i = r8;
	if( r56 != r57 && (!r56 || !r57 || (r56->v.i != r57->v.i)) ) goto label$4f418b7_23_493;
	r8 = r50->length;
	r10 = 4;
	if( r8 != r10 ) goto label$4f418b7_23_493;
	r51 = (String)s$01abfc7;
	r8 = 1;
	r58 = String_charAt(r50,r8);
	r51 = String___add__(r51,r58);
	r8 = 1;
	r58 = String_charAt(r50,r8);
	r51 = String___add__(r51,r58);
	r8 = 2;
	r58 = String_charAt(r50,r8);
	r51 = String___add__(r51,r58);
	r8 = 2;
	r58 = String_charAt(r50,r8);
	r51 = String___add__(r51,r58);
	r8 = 3;
	r58 = String_charAt(r50,r8);
	r51 = String___add__(r51,r58);
	r8 = 3;
	r58 = String_charAt(r50,r8);
	r51 = String___add__(r51,r58);
	r50 = r51;
	label$4f418b7_23_493:
	r35 = r0->glyphs;
	if( r35 == NULL ) hl_null_access();
	r51 = (String)s$0x;
	if( r50 == NULL ) hl_null_access();
	r8 = 1;
	r56 = NULL;
	r58 = String_substr(r50,r8,r56);
	r51 = String___add__(r51,r58);
	r56 = Std_parseInt(r51);
	r8 = r56 ? r56->v.i : 0;
	r52 = NULL;
	h2d_TileGroup_setDefaultColor(r35,r8,r52);
	goto label$4f418b7_23_593;
	label$4f418b7_23_506:
	if( r6 == NULL ) hl_null_access();
	r34 = r6->loadFont;
	if( r34 == NULL ) hl_null_access();
	r33 = r34->hasValue ? ((h2d__Font (*)(vdynamic*,String))r34->fun)((vdynamic*)r34->value,r50) : ((h2d__Font (*)(String))r34->fun)(r50);
	r2 = r33;
	if( r13 ) goto label$4f418b7_23_514;
	r35 = r6->glyphs;
	r13 = r35;
	label$4f418b7_23_514:
	r35 = r6->glyphs;
	r36 = (h2d__TileGroup)hl_alloc_obj(&t$h2d_TileGroup);
	if( r33 ) goto label$4f418b7_23_519;
	r37 = NULL;
	goto label$4f418b7_23_521;
	label$4f418b7_23_519:
	if( r33 == NULL ) hl_null_access();
	r37 = r33->tile;
	label$4f418b7_23_521:
	h2d_TileGroup_new(r36,r37,((h2d__Object)r6));
	r6->glyphs = r36;
	if( !r33 ) goto label$4f418b7_23_549;
	if( r33 == NULL ) hl_null_access();
	r38 = r33->type;
	if( r38 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r38);
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_549;
	r59 = ((h2d_FontType_SignedDistanceField*)r38)->p2;
	r60 = ((h2d_FontType_SignedDistanceField*)r38)->p1;
	r8 = ((h2d_FontType_SignedDistanceField*)r38)->p0;
	r39 = (h3d__shader__SignedDistanceField)hl_alloc_obj(&t$h3d_shader_SignedDistanceField);
	h3d_shader_SignedDistanceField_new(r39);
	r20 = true;
	r39->constModified = r20;
	r39->channel__ = r8;
	r39->alphaCutoff__ = r60;
	r39->smoothing__ = r59;
	r36 = r6->glyphs;
	if( r36 == NULL ) hl_null_access();
	r20 = true;
	r42 = hl_alloc_dynbool(r20);
	r36->smooth = r42;
	r36 = r6->glyphs;
	if( r36 == NULL ) hl_null_access();
	r43 = h2d_Drawable_addShader(((h2d__Drawable)r36),((hxsl__Shader)r39));
	r40 = (h3d__shader__SignedDistanceField)r43;
	label$4f418b7_23_549:
	r36 = r6->glyphs;
	if( r36 == NULL ) hl_null_access();
	r44 = r36->curColor;
	if( r35 == NULL ) hl_null_access();
	r45 = r35->curColor;
	if( r44 == NULL ) hl_null_access();
	if( r45 == NULL ) hl_null_access();
	r59 = r45->x;
	r44->x = r59;
	r59 = r45->y;
	r44->y = r59;
	r59 = r45->z;
	r44->z = r59;
	r59 = r45->w;
	r44->w = r59;
	r25 = r6->elements;
	if( r25 == NULL ) hl_null_access();
	r36 = r6->glyphs;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r36));
	goto label$4f418b7_23_593;
	label$4f418b7_23_569:
	if( r12 ) goto label$4f418b7_23_585;
	r35 = r0->glyphs;
	if( r35 == NULL ) hl_null_access();
	r44 = r35->curColor;
	r45 = (h3d__Vector)hl_alloc_obj(&t$h3d_Vector);
	if( r44 == NULL ) hl_null_access();
	r59 = r44->x;
	r52 = &r59;
	r60 = r44->y;
	r53 = &r60;
	r61 = r44->z;
	r54 = &r61;
	r62 = r44->w;
	r55 = &r62;
	h3d_Vector_new(r45,r52,r53,r54,r55);
	r12 = r45;
	label$4f418b7_23_585:
	r35 = r0->glyphs;
	if( r35 == NULL ) hl_null_access();
	r44 = r35->curColor;
	if( r44 == NULL ) hl_null_access();
	r63 = r44->w;
	r64 = Std_parseFloat(r50);
	r63 = r63 * r64;
	r44->w = r63;
	label$4f418b7_23_593:
	goto label$4f418b7_23_411;
	label$4f418b7_23_594:
	goto label$4f418b7_23_1032;
	label$4f418b7_23_595:
	r65 = r0->loadImage;
	if( r65 == NULL ) hl_null_access();
	r17 = (String)s$src;
	r17 = Xml_get(r1,r17);
	r37 = r65->hasValue ? ((h2d__Tile (*)(vdynamic*,String))r65->fun)((vdynamic*)r65->value,r17) : ((h2d__Tile (*)(String))r65->fun)(r17);
	if( r37 ) goto label$4f418b7_23_609;
	r8 = 16711935;
	r10 = 8;
	r56 = hl_alloc_dynamic(&t$_i32);
	r56->v.i = r10;
	r10 = 8;
	r57 = hl_alloc_dynamic(&t$_i32);
	r57->v.i = r10;
	r67 = NULL;
	r66 = h2d_Tile_fromColor(r8,r56,r57,r67);
	r37 = r66;
	label$4f418b7_23_609:
	r63 = r0->yPos;
	r68 = r0->imageVerticalAlign;
	if( r68 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r68);
	switch(r8) {
		default:
			goto label$4f418b7_23_651;
		case 0:
			goto label$4f418b7_23_651;
		case 1:
			if( r5 == NULL ) hl_null_access();
			r8 = r0->sizePos;
			r10 = r5->length;
			if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_622;
			r28 = NULL;
			goto label$4f418b7_23_625;
			label$4f418b7_23_622:
			r26 = r5->array;
			r15 = ((vdynamic**)(r26 + 1))[r8];
			r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
			label$4f418b7_23_625:
			if( r28 == NULL ) hl_null_access();
			r69 = hl_vfields(r28)[0] ? (*(double*)(hl_vfields(r28)[0])) : (double)hl_dyn_getd(r28->value,-67041115/*baseLine*/);
			if( r37 == NULL ) hl_null_access();
			r70 = r37->height;
			r69 = r69 - r70;
			r64 = r63 + r69;
			r63 = r64;
			goto label$4f418b7_23_651;
		case 2:
			if( r5 == NULL ) hl_null_access();
			r8 = r0->sizePos;
			r10 = r5->length;
			if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_639;
			r28 = NULL;
			goto label$4f418b7_23_642;
			label$4f418b7_23_639:
			r26 = r5->array;
			r15 = ((vdynamic**)(r26 + 1))[r8];
			r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
			label$4f418b7_23_642:
			if( r28 == NULL ) hl_null_access();
			r69 = hl_vfields(r28)[0] ? (*(double*)(hl_vfields(r28)[0])) : (double)hl_dyn_getd(r28->value,-67041115/*baseLine*/);
			if( r37 == NULL ) hl_null_access();
			r70 = r37->height;
			r71 = 2.;
			r70 = r70 / r71;
			r69 = r69 - r70;
			r64 = r63 + r69;
			r63 = r64;
	}
	label$4f418b7_23_651:
	if( r37 == NULL ) hl_null_access();
	r69 = r37->dy;
	r64 = r63 + r69;
	r69 = r0->calcYMin;
	if( !(r64 < r69) ) goto label$4f418b7_23_659;
	r69 = r37->dy;
	r64 = r63 + r69;
	r0->calcYMin = r64;
	label$4f418b7_23_659:
	if( !r4 ) goto label$4f418b7_23_672;
	r72 = (h2d__Bitmap)hl_alloc_obj(&t$h2d_Bitmap);
	h2d_Bitmap_new(r72,r37,((h2d__Object)r0));
	r20 = true;
	r72->posChanged = r20;
	r64 = r0->xPos;
	r72->x = r64;
	r20 = true;
	r72->posChanged = r20;
	r72->y = r63;
	r25 = r0->elements;
	if( r25 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r72));
	label$4f418b7_23_672:
	r20 = false;
	r0->newLine = r20;
	r8 = -1;
	r0->prevChar = r8;
	r64 = r0->xPos;
	r69 = r37->width;
	r70 = r0->imageSpacing;
	r69 = r69 + r70;
	r64 = r64 + r69;
	r0->xPos = r64;
	goto label$4f418b7_23_1032;
	label$4f418b7_23_683:
	if( r0 == NULL ) hl_null_access();
	r34 = r0->loadFont;
	if( r34 == NULL ) hl_null_access();
	r17 = (String)s$italic;
	r33 = r34->hasValue ? ((h2d__Font (*)(vdynamic*,String))r34->fun)((vdynamic*)r34->value,r17) : ((h2d__Font (*)(String))r34->fun)(r17);
	r2 = r33;
	if( r13 ) goto label$4f418b7_23_692;
	r35 = r0->glyphs;
	r13 = r35;
	label$4f418b7_23_692:
	r35 = r0->glyphs;
	r36 = (h2d__TileGroup)hl_alloc_obj(&t$h2d_TileGroup);
	if( r33 ) goto label$4f418b7_23_697;
	r37 = NULL;
	goto label$4f418b7_23_699;
	label$4f418b7_23_697:
	if( r33 == NULL ) hl_null_access();
	r37 = r33->tile;
	label$4f418b7_23_699:
	h2d_TileGroup_new(r36,r37,((h2d__Object)r0));
	r0->glyphs = r36;
	if( !r33 ) goto label$4f418b7_23_727;
	if( r33 == NULL ) hl_null_access();
	r38 = r33->type;
	if( r38 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r38);
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_727;
	r63 = ((h2d_FontType_SignedDistanceField*)r38)->p2;
	r64 = ((h2d_FontType_SignedDistanceField*)r38)->p1;
	r8 = ((h2d_FontType_SignedDistanceField*)r38)->p0;
	r39 = (h3d__shader__SignedDistanceField)hl_alloc_obj(&t$h3d_shader_SignedDistanceField);
	h3d_shader_SignedDistanceField_new(r39);
	r20 = true;
	r39->constModified = r20;
	r39->channel__ = r8;
	r39->alphaCutoff__ = r64;
	r39->smoothing__ = r63;
	r36 = r0->glyphs;
	if( r36 == NULL ) hl_null_access();
	r20 = true;
	r42 = hl_alloc_dynbool(r20);
	r36->smooth = r42;
	r36 = r0->glyphs;
	if( r36 == NULL ) hl_null_access();
	r43 = h2d_Drawable_addShader(((h2d__Drawable)r36),((hxsl__Shader)r39));
	r40 = (h3d__shader__SignedDistanceField)r43;
	label$4f418b7_23_727:
	r36 = r0->glyphs;
	if( r36 == NULL ) hl_null_access();
	r44 = r36->curColor;
	if( r35 == NULL ) hl_null_access();
	r45 = r35->curColor;
	if( r44 == NULL ) hl_null_access();
	if( r45 == NULL ) hl_null_access();
	r63 = r45->x;
	r44->x = r63;
	r63 = r45->y;
	r44->y = r63;
	r63 = r45->z;
	r44->z = r63;
	r63 = r45->w;
	r44->w = r63;
	r25 = r0->elements;
	if( r25 == NULL ) hl_null_access();
	r36 = r0->glyphs;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r36));
	goto label$4f418b7_23_1032;
	label$4f418b7_23_747:
	r49 = Xml_attributes(r1);
	label$4f418b7_23_748:
	if( r49 == NULL ) hl_null_access();
	if( hl_vfields(r49)[0] ) r20 = ((bool (*)(vdynamic*))hl_vfields(r49)[0])(r49->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r49->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r20 = (bool)ret.v.i;
	}
	if( !r20 ) goto label$4f418b7_23_823;
	if( hl_vfields(r49)[1] ) r17 = ((String (*)(vdynamic*))hl_vfields(r49)[1])(r49->value); else {
		r17 = (String)hl_dyn_call_obj(r49->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
	}
	if( r17 == NULL ) hl_null_access();
	r50 = String_toLowerCase(r17);
	r51 = (String)s$align;
	if( r50 != r51 && (!r50 || !r51 || String___compare(r50,(vdynamic*)r51) != 0) ) goto label$4f418b7_23_822;
	if( r1 == NULL ) hl_null_access();
	r50 = Xml_get(r1,r17);
	if( !r50 ) goto label$4f418b7_23_822;
	if( r50 == NULL ) hl_null_access();
	r51 = String_toLowerCase(r50);
	if( !r51 ) goto label$4f418b7_23_771;
	r8 = r51->length;
	r10 = 6;
	if( r8 != r10 ) goto label$4f418b7_23_771;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("center");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_808;
	label$4f418b7_23_771:
	if( !r51 ) goto label$4f418b7_23_780;
	r8 = r51->length;
	r10 = 4;
	if( r8 != r10 ) goto label$4f418b7_23_780;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("left");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_811;
	label$4f418b7_23_780:
	if( !r51 ) goto label$4f418b7_23_789;
	r8 = r51->length;
	r10 = 16;
	if( r8 != r10 ) goto label$4f418b7_23_789;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("multiline-center");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_814;
	label$4f418b7_23_789:
	if( !r51 ) goto label$4f418b7_23_798;
	r8 = r51->length;
	r10 = 15;
	if( r8 != r10 ) goto label$4f418b7_23_798;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("multiline-right");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_817;
	label$4f418b7_23_798:
	if( !r51 ) goto label$4f418b7_23_807;
	r8 = r51->length;
	r10 = 5;
	if( r8 != r10 ) goto label$4f418b7_23_807;
	r18 = r51->bytes;
	r19 = (vbyte*)USTR("right");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_820;
	label$4f418b7_23_807:
	goto label$4f418b7_23_822;
	label$4f418b7_23_808:
	r46 = (venum*)g$h2d_Align_Center;
	r3 = r46;
	goto label$4f418b7_23_822;
	label$4f418b7_23_811:
	r46 = (venum*)g$h2d_Align_Left;
	r3 = r46;
	goto label$4f418b7_23_822;
	label$4f418b7_23_814:
	r46 = (venum*)g$h2d_Align_MultilineCenter;
	r3 = r46;
	goto label$4f418b7_23_822;
	label$4f418b7_23_817:
	r46 = (venum*)g$h2d_Align_MultilineRight;
	r3 = r46;
	goto label$4f418b7_23_822;
	label$4f418b7_23_820:
	r46 = (venum*)g$h2d_Align_Right;
	r3 = r46;
	label$4f418b7_23_822:
	goto label$4f418b7_23_748;
	label$4f418b7_23_823:
	r20 = r0->newLine;
	if( r20 ) goto label$4f418b7_23_978;
	if( r6 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	if( !r21 ) goto label$4f418b7_23_838;
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r63 = r6->xPos;
	r24 = r6->aInteractive;
	if( r24 == NULL ) hl_null_access();
	r64 = r24->x;
	r63 = r63 - r64;
	r21->width = r63;
	r21 = NULL;
	r6->aInteractive = r21;
	label$4f418b7_23_838:
	r63 = r6->xPos;
	r64 = r6->xMax;
	if( !(r64 < r63) ) goto label$4f418b7_23_843;
	r63 = r6->xPos;
	r6->xMax = r63;
	label$4f418b7_23_843:
	r63 = r6->yPos;
	if( r5 == NULL ) hl_null_access();
	r8 = r6->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_850;
	r28 = NULL;
	goto label$4f418b7_23_853;
	label$4f418b7_23_850:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_853:
	if( r28 == NULL ) hl_null_access();
	r64 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r69 = r6->lineSpacing;
	r64 = r64 + r69;
	r63 = r63 + r64;
	r6->yPos = r63;
	r8 = r6->sizePos;
	++r8;
	r6->sizePos = r8;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_866;
	r28 = NULL;
	goto label$4f418b7_23_869;
	label$4f418b7_23_866:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_869:
	if( r28 == NULL ) hl_null_access();
	r63 = hl_vfields(r28)[2] ? (*(double*)(hl_vfields(r28)[2])) : (double)hl_dyn_getd(r28->value,-362629759/*width*/);
	if( r3 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r3);
	switch(r8) {
		default:
			goto label$4f418b7_23_914;
		case 0:
			r64 = 0.;
			r6->xPos = r64;
			r64 = r6->xMin;
			r69 = 0.;
			if( !(r69 < r64) ) goto label$4f418b7_23_882;
			r64 = 0.;
			r6->xMin = r64;
			label$4f418b7_23_882:
			goto label$4f418b7_23_914;
		case 1:
		case 2:
		case 3:
		case 4:
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 == r47 ) goto label$4f418b7_23_887;
			r47 = (venum*)g$h2d_Align_MultilineRight;
			if( r3 != r47 ) goto label$4f418b7_23_890;
			label$4f418b7_23_887:
			r64 = r6->calcWidth;
			r8 = hl_math_ceil(r64);
			goto label$4f418b7_23_897;
			label$4f418b7_23_890:
			r64 = r6->calcWidth;
			r69 = 0.;
			if( !(r64 < r69) ) goto label$4f418b7_23_895;
			r8 = 0;
			goto label$4f418b7_23_897;
			label$4f418b7_23_895:
			r64 = r6->realMaxWidth;
			r8 = hl_math_ceil(r64);
			label$4f418b7_23_897:
			r47 = (venum*)g$h2d_Align_Center;
			if( r3 == r47 ) goto label$4f418b7_23_901;
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 != r47 ) goto label$4f418b7_23_903;
			label$4f418b7_23_901:
			r64 = 0.5;
			goto label$4f418b7_23_904;
			label$4f418b7_23_903:
			r64 = 1.;
			label$4f418b7_23_904:
			r69 = (double)r8;
			r69 = r69 - r63;
			r69 = r69 * r64;
			r69 = hl_math_ffloor(r69);
			r6->xPos = r69;
			r69 = r6->xPos;
			r70 = r6->xMin;
			if( !(r69 < r70) ) goto label$4f418b7_23_914;
			r69 = r6->xPos;
			r6->xMin = r69;
	}
	label$4f418b7_23_914:
	r25 = r6->aHrefs;
	if( !r25 ) goto label$4f418b7_23_973;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r8 = r25->length;
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_973;
	r21 = (h2d__Interactive)hl_alloc_obj(&t$h2d_Interactive);
	r63 = 0.;
	r8 = r6->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_928;
	r28 = NULL;
	goto label$4f418b7_23_931;
	label$4f418b7_23_928:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_931:
	if( r28 == NULL ) hl_null_access();
	r64 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r29 = NULL;
	h2d_Interactive_new(r21,r63,r64,((h2d__Object)r6),r29);
	r6->aInteractive = r21;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r30 = r6->aHrefs;
	if( r30 == NULL ) hl_null_access();
	r8 = r30->length;
	r10 = 1;
	r8 = r8 - r10;
	r10 = r25->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_947;
	r17 = NULL;
	goto label$4f418b7_23_950;
	label$4f418b7_23_947:
	r26 = r25->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r17 = (String)r15;
	label$4f418b7_23_950:
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r32 = hl_alloc_enum(&t$ctx_d68f9c9,0);
	((Enumt$ctx_d68f9c9*)r32)->p0 = (h2d__HtmlText)r6;
	((Enumt$ctx_d68f9c9*)r32)->p1 = (String)r17;
	r31 = hl_alloc_closure_ptr(&t$fun_25e7e5c,h2d_HtmlText_addNode__$3,r32);
	r21->onClick = r31;
	r21 = r6->aInteractive;
	r63 = r6->xPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->x = r63;
	r21 = r6->aInteractive;
	r63 = r6->yPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->y = r63;
	r25 = r6->elements;
	if( r25 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r21));
	label$4f418b7_23_973:
	r20 = true;
	r0->newLine = r20;
	r8 = -1;
	r0->prevChar = r8;
	goto label$4f418b7_23_1032;
	label$4f418b7_23_978:
	if( r5 == NULL ) hl_null_access();
	r8 = r0->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_984;
	r28 = NULL;
	goto label$4f418b7_23_987;
	label$4f418b7_23_984:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_987:
	if( r28 == NULL ) hl_null_access();
	r63 = hl_vfields(r28)[2] ? (*(double*)(hl_vfields(r28)[2])) : (double)hl_dyn_getd(r28->value,-362629759/*width*/);
	if( r3 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r3);
	switch(r8) {
		default:
			goto label$4f418b7_23_1032;
		case 0:
			r64 = 0.;
			r0->xPos = r64;
			r64 = r0->xMin;
			r69 = 0.;
			if( !(r69 < r64) ) goto label$4f418b7_23_1000;
			r64 = 0.;
			r0->xMin = r64;
			label$4f418b7_23_1000:
			goto label$4f418b7_23_1032;
		case 1:
		case 2:
		case 3:
		case 4:
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 == r47 ) goto label$4f418b7_23_1005;
			r47 = (venum*)g$h2d_Align_MultilineRight;
			if( r3 != r47 ) goto label$4f418b7_23_1008;
			label$4f418b7_23_1005:
			r64 = r0->calcWidth;
			r8 = hl_math_ceil(r64);
			goto label$4f418b7_23_1015;
			label$4f418b7_23_1008:
			r64 = r0->calcWidth;
			r69 = 0.;
			if( !(r64 < r69) ) goto label$4f418b7_23_1013;
			r8 = 0;
			goto label$4f418b7_23_1015;
			label$4f418b7_23_1013:
			r64 = r0->realMaxWidth;
			r8 = hl_math_ceil(r64);
			label$4f418b7_23_1015:
			r47 = (venum*)g$h2d_Align_Center;
			if( r3 == r47 ) goto label$4f418b7_23_1019;
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 != r47 ) goto label$4f418b7_23_1021;
			label$4f418b7_23_1019:
			r64 = 0.5;
			goto label$4f418b7_23_1022;
			label$4f418b7_23_1021:
			r64 = 1.;
			label$4f418b7_23_1022:
			r69 = (double)r8;
			r69 = r69 - r63;
			r69 = r69 * r64;
			r69 = hl_math_ffloor(r69);
			r0->xPos = r69;
			r69 = r0->xPos;
			r70 = r0->xMin;
			if( !(r69 < r70) ) goto label$4f418b7_23_1032;
			r69 = r0->xPos;
			r0->xMin = r69;
	}
	label$4f418b7_23_1032:
	if( r1 == NULL ) hl_null_access();
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Document;
	if( r8 == r10 ) goto label$4f418b7_23_1047;
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Element;
	if( r8 == r10 ) goto label$4f418b7_23_1047;
	r17 = (String)s$925902a;
	r8 = r1->nodeType;
	r50 = _Xml_XmlType_Impl__toString(r8);
	r17 = String___add__(r17,r50);
	r15 = haxe_Exception_thrown(((vdynamic*)r17));
	hl_throw((vdynamic*)r15);
	label$4f418b7_23_1047:
	r73 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
	r25 = r1->children;
	r74 = (hl__types__ArrayDyn)hl_dyn_castp(&r25,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayIterator_new(r73,r74);
	r75 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r73);
	label$4f418b7_23_1052:
	if( r75 == NULL ) hl_null_access();
	if( hl_vfields(r75)[0] ) r20 = ((bool (*)(vdynamic*))hl_vfields(r75)[0])(r75->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r75->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r20 = (bool)ret.v.i;
	}
	if( !r20 ) goto label$4f418b7_23_1059;
	if( hl_vfields(r75)[1] ) r9 = ((Xml (*)(vdynamic*))hl_vfields(r75)[1])(r75->value); else {
		r9 = (Xml)hl_dyn_call_obj(r75->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
	}
	h2d_HtmlText_addNode(r0,r9,r2,r3,r4,r5);
	goto label$4f418b7_23_1052;
	label$4f418b7_23_1059:
	if( !r16 ) goto label$4f418b7_23_1068;
	r8 = r16->length;
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_1068;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("a");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_1078;
	label$4f418b7_23_1068:
	if( !r16 ) goto label$4f418b7_23_1077;
	r8 = r16->length;
	r10 = 1;
	if( r8 != r10 ) goto label$4f418b7_23_1077;
	r18 = r16->bytes;
	r19 = (vbyte*)USTR("p");
	r8 = hl_string_compare(r18,r19,r8);
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_1161;
	label$4f418b7_23_1077:
	goto label$4f418b7_23_1389;
	label$4f418b7_23_1078:
	r25 = r0->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r8 = r25->length;
	r10 = 0;
	if( r10 >= r8 ) goto label$4f418b7_23_1160;
	if( r6 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	if( !r21 ) goto label$4f418b7_23_1096;
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r63 = r6->xPos;
	r24 = r6->aInteractive;
	if( r24 == NULL ) hl_null_access();
	r64 = r24->x;
	r63 = r63 - r64;
	r21->width = r63;
	r21 = NULL;
	r6->aInteractive = r21;
	label$4f418b7_23_1096:
	r25 = r0->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r15 = hl_types_ArrayObj_pop(r25);
	r17 = (String)r15;
	r25 = r6->aHrefs;
	if( !r25 ) goto label$4f418b7_23_1160;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r8 = r25->length;
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_1160;
	r21 = (h2d__Interactive)hl_alloc_obj(&t$h2d_Interactive);
	r63 = 0.;
	if( r5 == NULL ) hl_null_access();
	r8 = r6->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1115;
	r28 = NULL;
	goto label$4f418b7_23_1118;
	label$4f418b7_23_1115:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1118:
	if( r28 == NULL ) hl_null_access();
	r64 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r29 = NULL;
	h2d_Interactive_new(r21,r63,r64,((h2d__Object)r6),r29);
	r6->aInteractive = r21;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r30 = r6->aHrefs;
	if( r30 == NULL ) hl_null_access();
	r8 = r30->length;
	r10 = 1;
	r8 = r8 - r10;
	r10 = r25->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1134;
	r17 = NULL;
	goto label$4f418b7_23_1137;
	label$4f418b7_23_1134:
	r26 = r25->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r17 = (String)r15;
	label$4f418b7_23_1137:
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r32 = hl_alloc_enum(&t$ctx_d68f9c9,0);
	((Enumt$ctx_d68f9c9*)r32)->p0 = (h2d__HtmlText)r6;
	((Enumt$ctx_d68f9c9*)r32)->p1 = (String)r17;
	r31 = hl_alloc_closure_ptr(&t$fun_25e7e5c,h2d_HtmlText_addNode__$4,r32);
	r21->onClick = r31;
	r21 = r6->aInteractive;
	r63 = r6->xPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->x = r63;
	r21 = r6->aInteractive;
	r63 = r6->yPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->y = r63;
	r25 = r6->elements;
	if( r25 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r21));
	label$4f418b7_23_1160:
	goto label$4f418b7_23_1389;
	label$4f418b7_23_1161:
	r20 = r0->newLine;
	if( !r20 ) goto label$4f418b7_23_1218;
	if( r5 == NULL ) hl_null_access();
	r8 = r0->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1169;
	r28 = NULL;
	goto label$4f418b7_23_1172;
	label$4f418b7_23_1169:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1172:
	if( r28 == NULL ) hl_null_access();
	r63 = hl_vfields(r28)[2] ? (*(double*)(hl_vfields(r28)[2])) : (double)hl_dyn_getd(r28->value,-362629759/*width*/);
	if( r14 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r14);
	switch(r8) {
		default:
			goto label$4f418b7_23_1217;
		case 0:
			r64 = 0.;
			r0->xPos = r64;
			r64 = r0->xMin;
			r69 = 0.;
			if( !(r69 < r64) ) goto label$4f418b7_23_1185;
			r64 = 0.;
			r0->xMin = r64;
			label$4f418b7_23_1185:
			goto label$4f418b7_23_1217;
		case 1:
		case 2:
		case 3:
		case 4:
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r14 == r47 ) goto label$4f418b7_23_1190;
			r47 = (venum*)g$h2d_Align_MultilineRight;
			if( r14 != r47 ) goto label$4f418b7_23_1193;
			label$4f418b7_23_1190:
			r64 = r0->calcWidth;
			r8 = hl_math_ceil(r64);
			goto label$4f418b7_23_1200;
			label$4f418b7_23_1193:
			r64 = r0->calcWidth;
			r69 = 0.;
			if( !(r64 < r69) ) goto label$4f418b7_23_1198;
			r8 = 0;
			goto label$4f418b7_23_1200;
			label$4f418b7_23_1198:
			r64 = r0->realMaxWidth;
			r8 = hl_math_ceil(r64);
			label$4f418b7_23_1200:
			r47 = (venum*)g$h2d_Align_Center;
			if( r14 == r47 ) goto label$4f418b7_23_1204;
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r14 != r47 ) goto label$4f418b7_23_1206;
			label$4f418b7_23_1204:
			r64 = 0.5;
			goto label$4f418b7_23_1207;
			label$4f418b7_23_1206:
			r64 = 1.;
			label$4f418b7_23_1207:
			r69 = (double)r8;
			r69 = r69 - r63;
			r69 = r69 * r64;
			r69 = hl_math_ffloor(r69);
			r0->xPos = r69;
			r69 = r0->xPos;
			r70 = r0->xMin;
			if( !(r69 < r70) ) goto label$4f418b7_23_1217;
			r69 = r0->xPos;
			r0->xMin = r69;
	}
	label$4f418b7_23_1217:
	goto label$4f418b7_23_1389;
	label$4f418b7_23_1218:
	r8 = r0->sizePos;
	if( r5 == NULL ) hl_null_access();
	r10 = r5->length;
	r76 = 2;
	r10 = r10 - r76;
	if( r8 < r10 ) goto label$4f418b7_23_1238;
	r8 = r0->sizePos;
	r10 = 1;
	r8 = r8 + r10;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1231;
	r28 = NULL;
	goto label$4f418b7_23_1234;
	label$4f418b7_23_1231:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1234:
	if( r28 == NULL ) hl_null_access();
	r63 = hl_vfields(r28)[2] ? (*(double*)(hl_vfields(r28)[2])) : (double)hl_dyn_getd(r28->value,-362629759/*width*/);
	r64 = 0.;
	if( r63 == r64 ) goto label$4f418b7_23_1389;
	label$4f418b7_23_1238:
	if( r6 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	if( !r21 ) goto label$4f418b7_23_1251;
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r63 = r6->xPos;
	r24 = r6->aInteractive;
	if( r24 == NULL ) hl_null_access();
	r64 = r24->x;
	r63 = r63 - r64;
	r21->width = r63;
	r21 = NULL;
	r6->aInteractive = r21;
	label$4f418b7_23_1251:
	r63 = r6->xPos;
	r64 = r6->xMax;
	if( !(r64 < r63) ) goto label$4f418b7_23_1256;
	r63 = r6->xPos;
	r6->xMax = r63;
	label$4f418b7_23_1256:
	r63 = r6->yPos;
	r8 = r6->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1262;
	r28 = NULL;
	goto label$4f418b7_23_1265;
	label$4f418b7_23_1262:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1265:
	if( r28 == NULL ) hl_null_access();
	r64 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r69 = r6->lineSpacing;
	r64 = r64 + r69;
	r63 = r63 + r64;
	r6->yPos = r63;
	r8 = r6->sizePos;
	++r8;
	r6->sizePos = r8;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1278;
	r28 = NULL;
	goto label$4f418b7_23_1281;
	label$4f418b7_23_1278:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1281:
	if( r28 == NULL ) hl_null_access();
	r63 = hl_vfields(r28)[2] ? (*(double*)(hl_vfields(r28)[2])) : (double)hl_dyn_getd(r28->value,-362629759/*width*/);
	if( r14 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r14);
	switch(r8) {
		default:
			goto label$4f418b7_23_1326;
		case 0:
			r64 = 0.;
			r6->xPos = r64;
			r64 = r6->xMin;
			r69 = 0.;
			if( !(r69 < r64) ) goto label$4f418b7_23_1294;
			r64 = 0.;
			r6->xMin = r64;
			label$4f418b7_23_1294:
			goto label$4f418b7_23_1326;
		case 1:
		case 2:
		case 3:
		case 4:
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r14 == r47 ) goto label$4f418b7_23_1299;
			r47 = (venum*)g$h2d_Align_MultilineRight;
			if( r14 != r47 ) goto label$4f418b7_23_1302;
			label$4f418b7_23_1299:
			r64 = r6->calcWidth;
			r8 = hl_math_ceil(r64);
			goto label$4f418b7_23_1309;
			label$4f418b7_23_1302:
			r64 = r6->calcWidth;
			r69 = 0.;
			if( !(r64 < r69) ) goto label$4f418b7_23_1307;
			r8 = 0;
			goto label$4f418b7_23_1309;
			label$4f418b7_23_1307:
			r64 = r6->realMaxWidth;
			r8 = hl_math_ceil(r64);
			label$4f418b7_23_1309:
			r47 = (venum*)g$h2d_Align_Center;
			if( r14 == r47 ) goto label$4f418b7_23_1313;
			r47 = (venum*)g$h2d_Align_MultilineCenter;
			if( r14 != r47 ) goto label$4f418b7_23_1315;
			label$4f418b7_23_1313:
			r64 = 0.5;
			goto label$4f418b7_23_1316;
			label$4f418b7_23_1315:
			r64 = 1.;
			label$4f418b7_23_1316:
			r69 = (double)r8;
			r69 = r69 - r63;
			r69 = r69 * r64;
			r69 = hl_math_ffloor(r69);
			r6->xPos = r69;
			r69 = r6->xPos;
			r70 = r6->xMin;
			if( !(r69 < r70) ) goto label$4f418b7_23_1326;
			r69 = r6->xPos;
			r6->xMin = r69;
	}
	label$4f418b7_23_1326:
	r25 = r6->aHrefs;
	if( !r25 ) goto label$4f418b7_23_1385;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r8 = r25->length;
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_1385;
	r21 = (h2d__Interactive)hl_alloc_obj(&t$h2d_Interactive);
	r63 = 0.;
	r8 = r6->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1340;
	r28 = NULL;
	goto label$4f418b7_23_1343;
	label$4f418b7_23_1340:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1343:
	if( r28 == NULL ) hl_null_access();
	r64 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r29 = NULL;
	h2d_Interactive_new(r21,r63,r64,((h2d__Object)r6),r29);
	r6->aInteractive = r21;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r30 = r6->aHrefs;
	if( r30 == NULL ) hl_null_access();
	r8 = r30->length;
	r10 = 1;
	r8 = r8 - r10;
	r10 = r25->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1359;
	r17 = NULL;
	goto label$4f418b7_23_1362;
	label$4f418b7_23_1359:
	r26 = r25->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r17 = (String)r15;
	label$4f418b7_23_1362:
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r32 = hl_alloc_enum(&t$ctx_d68f9c9,0);
	((Enumt$ctx_d68f9c9*)r32)->p0 = (h2d__HtmlText)r6;
	((Enumt$ctx_d68f9c9*)r32)->p1 = (String)r17;
	r31 = hl_alloc_closure_ptr(&t$fun_25e7e5c,h2d_HtmlText_addNode__$5,r32);
	r21->onClick = r31;
	r21 = r6->aInteractive;
	r63 = r6->xPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->x = r63;
	r21 = r6->aInteractive;
	r63 = r6->yPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->y = r63;
	r25 = r6->elements;
	if( r25 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	r8 = hl_types_ArrayObj_push(r25,((vdynamic*)r21));
	label$4f418b7_23_1385:
	r20 = true;
	r0->newLine = r20;
	r8 = -1;
	r0->prevChar = r8;
	label$4f418b7_23_1389:
	if( !r13 ) goto label$4f418b7_23_1391;
	r0->glyphs = r13;
	label$4f418b7_23_1391:
	if( !r12 ) goto label$4f418b7_23_1405;
	r35 = r0->glyphs;
	if( r35 == NULL ) hl_null_access();
	r44 = r35->curColor;
	if( r44 == NULL ) hl_null_access();
	if( r12 == NULL ) hl_null_access();
	r63 = r12->x;
	r44->x = r63;
	r63 = r12->y;
	r44->y = r63;
	r63 = r12->z;
	r44->z = r63;
	r63 = r12->w;
	r44->w = r63;
	label$4f418b7_23_1405:
	goto label$4f418b7_23_1707;
	label$4f418b7_23_1406:
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Document;
	if( r8 == r10 ) goto label$4f418b7_23_1414;
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Element;
	if( r8 != r10 ) goto label$4f418b7_23_1420;
	label$4f418b7_23_1414:
	r16 = (String)s$Bad_node_type_unexpected_;
	r8 = r1->nodeType;
	r17 = _Xml_XmlType_Impl__toString(r8);
	r16 = String___add__(r16,r17);
	r15 = haxe_Exception_thrown(((vdynamic*)r16));
	hl_throw((vdynamic*)r15);
	label$4f418b7_23_1420:
	r16 = r1->nodeValue;
	if( r16 == NULL ) hl_null_access();
	r8 = r16->length;
	r10 = 0;
	if( r8 == r10 ) goto label$4f418b7_23_1707;
	r20 = false;
	r0->newLine = r20;
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Document;
	if( r8 == r10 ) goto label$4f418b7_23_1435;
	r8 = r1->nodeType;
	r11 = ($Xml)g$_Xml;
	r10 = r11->Element;
	if( r8 != r10 ) goto label$4f418b7_23_1441;
	label$4f418b7_23_1435:
	r16 = (String)s$Bad_node_type_unexpected_;
	r8 = r1->nodeType;
	r17 = _Xml_XmlType_Impl__toString(r8);
	r16 = String___add__(r16,r17);
	r15 = haxe_Exception_thrown(((vdynamic*)r16));
	hl_throw((vdynamic*)r15);
	label$4f418b7_23_1441:
	r16 = r1->nodeValue;
	if( r5 == NULL ) hl_null_access();
	r8 = r0->sizePos;
	r10 = r5->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$4f418b7_23_1448;
	r28 = NULL;
	goto label$4f418b7_23_1451;
	label$4f418b7_23_1448:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r8];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1451:
	if( r28 == NULL ) hl_null_access();
	r63 = hl_vfields(r28)[0] ? (*(double*)(hl_vfields(r28)[0])) : (double)hl_dyn_getd(r28->value,-67041115/*baseLine*/);
	if( r2 == NULL ) hl_null_access();
	r64 = r2->baseLine;
	r63 = r63 - r64;
	r8 = 0;
	if( r16 == NULL ) hl_null_access();
	r10 = r16->length;
	label$4f418b7_23_1459:
	if( r8 >= r10 ) goto label$4f418b7_23_1707;
	r76 = r8;
	++r8;
	if( r16 == NULL ) hl_null_access();
	r56 = String_charCodeAt(r16,r76);
	r77 = 10;
	r78 = hl_alloc_dynamic(&t$_i32);
	r78->v.i = r77;
	if( r56 != r78 && (!r56 || !r78 || (r56->v.i != r78->v.i)) ) goto label$4f418b7_23_1633;
	if( r6 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	if( !r21 ) goto label$4f418b7_23_1481;
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r64 = r6->xPos;
	r24 = r6->aInteractive;
	if( r24 == NULL ) hl_null_access();
	r69 = r24->x;
	r64 = r64 - r69;
	r21->width = r64;
	r21 = NULL;
	r6->aInteractive = r21;
	label$4f418b7_23_1481:
	r64 = r6->xPos;
	r69 = r6->xMax;
	if( !(r69 < r64) ) goto label$4f418b7_23_1486;
	r64 = r6->xPos;
	r6->xMax = r64;
	label$4f418b7_23_1486:
	r64 = r6->yPos;
	if( r5 == NULL ) hl_null_access();
	r77 = r6->sizePos;
	r79 = r5->length;
	if( ((unsigned)r77) < ((unsigned)r79) ) goto label$4f418b7_23_1493;
	r28 = NULL;
	goto label$4f418b7_23_1496;
	label$4f418b7_23_1493:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r77];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1496:
	if( r28 == NULL ) hl_null_access();
	r69 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r70 = r6->lineSpacing;
	r69 = r69 + r70;
	r64 = r64 + r69;
	r6->yPos = r64;
	r77 = r6->sizePos;
	++r77;
	r6->sizePos = r77;
	r79 = r5->length;
	if( ((unsigned)r77) < ((unsigned)r79) ) goto label$4f418b7_23_1509;
	r28 = NULL;
	goto label$4f418b7_23_1512;
	label$4f418b7_23_1509:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r77];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1512:
	if( r28 == NULL ) hl_null_access();
	r64 = hl_vfields(r28)[2] ? (*(double*)(hl_vfields(r28)[2])) : (double)hl_dyn_getd(r28->value,-362629759/*width*/);
	if( r3 == NULL ) hl_null_access();
	r77 = HL__ENUM_INDEX__(r3);
	switch(r77) {
		default:
			goto label$4f418b7_23_1557;
		case 0:
			r69 = 0.;
			r6->xPos = r69;
			r69 = r6->xMin;
			r70 = 0.;
			if( !(r70 < r69) ) goto label$4f418b7_23_1525;
			r69 = 0.;
			r6->xMin = r69;
			label$4f418b7_23_1525:
			goto label$4f418b7_23_1557;
		case 1:
		case 2:
		case 3:
		case 4:
			r46 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 == r46 ) goto label$4f418b7_23_1530;
			r46 = (venum*)g$h2d_Align_MultilineRight;
			if( r3 != r46 ) goto label$4f418b7_23_1533;
			label$4f418b7_23_1530:
			r69 = r6->calcWidth;
			r77 = hl_math_ceil(r69);
			goto label$4f418b7_23_1540;
			label$4f418b7_23_1533:
			r69 = r6->calcWidth;
			r70 = 0.;
			if( !(r69 < r70) ) goto label$4f418b7_23_1538;
			r77 = 0;
			goto label$4f418b7_23_1540;
			label$4f418b7_23_1538:
			r69 = r6->realMaxWidth;
			r77 = hl_math_ceil(r69);
			label$4f418b7_23_1540:
			r46 = (venum*)g$h2d_Align_Center;
			if( r3 == r46 ) goto label$4f418b7_23_1544;
			r46 = (venum*)g$h2d_Align_MultilineCenter;
			if( r3 != r46 ) goto label$4f418b7_23_1546;
			label$4f418b7_23_1544:
			r69 = 0.5;
			goto label$4f418b7_23_1547;
			label$4f418b7_23_1546:
			r69 = 1.;
			label$4f418b7_23_1547:
			r70 = (double)r77;
			r70 = r70 - r64;
			r70 = r70 * r69;
			r70 = hl_math_ffloor(r70);
			r6->xPos = r70;
			r70 = r6->xPos;
			r71 = r6->xMin;
			if( !(r70 < r71) ) goto label$4f418b7_23_1557;
			r70 = r6->xPos;
			r6->xMin = r70;
	}
	label$4f418b7_23_1557:
	r25 = r6->aHrefs;
	if( !r25 ) goto label$4f418b7_23_1616;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r77 = r25->length;
	r79 = 0;
	if( r77 == r79 ) goto label$4f418b7_23_1616;
	r21 = (h2d__Interactive)hl_alloc_obj(&t$h2d_Interactive);
	r64 = 0.;
	r77 = r6->sizePos;
	r79 = r5->length;
	if( ((unsigned)r77) < ((unsigned)r79) ) goto label$4f418b7_23_1571;
	r28 = NULL;
	goto label$4f418b7_23_1574;
	label$4f418b7_23_1571:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r77];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1574:
	if( r28 == NULL ) hl_null_access();
	r69 = hl_vfields(r28)[1] ? (*(double*)(hl_vfields(r28)[1])) : (double)hl_dyn_getd(r28->value,38537191/*height*/);
	r29 = NULL;
	h2d_Interactive_new(r21,r64,r69,((h2d__Object)r6),r29);
	r6->aInteractive = r21;
	r25 = r6->aHrefs;
	if( r25 == NULL ) hl_null_access();
	r30 = r6->aHrefs;
	if( r30 == NULL ) hl_null_access();
	r77 = r30->length;
	r79 = 1;
	r77 = r77 - r79;
	r79 = r25->length;
	if( ((unsigned)r77) < ((unsigned)r79) ) goto label$4f418b7_23_1590;
	r17 = NULL;
	goto label$4f418b7_23_1593;
	label$4f418b7_23_1590:
	r26 = r25->array;
	r15 = ((vdynamic**)(r26 + 1))[r77];
	r17 = (String)r15;
	label$4f418b7_23_1593:
	r21 = r6->aInteractive;
	if( r21 == NULL ) hl_null_access();
	r32 = hl_alloc_enum(&t$ctx_d68f9c9,0);
	((Enumt$ctx_d68f9c9*)r32)->p0 = (h2d__HtmlText)r6;
	((Enumt$ctx_d68f9c9*)r32)->p1 = (String)r17;
	r31 = hl_alloc_closure_ptr(&t$fun_25e7e5c,h2d_HtmlText_addNode__$6,r32);
	r21->onClick = r31;
	r21 = r6->aInteractive;
	r64 = r6->xPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->x = r64;
	r21 = r6->aInteractive;
	r64 = r6->yPos;
	if( r21 == NULL ) hl_null_access();
	r20 = true;
	r21->posChanged = r20;
	r21->y = r64;
	r25 = r6->elements;
	if( r25 == NULL ) hl_null_access();
	r21 = r6->aInteractive;
	r77 = hl_types_ArrayObj_push(r25,((vdynamic*)r21));
	label$4f418b7_23_1616:
	r77 = r0->sizePos;
	r79 = r5->length;
	if( ((unsigned)r77) < ((unsigned)r79) ) goto label$4f418b7_23_1621;
	r28 = NULL;
	goto label$4f418b7_23_1624;
	label$4f418b7_23_1621:
	r26 = r5->array;
	r15 = ((vdynamic**)(r26 + 1))[r77];
	r28 = hl_to_virtual(&t$vrt_9a44900,(vdynamic*)r15);
	label$4f418b7_23_1624:
	if( r28 == NULL ) hl_null_access();
	r64 = hl_vfields(r28)[0] ? (*(double*)(hl_vfields(r28)[0])) : (double)hl_dyn_getd(r28->value,-67041115/*baseLine*/);
	if( r2 == NULL ) hl_null_access();
	r69 = r2->baseLine;
	r64 = r64 - r69;
	r63 = r64;
	r77 = -1;
	r0->prevChar = r77;
	goto label$4f418b7_23_1459;
	label$4f418b7_23_1633:
	r77 = r56 ? r56->v.i : 0;
	if( r2 == NULL ) hl_null_access();
	r80 = r2->glyphs;
	if( r80 == NULL ) hl_null_access();
	r15 = haxe_ds_IntMap_get(r80,r77);
	r81 = (h2d__FontChar)r15;
	if( r81 ) goto label$4f418b7_23_1655;
	r83 = r2->charset;
	if( r83 == NULL ) hl_null_access();
	r80 = r2->glyphs;
	r15 = hxd_Charset_resolveChar(r83,r77,r80);
	r82 = (h2d__FontChar)r15;
	r81 = r82;
	if( r82 ) goto label$4f418b7_23_1655;
	r84 = 13;
	if( r77 == r84 ) goto label$4f418b7_23_1651;
	r84 = 10;
	if( r77 != r84 ) goto label$4f418b7_23_1653;
	label$4f418b7_23_1651:
	r82 = r2->nullChar;
	goto label$4f418b7_23_1654;
	label$4f418b7_23_1653:
	r82 = r2->defaultChar;
	label$4f418b7_23_1654:
	r81 = r82;
	label$4f418b7_23_1655:
	if( !r81 ) goto label$4f418b7_23_1704;
	r64 = r0->xPos;
	if( r81 == NULL ) hl_null_access();
	r79 = r0->prevChar;
	r69 = h2d_FontChar_getKerningOffset(r81,r79);
	r64 = r64 + r69;
	r0->xPos = r64;
	if( !r4 ) goto label$4f418b7_23_1684;
	r13 = r0->glyphs;
	if( r13 == NULL ) hl_null_access();
	r85 = r13->content;
	if( r85 == NULL ) hl_null_access();
	r64 = r0->xPos;
	r69 = r0->yPos;
	r69 = r69 + r63;
	r12 = r13->curColor;
	if( r12 == NULL ) hl_null_access();
	r70 = r12->x;
	r12 = r13->curColor;
	if( r12 == NULL ) hl_null_access();
	r71 = r12->y;
	r12 = r13->curColor;
	if( r12 == NULL ) hl_null_access();
	r86 = r12->z;
	r12 = r13->curColor;
	if( r12 == NULL ) hl_null_access();
	r87 = r12->w;
	r37 = r81->_t;
	h2d_TileLayerContent_add(r85,r64,r69,r70,r71,r86,r87,r37);
	label$4f418b7_23_1684:
	r64 = r0->yPos;
	r69 = 0.;
	if( r64 != r69 ) goto label$4f418b7_23_1698;
	r37 = r81->_t;
	if( r37 == NULL ) hl_null_access();
	r64 = r37->dy;
	r64 = r64 + r63;
	r69 = r0->calcYMin;
	if( !(r64 < r69) ) goto label$4f418b7_23_1698;
	r37 = r81->_t;
	if( r37 == NULL ) hl_null_access();
	r64 = r37->dy;
	r64 = r64 + r63;
	r0->calcYMin = r64;
	label$4f418b7_23_1698:
	r64 = r0->xPos;
	r69 = r81->width;
	r70 = r0->letterSpacing;
	r69 = r69 + r70;
	r64 = r64 + r69;
	r0->xPos = r64;
	label$4f418b7_23_1704:
	r79 = r56 ? r56->v.i : 0;
	r0->prevChar = r79;
	goto label$4f418b7_23_1459;
	label$4f418b7_23_1707:
	return;
}

int h2d_HtmlText_set_textColor(h2d__HtmlText r0,int r1) {
	int r3;
	r3 = r0->textColor;
	if( r3 != r1 ) goto label$4f418b7_24_3;
	return r1;
	label$4f418b7_24_3:
	r0->textColor = r1;
	h2d_Text_rebuild(((h2d__Text)r0));
	return r1;
}

void h2d_HtmlText_getBoundsRec(h2d__HtmlText r0,h2d__Object r1,h2d__col__Bounds r2,bool r3) {
	hl__types__ArrayObj r7;
	bool r5;
	h2d__Object r9;
	h2d__$Bitmap r12;
	vdynamic *r10;
	varray *r11;
	int r6, r8;
	if( !r3 ) goto label$4f418b7_25_22;
	r6 = 0;
	r7 = r0->elements;
	label$4f418b7_25_3:
	if( r7 == NULL ) hl_null_access();
	r8 = r7->length;
	if( r6 >= r8 ) goto label$4f418b7_25_22;
	r8 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r8) ) goto label$4f418b7_25_11;
	r9 = NULL;
	goto label$4f418b7_25_14;
	label$4f418b7_25_11:
	r11 = r7->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r9 = (h2d__Object)r10;
	label$4f418b7_25_14:
	++r6;
	r12 = (h2d__$Bitmap)g$_h2d_Bitmap;
	r5 = Std_isOfType(((vdynamic*)r9),((vdynamic*)r12));
	if( !r5 ) goto label$4f418b7_25_21;
	if( r9 == NULL ) hl_null_access();
	r5 = false;
	r5 = h2d_Object_set_visible(r9,r5);
	label$4f418b7_25_21:
	goto label$4f418b7_25_3;
	label$4f418b7_25_22:
	h2d_Text_getBoundsRec(((h2d__Text)r0),r1,r2,r3);
	if( !r3 ) goto label$4f418b7_25_42;
	r6 = 0;
	r7 = r0->elements;
	label$4f418b7_25_26:
	if( r7 == NULL ) hl_null_access();
	r8 = r7->length;
	if( r6 >= r8 ) goto label$4f418b7_25_42;
	r8 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r8) ) goto label$4f418b7_25_34;
	r9 = NULL;
	goto label$4f418b7_25_37;
	label$4f418b7_25_34:
	r11 = r7->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r9 = (h2d__Object)r10;
	label$4f418b7_25_37:
	++r6;
	if( r9 == NULL ) hl_null_access();
	r5 = true;
	r5 = h2d_Object_set_visible(r9,r5);
	goto label$4f418b7_25_26;
	label$4f418b7_25_42:
	return;
}

void h2d_HtmlText_new(h2d__HtmlText r0,h2d__Font r1,h2d__Object r2) {
	hl__types__ArrayObj r7;
	venum *r11, *r12;
	hl_type *r9;
	bool r14;
	double r13;
	vclosure *r3, *r4, *r5, *r6;
	int r10;
	varray *r8;
	r3 = r0->loadImage;
	if( r3 ) goto label$4f418b7_26_4;
	r3 = hl_alloc_closure_ptr(&t$fun_4fb336a,h2d_HtmlText_loadImage,r0);
	r0->loadImage = r3;
	label$4f418b7_26_4:
	r4 = r0->loadFont;
	if( r4 ) goto label$4f418b7_26_8;
	r4 = hl_alloc_closure_ptr(&t$fun_75db657,h2d_HtmlText_loadFont,r0);
	r0->loadFont = r4;
	label$4f418b7_26_8:
	r5 = r0->onHyperlink;
	if( r5 ) goto label$4f418b7_26_12;
	r5 = hl_alloc_closure_ptr(&t$fun_a333c47,h2d_HtmlText_onHyperlink,r0);
	r0->onHyperlink = r5;
	label$4f418b7_26_12:
	r6 = r0->formatText;
	if( r6 ) goto label$4f418b7_26_16;
	r6 = hl_alloc_closure_ptr(&t$fun_fb4afe0,h2d_HtmlText_formatText,r0);
	r0->formatText = r6;
	label$4f418b7_26_16:
	r9 = &t$h2d_Object;
	r10 = 0;
	r8 = hl_alloc_array(r9,r10);
	r7 = hl_types_ArrayObj_alloc(r8);
	r0->elements = r7;
	r11 = (venum*)g$h2d_ImageVerticalAlign_Bottom;
	r0->imageVerticalAlign = r11;
	r12 = (venum*)g$h2d_LineHeightMode_Accurate;
	r0->lineHeightMode = r12;
	r13 = 1.;
	r0->imageSpacing = r13;
	r14 = true;
	r0->condenseWhite = r14;
	h2d_Text_new(((h2d__Text)r0),r1,r2);
	return;
}

