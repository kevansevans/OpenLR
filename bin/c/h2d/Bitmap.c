// Generated by HLC 4.1.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <h2d/Bitmap.h>
void h2d_Drawable_new(h2d__Drawable,h2d__Object);
h2d__Tile h2d_Bitmap_set_tile(h2d__Bitmap,h2d__Tile);
#include <h2d/col/Bounds.h>
void h2d_Object_getBoundsRec(h2d__Object,h2d__Object,h2d__col__Bounds,bool);
void h2d_Object_addBounds(h2d__Object,h2d__Object,h2d__col__Bounds,double,double,double,double);
void h2d_Object_contentChanged(h2d__Object,h2d__Object);
#include <h2d/RenderContext.h>
void h2d_Drawable_emitTile(h2d__Drawable,h2d__RenderContext,h2d__Tile);
h2d__Tile h2d_Tile_fromColor(int,vdynamic*,vdynamic*,vdynamic*);

void h2d_Bitmap_new(h2d__Bitmap r0,h2d__Tile r1,h2d__Object r2) {
	h2d__Tile r4;
	h2d_Drawable_new(((h2d__Drawable)r0),r2);
	r4 = h2d_Bitmap_set_tile(r0,r1);
	return;
}

void h2d_Bitmap_getBoundsRec(h2d__Bitmap r0,h2d__Object r1,h2d__col__Bounds r2,bool r3) {
	h2d__Tile r5;
	double r7, r8, r9, r10, r11;
	vdynamic *r6;
	h2d_Object_getBoundsRec(((h2d__Object)r0),r1,r2,r3);
	r5 = r0->tile;
	if( !r5 ) goto label$de6668e_2_58;
	r6 = r0->width;
	if( r6 ) goto label$de6668e_2_21;
	r6 = r0->height;
	if( r6 ) goto label$de6668e_2_21;
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->dx;
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->dy;
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r9 = r5->width;
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r10 = r5->height;
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r7,r8,r9,r10);
	goto label$de6668e_2_58;
	label$de6668e_2_21:
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->dx;
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->dy;
	r6 = r0->width;
	if( !r6 ) goto label$de6668e_2_32;
	r6 = r0->width;
	r9 = r6 ? r6->v.d : 0;
	goto label$de6668e_2_42;
	label$de6668e_2_32:
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r9 = r5->width;
	r6 = r0->height;
	r10 = r6 ? r6->v.d : 0;
	r9 = r9 * r10;
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r10 = r5->height;
	r9 = r9 / r10;
	label$de6668e_2_42:
	r6 = r0->height;
	if( !r6 ) goto label$de6668e_2_47;
	r6 = r0->height;
	r10 = r6 ? r6->v.d : 0;
	goto label$de6668e_2_57;
	label$de6668e_2_47:
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r10 = r5->height;
	r6 = r0->width;
	r11 = r6 ? r6->v.d : 0;
	r10 = r10 * r11;
	r5 = r0->tile;
	if( r5 == NULL ) hl_null_access();
	r11 = r5->width;
	r10 = r10 / r11;
	label$de6668e_2_57:
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r7,r8,r9,r10);
	label$de6668e_2_58:
	return;
}

h2d__Tile h2d_Bitmap_set_tile(h2d__Bitmap r0,h2d__Tile r1) {
	h2d__Object r4;
	h2d__Tile r3;
	r3 = r0->tile;
	if( r3 != r1 ) goto label$de6668e_3_3;
	return r1;
	label$de6668e_3_3:
	r0->tile = r1;
	r4 = r0->parentContainer;
	if( !r4 ) goto label$de6668e_3_9;
	r4 = r0->parentContainer;
	if( r4 == NULL ) hl_null_access();
	h2d_Object_contentChanged(r4,((h2d__Object)r0));
	label$de6668e_3_9:
	return r1;
}

void h2d_Bitmap_draw(h2d__Bitmap r0,h2d__RenderContext r1) {
	h2d__Tile r4;
	double r8, r9, r10, r11;
	vdynamic *r3, *r6, *r7;
	int r5;
	r3 = r0->width;
	if( r3 ) goto label$de6668e_4_7;
	r3 = r0->height;
	if( r3 ) goto label$de6668e_4_7;
	r4 = r0->tile;
	h2d_Drawable_emitTile(((h2d__Drawable)r0),r1,r4);
	return;
	label$de6668e_4_7:
	r4 = r0->tile;
	if( r4 ) goto label$de6668e_4_15;
	r5 = 16711935;
	r6 = NULL;
	r7 = NULL;
	r3 = NULL;
	r4 = h2d_Tile_fromColor(r5,r6,r7,r3);
	r4 = h2d_Bitmap_set_tile(r0,r4);
	label$de6668e_4_15:
	r4 = r0->tile;
	if( r4 == NULL ) hl_null_access();
	r8 = r4->width;
	r4 = r0->tile;
	if( r4 == NULL ) hl_null_access();
	r9 = r4->height;
	r4 = r0->tile;
	if( r4 == NULL ) hl_null_access();
	r3 = r0->width;
	if( !r3 ) goto label$de6668e_4_28;
	r3 = r0->width;
	r10 = r3 ? r3->v.d : 0;
	goto label$de6668e_4_32;
	label$de6668e_4_28:
	r3 = r0->height;
	r11 = r3 ? r3->v.d : 0;
	r10 = r8 * r11;
	r10 = r10 / r9;
	label$de6668e_4_32:
	r4->width = r10;
	r4 = r0->tile;
	if( r4 == NULL ) hl_null_access();
	r3 = r0->height;
	if( !r3 ) goto label$de6668e_4_40;
	r3 = r0->height;
	r10 = r3 ? r3->v.d : 0;
	goto label$de6668e_4_44;
	label$de6668e_4_40:
	r3 = r0->width;
	r11 = r3 ? r3->v.d : 0;
	r10 = r9 * r11;
	r10 = r10 / r8;
	label$de6668e_4_44:
	r4->height = r10;
	r4 = r0->tile;
	h2d_Drawable_emitTile(((h2d__Drawable)r0),r1,r4);
	r4 = r0->tile;
	if( r4 == NULL ) hl_null_access();
	r4->width = r8;
	r4 = r0->tile;
	if( r4 == NULL ) hl_null_access();
	r4->height = r9;
	return;
}

