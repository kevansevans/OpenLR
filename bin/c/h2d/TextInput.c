// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <h2d/TextInput.h>
#include <hxd/EventKind.h>
h2d__col__Point h2d_Object_globalToLocal(h2d__Object,h2d__col__Point);
int h2d_TextInput_textPos(h2d__TextInput,double,double);
extern hl_type t$vrt_f651ef3;
extern hl_type t$_i32;
extern venum* g$hxd_EventKind_ERelease;
h2d__Scene h2d_Object_getScene(h2d__Object);
void h2d_Scene_stopDrag(h2d__Scene);
bool h2d_Interactive_hasFocus(h2d__Interactive);
extern venum* g$hxd_EventKind_EFocus;
extern venum* g$hxd_EventKind_EPush;
void h2d_Interactive_focus(h2d__Interactive);
extern hl_type t$h2d_col_Point;
void h2d_col_Point_new(h2d__col__Point,double*,double*);
extern hl_type t$ctx_ac38764;
extern hl_type t$fun_731869e;
void h2d_Scene_startDrag(h2d__Scene,vclosure*,vclosure*,hxd__Event);
void h2d_TextInput_handleKey(h2d__TextInput,hxd__Event);
#include <hl/natives.h>
#include <hxd/Charset.h>
extern venum* g$hxd_EventKind_EKeyDown;
bool h2d_Font_hasChar(h2d__Font,int);
void h2d_TextInput_beforeChange(h2d__TextInput);
bool h2d_TextInput_cutSelection(h2d__TextInput);
String String_substr(String,int,vdynamic*);
String String_fromCharCode(int);
String String___add__(String,String);
String h2d_TextInput_set_text(h2d__TextInput,String);
void h2d_Interactive_blur(h2d__Interactive);
bool hxd_Key_isDown(int);
hxd__Charset hxd_Charset_getDefault(void);
bool hxd_Charset_isSpace(hxd__Charset,int);
extern String s$;
int String___compare(String,vdynamic*);
vvirtual* h2d_TextInput_curHistoryState(h2d__TextInput);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
vdynamic* hl_types_ArrayObj_pop(hl__types__ArrayObj);
extern hl_type t$vrt_8f7336e;
void h2d_TextInput_setState(h2d__TextInput,vvirtual*);
extern hl_type t$String;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
vdynamic* hl_types_ArrayObj_shift(hl__types__ArrayObj);
String h2d_Text_set_text(h2d__Text,String);
h2d__Font h2d_Text_set_font(h2d__Text,h2d__Font);
h2d__Tile h2d_Tile_fromColor(int,vdynamic*,vdynamic*,vdynamic*);
void h2d_Text_initGlyphs(h2d__Text,String,bool*);
double h2d_Text_calcTextWidth(h2d__Text,String);
#include <h2d/RenderContext.h>
double h2d_Text_get_textWidth(h2d__Text);
void h2d_Text_sync(h2d__Text,h2d__RenderContext);
h2d__col__Point h2d_Object_localToGlobal(h2d__Object,h2d__col__Point);
void h2d_RenderContext_pushRenderZone(h2d__RenderContext,double,double,double,double);
void h2d_Drawable_emitTile(h2d__Drawable,h2d__RenderContext,h2d__Tile);
void h2d_Text_draw(h2d__Text,h2d__RenderContext);
void h2d_RenderContext_popRenderZone(h2d__RenderContext);
bool h2d_Object_set_visible(h2d__Object,bool);
void h2d_Interactive_draw(h2d__Interactive,h2d__RenderContext);
void h2d_Object_drawRec(h2d__Object,h2d__RenderContext);
#include <hxd/Cursor.h>
extern hl_type t$fun_0def39d;
extern hl_type t$fun_1df4ca5;
void h2d_Text_new(h2d__Text,h2d__Font,h2d__Object);
extern hl_type t$h2d_Interactive;
void h2d_Interactive_new(h2d__Interactive,double,double,h2d__Object,vvirtual*);
extern venum* g$hxd_Cursor_TextInput;
venum* h2d_Interactive_set_cursor(h2d__Interactive,venum*);
void h2d_Object_addChildAt(h2d__Object,h2d__Object,int);

void h2d_TextInput_new__$2(venum* r0,hxd__Event r1) {
	vvirtual *r10;
	venum *r11, *r12;
	h2d__col__Point r2;
	double r3, r6;
	h2d__Scene r13, r14;
	h2d__TextInput r4;
	int r5, r8, r9;
	r2 = ((Enumt$ctx_ac38764*)r0)->p2;
	if( r2 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r3 = r1->relX;
	r2->x = r3;
	r2 = ((Enumt$ctx_ac38764*)r0)->p2;
	if( r2 == NULL ) hl_null_access();
	r3 = r1->relY;
	r2->y = r3;
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r2 = ((Enumt$ctx_ac38764*)r0)->p2;
	r2 = h2d_Object_globalToLocal(((h2d__Object)r4),r2);
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r2 = ((Enumt$ctx_ac38764*)r0)->p2;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->x;
	r2 = ((Enumt$ctx_ac38764*)r0)->p2;
	if( r2 == NULL ) hl_null_access();
	r6 = r2->y;
	r5 = h2d_TextInput_textPos(r4,r3,r6);
	r9 = ((Enumt$ctx_ac38764*)r0)->p1;
	if( r5 != r9 ) goto label$3fda7ba_1_29;
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r10 = NULL;
	r4->selectionRange = r10;
	goto label$3fda7ba_1_49;
	label$3fda7ba_1_29:
	r9 = ((Enumt$ctx_ac38764*)r0)->p1;
	if( r5 >= r9 ) goto label$3fda7ba_1_40;
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r10 = hl_alloc_virtual(&t$vrt_f651ef3);
	if( hl_vfields(r10)[1] ) *(int*)(hl_vfields(r10)[1]) = (int)r5; else hl_dyn_seti(r10->value,-469011757/*start*/,&t$_i32,r5);
	r8 = ((Enumt$ctx_ac38764*)r0)->p1;
	r8 = r8 - r5;
	if( hl_vfields(r10)[0] ) *(int*)(hl_vfields(r10)[0]) = (int)r8; else hl_dyn_seti(r10->value,-16280745/*length*/,&t$_i32,r8);
	r4->selectionRange = r10;
	goto label$3fda7ba_1_49;
	label$3fda7ba_1_40:
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r10 = hl_alloc_virtual(&t$vrt_f651ef3);
	r8 = ((Enumt$ctx_ac38764*)r0)->p1;
	if( hl_vfields(r10)[1] ) *(int*)(hl_vfields(r10)[1]) = (int)r8; else hl_dyn_seti(r10->value,-469011757/*start*/,&t$_i32,r8);
	r9 = ((Enumt$ctx_ac38764*)r0)->p1;
	r8 = r5 - r9;
	if( hl_vfields(r10)[0] ) *(int*)(hl_vfields(r10)[0]) = (int)r8; else hl_dyn_seti(r10->value,-16280745/*length*/,&t$_i32,r8);
	r4->selectionRange = r10;
	label$3fda7ba_1_49:
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r3 = 0.;
	r4->selectionSize = r3;
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r4->cursorIndex = r5;
	r11 = r1->kind;
	r12 = (venum*)g$hxd_EventKind_ERelease;
	if( r11 == r12 ) goto label$3fda7ba_1_64;
	r4 = ((Enumt$ctx_ac38764*)r0)->p0;
	if( r4 == NULL ) hl_null_access();
	r13 = h2d_Object_getScene(((h2d__Object)r4));
	r14 = ((Enumt$ctx_ac38764*)r0)->p3;
	if( r13 == r14 ) goto label$3fda7ba_1_67;
	label$3fda7ba_1_64:
	r13 = ((Enumt$ctx_ac38764*)r0)->p3;
	if( r13 == NULL ) hl_null_access();
	h2d_Scene_stopDrag(r13);
	label$3fda7ba_1_67:
	return;
}

void h2d_TextInput_new__$1(h2d__TextInput r0,hxd__Event r1) {
	vvirtual *r12;
	venum *r9, *r17;
	bool r5;
	h2d__col__Point r13;
	hxd__Event r4;
	double r10, r11;
	vclosure *r3, *r18;
	h2d__Scene r16;
	double *r14, *r15;
	h2d__Interactive r8;
	int r6, r7;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onPush;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	if( r1 == NULL ) hl_null_access();
	r5 = r1->cancel;
	if( r5 ) goto label$3fda7ba_2_50;
	r6 = r1->button;
	r7 = 0;
	if( r6 != r7 ) goto label$3fda7ba_2_50;
	r8 = r0->interactive;
	if( r8 == NULL ) hl_null_access();
	r5 = h2d_Interactive_hasFocus(r8);
	if( r5 ) goto label$3fda7ba_2_27;
	r9 = (venum*)g$hxd_EventKind_EFocus;
	r1->kind = r9;
	r3 = r0->onFocus;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	r9 = (venum*)g$hxd_EventKind_EPush;
	r1->kind = r9;
	r5 = r1->cancel;
	if( !r5 ) goto label$3fda7ba_2_24;
	return;
	label$3fda7ba_2_24:
	r8 = r0->interactive;
	if( r8 == NULL ) hl_null_access();
	h2d_Interactive_focus(r8);
	label$3fda7ba_2_27:
	r10 = 0.;
	r0->cursorBlink = r10;
	r10 = r1->relX;
	r11 = r1->relY;
	r6 = h2d_TextInput_textPos(r0,r10,r11);
	r0->cursorIndex = r6;
	r12 = NULL;
	r0->selectionRange = r12;
	r13 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r14 = NULL;
	r15 = NULL;
	h2d_col_Point_new(r13,r14,r15);
	r16 = h2d_Object_getScene(((h2d__Object)r0));
	if( r16 == NULL ) hl_null_access();
	r17 = hl_alloc_enum(&t$ctx_ac38764,0);
	((Enumt$ctx_ac38764*)r17)->p0 = (h2d__TextInput)r0;
	((Enumt$ctx_ac38764*)r17)->p1 = (int)r6;
	((Enumt$ctx_ac38764*)r17)->p2 = (h2d__col__Point)r13;
	((Enumt$ctx_ac38764*)r17)->p3 = (h2d__Scene)r16;
	r3 = hl_alloc_closure_ptr(&t$fun_731869e,h2d_TextInput_new__$2,r17);
	r18 = NULL;
	r4 = NULL;
	h2d_Scene_startDrag(r16,r3,r18,r4);
	label$3fda7ba_2_50:
	return;
}

void h2d_TextInput_new__$3(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onKeyDown;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	h2d_TextInput_handleKey(r0,r1);
	return;
}

void h2d_TextInput_new__$4(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onTextInput;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	h2d_TextInput_handleKey(r0,r1);
	return;
}

void h2d_TextInput_new__$5(h2d__TextInput r0,hxd__Event r1) {
	vvirtual *r3;
	vclosure *r5;
	int r2;
	if( r0 == NULL ) hl_null_access();
	r2 = -1;
	r0->cursorIndex = r2;
	r3 = NULL;
	r0->selectionRange = r3;
	r5 = r0->onFocusLost;
	if( r5 == NULL ) hl_null_access();
	r5->hasValue ? ((void (*)(vdynamic*,hxd__Event))r5->fun)((vdynamic*)r5->value,r1) : ((void (*)(hxd__Event))r5->fun)(r1);
	return;
}

void h2d_TextInput_new__$6(h2d__TextInput r0,hxd__Event r1) {
	String r9;
	vvirtual *r11;
	bool r4;
	double r5, r6, r7;
	vclosure *r3;
	int r8, r10;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onClick;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	if( r1 == NULL ) hl_null_access();
	r4 = r1->cancel;
	if( !r4 ) goto label$3fda7ba_6_8;
	return;
	label$3fda7ba_6_8:
	r5 = hl_sys_time();
	r7 = r0->lastClick;
	r6 = r5 - r7;
	r7 = 0.29999999999999999;
	if( !(r6 < r7) ) goto label$3fda7ba_6_32;
	r9 = r0->text;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	r10 = 0;
	if( r8 == r10 ) goto label$3fda7ba_6_32;
	r11 = hl_alloc_virtual(&t$vrt_f651ef3);
	r8 = 0;
	if( hl_vfields(r11)[1] ) *(int*)(hl_vfields(r11)[1]) = (int)r8; else hl_dyn_seti(r11->value,-469011757/*start*/,&t$_i32,r8);
	r9 = r0->text;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	if( hl_vfields(r11)[0] ) *(int*)(hl_vfields(r11)[0]) = (int)r8; else hl_dyn_seti(r11->value,-16280745/*length*/,&t$_i32,r8);
	r0->selectionRange = r11;
	r6 = 0.;
	r0->selectionSize = r6;
	r9 = r0->text;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	r0->cursorIndex = r8;
	label$3fda7ba_6_32:
	r0->lastClick = r5;
	return;
}

void h2d_TextInput_new__$7(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onKeyUp;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	return;
}

void h2d_TextInput_new__$8(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onRelease;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	return;
}

void h2d_TextInput_new__$9(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onFocus;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	return;
}

void h2d_TextInput_new__$10(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onKeyUp;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	return;
}

void h2d_TextInput_new__$11(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onMove;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	return;
}

void h2d_TextInput_new__$12(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onOver;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	return;
}

void h2d_TextInput_new__$13(h2d__TextInput r0,hxd__Event r1) {
	vclosure *r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->onOut;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,hxd__Event))r3->fun)((vdynamic*)r3->value,r1) : ((void (*)(hxd__Event))r3->fun)(r1);
	return;
}

void h2d_TextInput_handleKey(h2d__TextInput r0,hxd__Event r1) {
	String r7, r13, r15;
	hxd__Charset r18;
	hl__types__ArrayObj r24;
	vvirtual *r12, *r25, *r26;
	venum *r8, *r9;
	bool r3, r20;
	h2d__Font r11;
	double r23;
	vclosure *r16;
	h2d__Interactive r17;
	vdynamic *r6, *r14;
	vbyte *r19;
	int r4, r5, r10, r21, r22;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->cancel;
	if( r3 ) goto label$3fda7ba_14_6;
	r4 = r0->cursorIndex;
	r5 = 0;
	if( r4 >= r5 ) goto label$3fda7ba_14_7;
	label$3fda7ba_14_6:
	return;
	label$3fda7ba_14_7:
	r4 = r0->cursorIndex;
	r7 = r0->text;
	r5 = r1->keyCode;
	switch(r5) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 9:
		case 10:
		case 11:
		case 12:
		case 14:
		case 15:
		case 16:
		case 17:
		case 18:
		case 19:
		case 20:
		case 21:
		case 22:
		case 23:
		case 24:
		case 25:
		case 26:
		case 28:
		case 29:
		case 30:
		case 31:
		case 32:
		case 33:
		case 34:
		case 38:
		case 40:
		case 41:
		case 42:
		case 43:
		case 44:
		case 45:
		case 47:
		case 48:
		case 49:
		case 50:
		case 51:
		case 52:
		case 53:
		case 54:
		case 55:
		case 56:
		case 57:
		case 58:
		case 59:
		case 60:
		case 61:
		case 62:
		case 63:
		case 64:
		case 66:
		case 67:
		case 68:
		case 69:
		case 70:
		case 71:
		case 72:
		case 73:
		case 74:
		case 75:
		case 76:
		case 77:
		case 78:
		case 79:
		case 80:
		case 81:
		case 82:
		case 83:
		case 84:
		case 85:
		case 86:
		case 87:
		case 88:
		case 91:
		case 92:
		case 93:
		case 94:
		case 95:
		case 96:
		case 97:
		case 98:
		case 99:
		case 100:
		case 101:
		case 102:
		case 103:
		case 104:
		case 105:
		case 106:
		case 107:
			r8 = r1->kind;
			r9 = (venum*)g$hxd_EventKind_EKeyDown;
			if( r8 != r9 ) goto label$3fda7ba_14_15;
			return;
			label$3fda7ba_14_15:
			r5 = r1->charCode;
			r10 = 0;
			if( r5 == r10 ) goto label$3fda7ba_14_52;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_52;
			r11 = r0->font;
			if( r11 == NULL ) hl_null_access();
			r5 = r1->charCode;
			r3 = h2d_Font_hasChar(r11,r5);
			if( r3 ) goto label$3fda7ba_14_26;
			return;
			label$3fda7ba_14_26:
			h2d_TextInput_beforeChange(r0);
			r12 = r0->selectionRange;
			if( !r12 ) goto label$3fda7ba_14_30;
			r3 = h2d_TextInput_cutSelection(r0);
			label$3fda7ba_14_30:
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = 0;
			r10 = r0->cursorIndex;
			r14 = hl_alloc_dynamic(&t$_i32);
			r14->v.i = r10;
			r13 = String_substr(r13,r5,r14);
			r5 = r1->charCode;
			r15 = String_fromCharCode(r5);
			r13 = String___add__(r13,r15);
			r15 = r0->text;
			if( r15 == NULL ) hl_null_access();
			r5 = r0->cursorIndex;
			r14 = NULL;
			r15 = String_substr(r15,r5,r14);
			r13 = String___add__(r13,r15);
			r13 = h2d_TextInput_set_text(r0,r13);
			r5 = r0->cursorIndex;
			++r5;
			r0->cursorIndex = r5;
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
			label$3fda7ba_14_52:
			goto label$3fda7ba_14_463;
		case 8:
			r12 = r0->selectionRange;
			if( !r12 ) goto label$3fda7ba_14_64;
			r3 = r0->canEdit;
			if( r3 ) goto label$3fda7ba_14_58;
			return;
			label$3fda7ba_14_58:
			h2d_TextInput_beforeChange(r0);
			r3 = h2d_TextInput_cutSelection(r0);
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
			goto label$3fda7ba_14_91;
			label$3fda7ba_14_64:
			r5 = r0->cursorIndex;
			r10 = 0;
			if( r10 >= r5 ) goto label$3fda7ba_14_91;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_91;
			h2d_TextInput_beforeChange(r0);
			r5 = r0->cursorIndex;
			--r5;
			r0->cursorIndex = r5;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = 0;
			r10 = r0->cursorIndex;
			r14 = hl_alloc_dynamic(&t$_i32);
			r14->v.i = r10;
			r13 = String_substr(r13,r5,r14);
			r15 = r0->text;
			if( r15 == NULL ) hl_null_access();
			r5 = r0->cursorIndex;
			r10 = 1;
			r5 = r5 + r10;
			r14 = NULL;
			r15 = String_substr(r15,r5,r14);
			r13 = String___add__(r13,r15);
			r13 = h2d_TextInput_set_text(r0,r13);
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
			label$3fda7ba_14_91:
			goto label$3fda7ba_14_463;
		case 13:
		case 27:
		case 108:
			r5 = -1;
			r0->cursorIndex = r5;
			r17 = r0->interactive;
			if( r17 == NULL ) hl_null_access();
			h2d_Interactive_blur(r17);
			return;
		case 35:
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = r13->length;
			r0->cursorIndex = r5;
			goto label$3fda7ba_14_463;
		case 36:
			r5 = 0;
			r0->cursorIndex = r5;
			goto label$3fda7ba_14_463;
		case 37:
			r5 = 17;
			r3 = hxd_Key_isDown(r5);
			if( !r3 ) goto label$3fda7ba_14_165;
			r5 = r0->cursorIndex;
			r10 = 0;
			if( r10 >= r5 ) goto label$3fda7ba_14_164;
			r18 = hxd_Charset_getDefault();
			label$3fda7ba_14_113:
			r3 = true;
			if( !r3 ) goto label$3fda7ba_14_138;
			r5 = r0->cursorIndex;
			r10 = 0;
			if( r10 >= r5 ) goto label$3fda7ba_14_131;
			r5 = r0->cursorIndex;
			r10 = 1;
			r5 = r5 - r10;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r19 = r13->bytes;
			if( r18 == NULL ) hl_null_access();
			r21 = 1;
			r10 = r5 << r21;
			r10 = *(unsigned short*)(r19 + r10);
			r20 = hxd_Charset_isSpace(r18,r10);
			goto label$3fda7ba_14_132;
			label$3fda7ba_14_131:
			r20 = false;
			label$3fda7ba_14_132:
			if( r20 ) goto label$3fda7ba_14_134;
			goto label$3fda7ba_14_138;
			label$3fda7ba_14_134:
			r5 = r0->cursorIndex;
			--r5;
			r0->cursorIndex = r5;
			goto label$3fda7ba_14_113;
			label$3fda7ba_14_138:
			r3 = true;
			if( !r3 ) goto label$3fda7ba_14_164;
			r5 = r0->cursorIndex;
			r10 = 0;
			if( r10 >= r5 ) goto label$3fda7ba_14_157;
			r5 = r0->cursorIndex;
			r10 = 1;
			r5 = r5 - r10;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r19 = r13->bytes;
			if( r18 == NULL ) hl_null_access();
			r21 = 1;
			r10 = r5 << r21;
			r10 = *(unsigned short*)(r19 + r10);
			r20 = hxd_Charset_isSpace(r18,r10);
			r20 = !r20;
			goto label$3fda7ba_14_158;
			label$3fda7ba_14_157:
			r20 = false;
			label$3fda7ba_14_158:
			if( r20 ) goto label$3fda7ba_14_160;
			goto label$3fda7ba_14_164;
			label$3fda7ba_14_160:
			r5 = r0->cursorIndex;
			--r5;
			r0->cursorIndex = r5;
			goto label$3fda7ba_14_138;
			label$3fda7ba_14_164:
			goto label$3fda7ba_14_171;
			label$3fda7ba_14_165:
			r5 = r0->cursorIndex;
			r10 = 0;
			if( r10 >= r5 ) goto label$3fda7ba_14_171;
			r5 = r0->cursorIndex;
			--r5;
			r0->cursorIndex = r5;
			label$3fda7ba_14_171:
			goto label$3fda7ba_14_463;
		case 39:
			r5 = 17;
			r3 = hxd_Key_isDown(r5);
			if( !r3 ) goto label$3fda7ba_14_230;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = r13->length;
			r10 = r0->cursorIndex;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r21 = r13->length;
			if( r10 >= r21 ) goto label$3fda7ba_14_229;
			r18 = hxd_Charset_getDefault();
			label$3fda7ba_14_184:
			r3 = true;
			if( !r3 ) goto label$3fda7ba_14_206;
			r10 = r0->cursorIndex;
			if( r10 >= r5 ) goto label$3fda7ba_14_199;
			r10 = r0->cursorIndex;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r19 = r13->bytes;
			if( r18 == NULL ) hl_null_access();
			r22 = 1;
			r21 = r10 << r22;
			r21 = *(unsigned short*)(r19 + r21);
			r20 = hxd_Charset_isSpace(r18,r21);
			goto label$3fda7ba_14_200;
			label$3fda7ba_14_199:
			r20 = false;
			label$3fda7ba_14_200:
			if( r20 ) goto label$3fda7ba_14_202;
			goto label$3fda7ba_14_206;
			label$3fda7ba_14_202:
			r10 = r0->cursorIndex;
			++r10;
			r0->cursorIndex = r10;
			goto label$3fda7ba_14_184;
			label$3fda7ba_14_206:
			r3 = true;
			if( !r3 ) goto label$3fda7ba_14_229;
			r10 = r0->cursorIndex;
			if( r10 >= r5 ) goto label$3fda7ba_14_222;
			r10 = r0->cursorIndex;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r19 = r13->bytes;
			if( r18 == NULL ) hl_null_access();
			r22 = 1;
			r21 = r10 << r22;
			r21 = *(unsigned short*)(r19 + r21);
			r20 = hxd_Charset_isSpace(r18,r21);
			r20 = !r20;
			goto label$3fda7ba_14_223;
			label$3fda7ba_14_222:
			r20 = false;
			label$3fda7ba_14_223:
			if( r20 ) goto label$3fda7ba_14_225;
			goto label$3fda7ba_14_229;
			label$3fda7ba_14_225:
			r10 = r0->cursorIndex;
			++r10;
			r0->cursorIndex = r10;
			goto label$3fda7ba_14_206;
			label$3fda7ba_14_229:
			goto label$3fda7ba_14_238;
			label$3fda7ba_14_230:
			r5 = r0->cursorIndex;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r10 = r13->length;
			if( r5 >= r10 ) goto label$3fda7ba_14_238;
			r5 = r0->cursorIndex;
			++r5;
			r0->cursorIndex = r5;
			label$3fda7ba_14_238:
			goto label$3fda7ba_14_463;
		case 46:
			r12 = r0->selectionRange;
			if( !r12 ) goto label$3fda7ba_14_250;
			r3 = r0->canEdit;
			if( r3 ) goto label$3fda7ba_14_244;
			return;
			label$3fda7ba_14_244:
			h2d_TextInput_beforeChange(r0);
			r3 = h2d_TextInput_cutSelection(r0);
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
			goto label$3fda7ba_14_276;
			label$3fda7ba_14_250:
			r5 = r0->cursorIndex;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r10 = r13->length;
			if( r5 >= r10 ) goto label$3fda7ba_14_276;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_276;
			h2d_TextInput_beforeChange(r0);
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = 0;
			r10 = r0->cursorIndex;
			r14 = hl_alloc_dynamic(&t$_i32);
			r14->v.i = r10;
			r13 = String_substr(r13,r5,r14);
			r15 = r0->text;
			if( r15 == NULL ) hl_null_access();
			r5 = r0->cursorIndex;
			r10 = 1;
			r5 = r5 + r10;
			r14 = NULL;
			r15 = String_substr(r15,r5,r14);
			r13 = String___add__(r13,r15);
			r13 = h2d_TextInput_set_text(r0,r13);
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
			label$3fda7ba_14_276:
			goto label$3fda7ba_14_463;
		case 65:
			r5 = 17;
			r3 = hxd_Key_isDown(r5);
			if( !r3 ) goto label$3fda7ba_14_298;
			r13 = r0->text;
			r15 = (String)s$;
			if( r13 == r15 || (r13 && r15 && String___compare(r13,(vdynamic*)r15) == 0) ) goto label$3fda7ba_14_297;
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = r13->length;
			r0->cursorIndex = r5;
			r12 = hl_alloc_virtual(&t$vrt_f651ef3);
			r5 = 0;
			if( hl_vfields(r12)[1] ) *(int*)(hl_vfields(r12)[1]) = (int)r5; else hl_dyn_seti(r12->value,-469011757/*start*/,&t$_i32,r5);
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = r13->length;
			if( hl_vfields(r12)[0] ) *(int*)(hl_vfields(r12)[0]) = (int)r5; else hl_dyn_seti(r12->value,-16280745/*length*/,&t$_i32,r5);
			r0->selectionRange = r12;
			r23 = 0.;
			r0->selectionSize = r23;
			label$3fda7ba_14_297:
			return;
			label$3fda7ba_14_298:
			r8 = r1->kind;
			r9 = (venum*)g$hxd_EventKind_EKeyDown;
			if( r8 != r9 ) goto label$3fda7ba_14_302;
			return;
			label$3fda7ba_14_302:
			r5 = r1->charCode;
			r10 = 0;
			if( r5 == r10 ) goto label$3fda7ba_14_339;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_339;
			r11 = r0->font;
			if( r11 == NULL ) hl_null_access();
			r5 = r1->charCode;
			r3 = h2d_Font_hasChar(r11,r5);
			if( r3 ) goto label$3fda7ba_14_313;
			return;
			label$3fda7ba_14_313:
			h2d_TextInput_beforeChange(r0);
			r12 = r0->selectionRange;
			if( !r12 ) goto label$3fda7ba_14_317;
			r3 = h2d_TextInput_cutSelection(r0);
			label$3fda7ba_14_317:
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = 0;
			r10 = r0->cursorIndex;
			r14 = hl_alloc_dynamic(&t$_i32);
			r14->v.i = r10;
			r13 = String_substr(r13,r5,r14);
			r5 = r1->charCode;
			r15 = String_fromCharCode(r5);
			r13 = String___add__(r13,r15);
			r15 = r0->text;
			if( r15 == NULL ) hl_null_access();
			r5 = r0->cursorIndex;
			r14 = NULL;
			r15 = String_substr(r15,r5,r14);
			r13 = String___add__(r13,r15);
			r13 = h2d_TextInput_set_text(r0,r13);
			r5 = r0->cursorIndex;
			++r5;
			r0->cursorIndex = r5;
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
			label$3fda7ba_14_339:
			goto label$3fda7ba_14_463;
		case 89:
			r5 = 17;
			r3 = hxd_Key_isDown(r5);
			if( !r3 ) goto label$3fda7ba_14_360;
			r24 = r0->redo;
			if( r24 == NULL ) hl_null_access();
			r5 = r24->length;
			r10 = 0;
			if( r10 >= r5 ) goto label$3fda7ba_14_359;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_359;
			r24 = r0->undo;
			if( r24 == NULL ) hl_null_access();
			r25 = h2d_TextInput_curHistoryState(r0);
			r5 = hl_types_ArrayObj_push(r24,((vdynamic*)r25));
			r24 = r0->redo;
			if( r24 == NULL ) hl_null_access();
			r6 = hl_types_ArrayObj_pop(r24);
			r25 = hl_to_virtual(&t$vrt_8f7336e,(vdynamic*)r6);
			h2d_TextInput_setState(r0,r25);
			label$3fda7ba_14_359:
			return;
			label$3fda7ba_14_360:
			r8 = r1->kind;
			r9 = (venum*)g$hxd_EventKind_EKeyDown;
			if( r8 != r9 ) goto label$3fda7ba_14_364;
			return;
			label$3fda7ba_14_364:
			r5 = r1->charCode;
			r10 = 0;
			if( r5 == r10 ) goto label$3fda7ba_14_401;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_401;
			r11 = r0->font;
			if( r11 == NULL ) hl_null_access();
			r5 = r1->charCode;
			r3 = h2d_Font_hasChar(r11,r5);
			if( r3 ) goto label$3fda7ba_14_375;
			return;
			label$3fda7ba_14_375:
			h2d_TextInput_beforeChange(r0);
			r12 = r0->selectionRange;
			if( !r12 ) goto label$3fda7ba_14_379;
			r3 = h2d_TextInput_cutSelection(r0);
			label$3fda7ba_14_379:
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = 0;
			r10 = r0->cursorIndex;
			r14 = hl_alloc_dynamic(&t$_i32);
			r14->v.i = r10;
			r13 = String_substr(r13,r5,r14);
			r5 = r1->charCode;
			r15 = String_fromCharCode(r5);
			r13 = String___add__(r13,r15);
			r15 = r0->text;
			if( r15 == NULL ) hl_null_access();
			r5 = r0->cursorIndex;
			r14 = NULL;
			r15 = String_substr(r15,r5,r14);
			r13 = String___add__(r13,r15);
			r13 = h2d_TextInput_set_text(r0,r13);
			r5 = r0->cursorIndex;
			++r5;
			r0->cursorIndex = r5;
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
			label$3fda7ba_14_401:
			goto label$3fda7ba_14_463;
		case 90:
			r5 = 17;
			r3 = hxd_Key_isDown(r5);
			if( !r3 ) goto label$3fda7ba_14_422;
			r24 = r0->undo;
			if( r24 == NULL ) hl_null_access();
			r5 = r24->length;
			r10 = 0;
			if( r10 >= r5 ) goto label$3fda7ba_14_421;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_421;
			r24 = r0->redo;
			if( r24 == NULL ) hl_null_access();
			r25 = h2d_TextInput_curHistoryState(r0);
			r5 = hl_types_ArrayObj_push(r24,((vdynamic*)r25));
			r24 = r0->undo;
			if( r24 == NULL ) hl_null_access();
			r6 = hl_types_ArrayObj_pop(r24);
			r25 = hl_to_virtual(&t$vrt_8f7336e,(vdynamic*)r6);
			h2d_TextInput_setState(r0,r25);
			label$3fda7ba_14_421:
			return;
			label$3fda7ba_14_422:
			r8 = r1->kind;
			r9 = (venum*)g$hxd_EventKind_EKeyDown;
			if( r8 != r9 ) goto label$3fda7ba_14_426;
			return;
			label$3fda7ba_14_426:
			r5 = r1->charCode;
			r10 = 0;
			if( r5 == r10 ) goto label$3fda7ba_14_463;
			r3 = r0->canEdit;
			if( !r3 ) goto label$3fda7ba_14_463;
			r11 = r0->font;
			if( r11 == NULL ) hl_null_access();
			r5 = r1->charCode;
			r3 = h2d_Font_hasChar(r11,r5);
			if( r3 ) goto label$3fda7ba_14_437;
			return;
			label$3fda7ba_14_437:
			h2d_TextInput_beforeChange(r0);
			r12 = r0->selectionRange;
			if( !r12 ) goto label$3fda7ba_14_441;
			r3 = h2d_TextInput_cutSelection(r0);
			label$3fda7ba_14_441:
			r13 = r0->text;
			if( r13 == NULL ) hl_null_access();
			r5 = 0;
			r10 = r0->cursorIndex;
			r14 = hl_alloc_dynamic(&t$_i32);
			r14->v.i = r10;
			r13 = String_substr(r13,r5,r14);
			r5 = r1->charCode;
			r15 = String_fromCharCode(r5);
			r13 = String___add__(r13,r15);
			r15 = r0->text;
			if( r15 == NULL ) hl_null_access();
			r5 = r0->cursorIndex;
			r14 = NULL;
			r15 = String_substr(r15,r5,r14);
			r13 = String___add__(r13,r15);
			r13 = h2d_TextInput_set_text(r0,r13);
			r5 = r0->cursorIndex;
			++r5;
			r0->cursorIndex = r5;
			r16 = r0->onChange;
			if( r16 == NULL ) hl_null_access();
			r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
	}
	label$3fda7ba_14_463:
	r23 = 0.;
	r0->cursorBlink = r23;
	r5 = 16;
	r3 = hxd_Key_isDown(r5);
	if( !r3 ) goto label$3fda7ba_14_545;
	r13 = r0->text;
	if( r13 != r7 && (!r13 || !r7 || String___compare(r13,(vdynamic*)r7) != 0) ) goto label$3fda7ba_14_545;
	r5 = r0->cursorIndex;
	if( r5 != r4 ) goto label$3fda7ba_14_473;
	return;
	label$3fda7ba_14_473:
	r12 = r0->selectionRange;
	if( r12 ) goto label$3fda7ba_14_491;
	r10 = r0->cursorIndex;
	if( r4 >= r10 ) goto label$3fda7ba_14_483;
	r12 = hl_alloc_virtual(&t$vrt_f651ef3);
	if( hl_vfields(r12)[1] ) *(int*)(hl_vfields(r12)[1]) = (int)r4; else hl_dyn_seti(r12->value,-469011757/*start*/,&t$_i32,r4);
	r5 = r0->cursorIndex;
	r5 = r5 - r4;
	if( hl_vfields(r12)[0] ) *(int*)(hl_vfields(r12)[0]) = (int)r5; else hl_dyn_seti(r12->value,-16280745/*length*/,&t$_i32,r5);
	goto label$3fda7ba_14_489;
	label$3fda7ba_14_483:
	r12 = hl_alloc_virtual(&t$vrt_f651ef3);
	r5 = r0->cursorIndex;
	if( hl_vfields(r12)[1] ) *(int*)(hl_vfields(r12)[1]) = (int)r5; else hl_dyn_seti(r12->value,-469011757/*start*/,&t$_i32,r5);
	r10 = r0->cursorIndex;
	r5 = r4 - r10;
	if( hl_vfields(r12)[0] ) *(int*)(hl_vfields(r12)[0]) = (int)r5; else hl_dyn_seti(r12->value,-16280745/*length*/,&t$_i32,r5);
	label$3fda7ba_14_489:
	r0->selectionRange = r12;
	goto label$3fda7ba_14_514;
	label$3fda7ba_14_491:
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r10 = hl_vfields(r12)[1] ? (*(int*)(hl_vfields(r12)[1])) : (int)hl_dyn_geti(r12->value,-469011757/*start*/,&t$_i32);
	if( r4 != r10 ) goto label$3fda7ba_14_507;
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r5 = hl_vfields(r12)[0] ? (*(int*)(hl_vfields(r12)[0])) : (int)hl_dyn_geti(r12->value,-16280745/*length*/,&t$_i32);
	r21 = r0->cursorIndex;
	r10 = r4 - r21;
	r5 = r5 + r10;
	if( hl_vfields(r12)[0] ) *(int*)(hl_vfields(r12)[0]) = (int)r5; else hl_dyn_seti(r12->value,-16280745/*length*/,&t$_i32,r5);
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r5 = r0->cursorIndex;
	if( hl_vfields(r12)[1] ) *(int*)(hl_vfields(r12)[1]) = (int)r5; else hl_dyn_seti(r12->value,-469011757/*start*/,&t$_i32,r5);
	goto label$3fda7ba_14_514;
	label$3fda7ba_14_507:
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r5 = hl_vfields(r12)[0] ? (*(int*)(hl_vfields(r12)[0])) : (int)hl_dyn_geti(r12->value,-16280745/*length*/,&t$_i32);
	r10 = r0->cursorIndex;
	r10 = r10 - r4;
	r5 = r5 + r10;
	if( hl_vfields(r12)[0] ) *(int*)(hl_vfields(r12)[0]) = (int)r5; else hl_dyn_seti(r12->value,-16280745/*length*/,&t$_i32,r5);
	label$3fda7ba_14_514:
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r5 = hl_vfields(r12)[0] ? (*(int*)(hl_vfields(r12)[0])) : (int)hl_dyn_geti(r12->value,-16280745/*length*/,&t$_i32);
	r10 = 0;
	if( r5 != r10 ) goto label$3fda7ba_14_522;
	r12 = NULL;
	r0->selectionRange = r12;
	goto label$3fda7ba_14_542;
	label$3fda7ba_14_522:
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r5 = hl_vfields(r12)[0] ? (*(int*)(hl_vfields(r12)[0])) : (int)hl_dyn_geti(r12->value,-16280745/*length*/,&t$_i32);
	r10 = 0;
	if( r5 >= r10 ) goto label$3fda7ba_14_542;
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r5 = hl_vfields(r12)[1] ? (*(int*)(hl_vfields(r12)[1])) : (int)hl_dyn_geti(r12->value,-469011757/*start*/,&t$_i32);
	r26 = r0->selectionRange;
	if( r26 == NULL ) hl_null_access();
	r10 = hl_vfields(r26)[0] ? (*(int*)(hl_vfields(r26)[0])) : (int)hl_dyn_geti(r26->value,-16280745/*length*/,&t$_i32);
	r5 = r5 + r10;
	if( hl_vfields(r12)[1] ) *(int*)(hl_vfields(r12)[1]) = (int)r5; else hl_dyn_seti(r12->value,-469011757/*start*/,&t$_i32,r5);
	r12 = r0->selectionRange;
	if( r12 == NULL ) hl_null_access();
	r26 = r0->selectionRange;
	if( r26 == NULL ) hl_null_access();
	r5 = hl_vfields(r26)[0] ? (*(int*)(hl_vfields(r26)[0])) : (int)hl_dyn_geti(r26->value,-16280745/*length*/,&t$_i32);
	r5 = -r5;
	if( hl_vfields(r12)[0] ) *(int*)(hl_vfields(r12)[0]) = (int)r5; else hl_dyn_seti(r12->value,-16280745/*length*/,&t$_i32,r5);
	label$3fda7ba_14_542:
	r23 = 0.;
	r0->selectionSize = r23;
	goto label$3fda7ba_14_547;
	label$3fda7ba_14_545:
	r12 = NULL;
	r0->selectionRange = r12;
	label$3fda7ba_14_547:
	return;
}

bool h2d_TextInput_cutSelection(h2d__TextInput r0) {
	String r5, r8;
	vvirtual *r1;
	bool r2;
	vdynamic *r7;
	int r3, r4, r6;
	r1 = r0->selectionRange;
	if( r1 ) goto label$3fda7ba_15_4;
	r2 = false;
	return r2;
	label$3fda7ba_15_4:
	r1 = r0->selectionRange;
	if( r1 == NULL ) hl_null_access();
	r3 = hl_vfields(r1)[1] ? (*(int*)(hl_vfields(r1)[1])) : (int)hl_dyn_geti(r1->value,-469011757/*start*/,&t$_i32);
	r0->cursorIndex = r3;
	r3 = r0->cursorIndex;
	r1 = r0->selectionRange;
	if( r1 == NULL ) hl_null_access();
	r4 = hl_vfields(r1)[0] ? (*(int*)(hl_vfields(r1)[0])) : (int)hl_dyn_geti(r1->value,-16280745/*length*/,&t$_i32);
	r3 = r3 + r4;
	r5 = r0->text;
	if( r5 == NULL ) hl_null_access();
	r4 = 0;
	r6 = r0->cursorIndex;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r6;
	r5 = String_substr(r5,r4,r7);
	r8 = r0->text;
	if( r8 == NULL ) hl_null_access();
	r7 = NULL;
	r8 = String_substr(r8,r3,r7);
	r5 = String___add__(r5,r8);
	r5 = h2d_TextInput_set_text(r0,r5);
	r1 = NULL;
	r0->selectionRange = r1;
	r2 = true;
	return r2;
}

void h2d_TextInput_setState(h2d__TextInput r0,vvirtual* r1) {
	String r2;
	vvirtual *r4;
	int r3, r6;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,116/*t*/,&t$String);
	r2 = h2d_TextInput_set_text(r0,r2);
	r3 = hl_vfields(r1)[0] ? (*(int*)(hl_vfields(r1)[0])) : (int)hl_dyn_geti(r1->value,99/*c*/,&t$_i32);
	r0->cursorIndex = r3;
	r4 = hl_vfields(r1)[1] ? (*(vvirtual**)(hl_vfields(r1)[1])) : (vvirtual*)hl_dyn_getp(r1->value,5741466/*sel*/,&t$vrt_f651ef3);
	r0->selectionRange = r4;
	r4 = r0->selectionRange;
	if( !r4 ) goto label$3fda7ba_16_17;
	r4 = r0->selectionRange;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,-469011757/*start*/,&t$_i32);
	r4 = r0->selectionRange;
	if( r4 == NULL ) hl_null_access();
	r6 = hl_vfields(r4)[0] ? (*(int*)(hl_vfields(r4)[0])) : (int)hl_dyn_geti(r4->value,-16280745/*length*/,&t$_i32);
	r3 = r3 + r6;
	r0->cursorIndex = r3;
	label$3fda7ba_16_17:
	return;
}

vvirtual* h2d_TextInput_curHistoryState(h2d__TextInput r0) {
	String r2;
	vvirtual *r1, *r4, *r5;
	int r3;
	r1 = hl_alloc_virtual(&t$vrt_8f7336e);
	r2 = r0->text;
	if( hl_vfields(r1)[2] ) *(String*)(hl_vfields(r1)[2]) = (String)r2; else hl_dyn_setp(r1->value,116/*t*/,&t$String,r2);
	r3 = r0->cursorIndex;
	if( hl_vfields(r1)[0] ) *(int*)(hl_vfields(r1)[0]) = (int)r3; else hl_dyn_seti(r1->value,99/*c*/,&t$_i32,r3);
	r4 = r0->selectionRange;
	if( r4 ) goto label$3fda7ba_17_9;
	r4 = NULL;
	goto label$3fda7ba_17_18;
	label$3fda7ba_17_9:
	r4 = hl_alloc_virtual(&t$vrt_f651ef3);
	r5 = r0->selectionRange;
	if( r5 == NULL ) hl_null_access();
	r3 = hl_vfields(r5)[1] ? (*(int*)(hl_vfields(r5)[1])) : (int)hl_dyn_geti(r5->value,-469011757/*start*/,&t$_i32);
	if( hl_vfields(r4)[1] ) *(int*)(hl_vfields(r4)[1]) = (int)r3; else hl_dyn_seti(r4->value,-469011757/*start*/,&t$_i32,r3);
	r5 = r0->selectionRange;
	if( r5 == NULL ) hl_null_access();
	r3 = hl_vfields(r5)[0] ? (*(int*)(hl_vfields(r5)[0])) : (int)hl_dyn_geti(r5->value,-16280745/*length*/,&t$_i32);
	if( hl_vfields(r4)[0] ) *(int*)(hl_vfields(r4)[0]) = (int)r3; else hl_dyn_seti(r4->value,-16280745/*length*/,&t$_i32,r3);
	label$3fda7ba_17_18:
	if( hl_vfields(r1)[1] ) *(vvirtual**)(hl_vfields(r1)[1]) = (vvirtual*)r4; else hl_dyn_setp(r1->value,5741466/*sel*/,&t$vrt_f651ef3,r4);
	return r1;
}

void h2d_TextInput_beforeChange(h2d__TextInput r0) {
	vvirtual *r8;
	hl__types__ArrayObj r7;
	hl_type *r10;
	double r1, r3, r4;
	vdynamic *r5;
	varray *r9;
	int r6, r11;
	r1 = hl_sys_time();
	r4 = r0->lastChange;
	r3 = r1 - r4;
	r4 = 1.;
	if( !(r3 < r4) ) goto label$3fda7ba_18_7;
	r0->lastChange = r1;
	return;
	label$3fda7ba_18_7:
	r0->lastChange = r1;
	r7 = r0->undo;
	if( r7 == NULL ) hl_null_access();
	r8 = h2d_TextInput_curHistoryState(r0);
	r6 = hl_types_ArrayObj_push(r7,((vdynamic*)r8));
	r10 = &t$vrt_8f7336e;
	r6 = 0;
	r9 = hl_alloc_array(r10,r6);
	r7 = hl_types_ArrayObj_alloc(r9);
	r0->redo = r7;
	label$3fda7ba_18_17:
	r7 = r0->undo;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->length;
	r11 = r0->maxHistorySize;
	if( r11 >= r6 ) goto label$3fda7ba_18_28;
	r7 = r0->undo;
	if( r7 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_shift(r7);
	r8 = hl_to_virtual(&t$vrt_8f7336e,(vdynamic*)r5);
	goto label$3fda7ba_18_17;
	label$3fda7ba_18_28:
	return;
}

String h2d_TextInput_set_text(h2d__TextInput r0,String r1) {
	String r2;
	int r3, r4;
	r2 = h2d_Text_set_text(((h2d__Text)r0),r1);
	r3 = r0->cursorIndex;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->length;
	if( r4 >= r3 ) goto label$3fda7ba_19_7;
	r3 = r1->length;
	r0->cursorIndex = r3;
	label$3fda7ba_19_7:
	return r1;
}

h2d__Font h2d_TextInput_set_font(h2d__TextInput r0,h2d__Font r1) {
	h2d__Tile r3;
	h2d__Font r2;
	double r9;
	vdynamic *r6, *r7, *r8;
	int r4, r5;
	r2 = h2d_Text_set_font(((h2d__Text)r0),r1);
	r4 = 16777215;
	r5 = 1;
	r6 = hl_alloc_dynamic(&t$_i32);
	r6->v.i = r5;
	r2 = r0->font;
	if( r2 == NULL ) hl_null_access();
	r5 = r2->size;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r5;
	r8 = NULL;
	r3 = h2d_Tile_fromColor(r4,r6,r7,r8);
	r0->cursorTile = r3;
	r3 = r0->cursorTile;
	if( r3 == NULL ) hl_null_access();
	r9 = 2.;
	r3->dy = r9;
	r4 = 3381759;
	r5 = 0;
	r6 = hl_alloc_dynamic(&t$_i32);
	r6->v.i = r5;
	r2 = r0->font;
	if( r2 == NULL ) hl_null_access();
	r9 = r2->lineHeight;
	r5 = hl_math_ceil(r9);
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r5;
	r8 = NULL;
	r3 = h2d_Tile_fromColor(r4,r6,r7,r8);
	r0->selectionTile = r3;
	return r1;
}

void h2d_TextInput_initGlyphs(h2d__TextInput r0,String r1,bool* r2) {
	bool r3, r5;
	h2d__Tile r8;
	double r6, r7;
	vdynamic *r9;
	int r10;
	if( r2 ) goto label$3fda7ba_21_3;
	r3 = true;
	goto label$3fda7ba_21_4;
	label$3fda7ba_21_3:
	r3 = *r2;
	label$3fda7ba_21_4:
	r5 = r3;
	r2 = &r5;
	h2d_Text_initGlyphs(((h2d__Text)r0),r1,r2);
	if( !r3 ) goto label$3fda7ba_21_25;
	r6 = r0->calcWidth;
	r8 = r0->cursorTile;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->width;
	r6 = r6 + r7;
	r0->calcWidth = r6;
	r9 = r0->inputWidth;
	if( !r9 ) goto label$3fda7ba_21_25;
	r6 = r0->calcWidth;
	r9 = r0->inputWidth;
	r10 = r9 ? r9->v.i : 0;
	r7 = (double)r10;
	if( !(r7 < r6) ) goto label$3fda7ba_21_25;
	r9 = r0->inputWidth;
	r10 = r9 ? r9->v.i : 0;
	r6 = (double)r10;
	r0->calcWidth = r6;
	label$3fda7ba_21_25:
	return;
}

int h2d_TextInput_textPos(h2d__TextInput r0,double r1,double r2) {
	String r8;
	double r3, r4;
	vdynamic *r10;
	int r5, r6, r7, r9;
	r4 = r0->scrollX;
	r3 = r1 + r4;
	r1 = r3;
	r5 = 0;
	label$3fda7ba_22_4:
	r8 = r0->text;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->length;
	if( r5 >= r7 ) goto label$3fda7ba_22_21;
	r8 = r0->text;
	if( r8 == NULL ) hl_null_access();
	r6 = 0;
	r9 = 1;
	r7 = r5 + r9;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r7;
	r8 = String_substr(r8,r6,r10);
	r3 = h2d_Text_calcTextWidth(((h2d__Text)r0),r8);
	if( !(r1 < r3) ) goto label$3fda7ba_22_19;
	goto label$3fda7ba_22_21;
	label$3fda7ba_22_19:
	++r5;
	goto label$3fda7ba_22_4;
	label$3fda7ba_22_21:
	return r5;
}

void h2d_TextInput_sync(h2d__TextInput r0,h2d__RenderContext r1) {
	h2d__Font r9;
	double r2, r8;
	h2d__Interactive r7;
	vdynamic *r3, *r5;
	int r4;
	r3 = r0->inputWidth;
	if( !r3 ) goto label$3fda7ba_23_6;
	r3 = r0->inputWidth;
	r4 = r3 ? r3->v.i : 0;
	r2 = (double)r4;
	goto label$3fda7ba_23_14;
	label$3fda7ba_23_6:
	r5 = r0->maxWidth;
	if( !r5 ) goto label$3fda7ba_23_13;
	r5 = r0->maxWidth;
	r2 = r5 ? r5->v.d : 0;
	r4 = hl_math_ceil(r2);
	r2 = (double)r4;
	goto label$3fda7ba_23_14;
	label$3fda7ba_23_13:
	r2 = h2d_Text_get_textWidth(((h2d__Text)r0));
	label$3fda7ba_23_14:
	r7 = r0->interactive;
	if( r7 == NULL ) hl_null_access();
	r7->width = r2;
	r7 = r0->interactive;
	if( r7 == NULL ) hl_null_access();
	r9 = r0->font;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->lineHeight;
	r7->height = r8;
	h2d_Text_sync(((h2d__Text)r0),r1);
	return;
}

void h2d_TextInput_draw(h2d__TextInput r0,h2d__RenderContext r1) {
	String r17, r18;
	vvirtual *r19;
	h2d__Tile r20;
	h2d__Font r9;
	h2d__col__Point r4;
	double r7, r8, r11, r12, r13, r14, r15;
	double *r5, *r10;
	vdynamic *r3;
	int r6, r16;
	r3 = r0->inputWidth;
	if( !r3 ) goto label$3fda7ba_24_27;
	r4 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r3 = r0->inputWidth;
	if( r3 ) goto label$3fda7ba_24_7;
	r5 = NULL;
	goto label$3fda7ba_24_10;
	label$3fda7ba_24_7:
	r6 = r3 ? r3->v.i : 0;
	r7 = (double)r6;
	r5 = &r7;
	label$3fda7ba_24_10:
	r9 = r0->font;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->lineHeight;
	r10 = &r8;
	h2d_col_Point_new(r4,r5,r10);
	r4 = h2d_Object_localToGlobal(((h2d__Object)r0),r4);
	if( r1 == NULL ) hl_null_access();
	r11 = r0->absX;
	r12 = r0->absY;
	if( r4 == NULL ) hl_null_access();
	r13 = r4->x;
	r14 = r0->absX;
	r13 = r13 - r14;
	r14 = r4->y;
	r15 = r0->absY;
	r14 = r14 - r15;
	h2d_RenderContext_pushRenderZone(r1,r11,r12,r13,r14);
	label$3fda7ba_24_27:
	r6 = r0->cursorIndex;
	r16 = 0;
	if( r6 < r16 ) goto label$3fda7ba_24_80;
	r17 = r0->text;
	r18 = r0->cursorText;
	if( r17 != r18 && (!r17 || !r18 || String___compare(r17,(vdynamic*)r18) != 0) ) goto label$3fda7ba_24_36;
	r6 = r0->cursorIndex;
	r16 = r0->cursorXIndex;
	if( r6 == r16 ) goto label$3fda7ba_24_80;
	label$3fda7ba_24_36:
	r6 = r0->cursorIndex;
	r17 = r0->text;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->length;
	if( r16 >= r6 ) goto label$3fda7ba_24_45;
	r17 = r0->text;
	if( r17 == NULL ) hl_null_access();
	r6 = r17->length;
	r0->cursorIndex = r6;
	label$3fda7ba_24_45:
	r17 = r0->text;
	r0->cursorText = r17;
	r6 = r0->cursorIndex;
	r0->cursorXIndex = r6;
	r17 = r0->text;
	if( r17 == NULL ) hl_null_access();
	r6 = 0;
	r16 = r0->cursorIndex;
	r3 = hl_alloc_dynamic(&t$_i32);
	r3->v.i = r16;
	r17 = String_substr(r17,r6,r3);
	r11 = h2d_Text_calcTextWidth(((h2d__Text)r0),r17);
	r0->cursorX = r11;
	r3 = r0->inputWidth;
	if( !r3 ) goto label$3fda7ba_24_75;
	r11 = r0->cursorX;
	r12 = r0->scrollX;
	r11 = r11 - r12;
	r3 = r0->inputWidth;
	r6 = r3 ? r3->v.i : 0;
	r12 = (double)r6;
	if( !(r11 >= r12) ) goto label$3fda7ba_24_75;
	r11 = r0->cursorX;
	r3 = r0->inputWidth;
	r6 = r3 ? r3->v.i : 0;
	r12 = (double)r6;
	r11 = r11 - r12;
	r12 = 1.;
	r11 = r11 + r12;
	r0->scrollX = r11;
	goto label$3fda7ba_24_80;
	label$3fda7ba_24_75:
	r11 = r0->cursorX;
	r12 = r0->scrollX;
	if( !(r11 < r12) ) goto label$3fda7ba_24_80;
	r11 = r0->cursorX;
	r0->scrollX = r11;
	label$3fda7ba_24_80:
	r11 = r0->absX;
	r12 = r0->scrollX;
	r13 = r0->matA;
	r12 = r12 * r13;
	r11 = r11 - r12;
	r0->absX = r11;
	r11 = r0->absY;
	r12 = r0->scrollX;
	r13 = r0->matC;
	r12 = r12 * r13;
	r11 = r11 - r12;
	r0->absY = r11;
	r19 = r0->selectionRange;
	if( !r19 ) goto label$3fda7ba_24_162;
	r11 = r0->selectionSize;
	r12 = 0.;
	if( r11 != r12 ) goto label$3fda7ba_24_136;
	r17 = r0->text;
	if( r17 == NULL ) hl_null_access();
	r6 = 0;
	r19 = r0->selectionRange;
	if( r19 == NULL ) hl_null_access();
	r16 = hl_vfields(r19)[1] ? (*(int*)(hl_vfields(r19)[1])) : (int)hl_dyn_geti(r19->value,-469011757/*start*/,&t$_i32);
	r3 = hl_alloc_dynamic(&t$_i32);
	r3->v.i = r16;
	r17 = String_substr(r17,r6,r3);
	r11 = h2d_Text_calcTextWidth(((h2d__Text)r0),r17);
	r0->selectionPos = r11;
	r17 = r0->text;
	if( r17 == NULL ) hl_null_access();
	r19 = r0->selectionRange;
	if( r19 == NULL ) hl_null_access();
	r6 = hl_vfields(r19)[1] ? (*(int*)(hl_vfields(r19)[1])) : (int)hl_dyn_geti(r19->value,-469011757/*start*/,&t$_i32);
	r19 = r0->selectionRange;
	if( r19 == NULL ) hl_null_access();
	r16 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,-16280745/*length*/,&t$_i32);
	r3 = hl_alloc_dynamic(&t$_i32);
	r3->v.i = r16;
	r17 = String_substr(r17,r6,r3);
	r11 = h2d_Text_calcTextWidth(((h2d__Text)r0),r17);
	r0->selectionSize = r11;
	r19 = r0->selectionRange;
	if( r19 == NULL ) hl_null_access();
	r6 = hl_vfields(r19)[1] ? (*(int*)(hl_vfields(r19)[1])) : (int)hl_dyn_geti(r19->value,-469011757/*start*/,&t$_i32);
	r19 = r0->selectionRange;
	if( r19 == NULL ) hl_null_access();
	r16 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,-16280745/*length*/,&t$_i32);
	r6 = r6 + r16;
	r17 = r0->text;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->length;
	if( r6 != r16 ) goto label$3fda7ba_24_136;
	r11 = r0->selectionSize;
	r20 = r0->cursorTile;
	if( r20 == NULL ) hl_null_access();
	r12 = r20->width;
	r11 = r11 + r12;
	r0->selectionSize = r11;
	label$3fda7ba_24_136:
	r20 = r0->selectionTile;
	if( r20 == NULL ) hl_null_access();
	r11 = r20->dx;
	r12 = r0->selectionPos;
	r11 = r11 + r12;
	r20->dx = r11;
	r20 = r0->selectionTile;
	if( r20 == NULL ) hl_null_access();
	r11 = r20->width;
	r12 = r0->selectionSize;
	r11 = r11 + r12;
	r20->width = r11;
	r20 = r0->selectionTile;
	h2d_Drawable_emitTile(((h2d__Drawable)r0),r1,r20);
	r20 = r0->selectionTile;
	if( r20 == NULL ) hl_null_access();
	r11 = r20->dx;
	r12 = r0->selectionPos;
	r11 = r11 - r12;
	r20->dx = r11;
	r20 = r0->selectionTile;
	if( r20 == NULL ) hl_null_access();
	r11 = r20->width;
	r12 = r0->selectionSize;
	r11 = r11 - r12;
	r20->width = r11;
	label$3fda7ba_24_162:
	h2d_Text_draw(((h2d__Text)r0),r1);
	r11 = r0->absX;
	r12 = r0->scrollX;
	r13 = r0->matA;
	r12 = r12 * r13;
	r11 = r11 + r12;
	r0->absX = r11;
	r11 = r0->absY;
	r12 = r0->scrollX;
	r13 = r0->matC;
	r12 = r12 * r13;
	r11 = r11 + r12;
	r0->absY = r11;
	r6 = r0->cursorIndex;
	r16 = 0;
	if( r6 < r16 ) goto label$3fda7ba_24_208;
	r11 = r0->cursorBlink;
	if( r1 == NULL ) hl_null_access();
	r12 = r1->elapsedTime;
	r11 = r11 + r12;
	r0->cursorBlink = r11;
	r11 = r0->cursorBlink;
	r12 = r0->cursorBlinkTime;
	r13 = 2.;
	r12 = r12 * r13;
	r11 = fmod(r11,r12);
	r12 = r0->cursorBlinkTime;
	if( !(r11 < r12) ) goto label$3fda7ba_24_208;
	r20 = r0->cursorTile;
	if( r20 == NULL ) hl_null_access();
	r11 = r20->dx;
	r12 = r0->cursorX;
	r13 = r0->scrollX;
	r12 = r12 - r13;
	r11 = r11 + r12;
	r20->dx = r11;
	r20 = r0->cursorTile;
	h2d_Drawable_emitTile(((h2d__Drawable)r0),r1,r20);
	r20 = r0->cursorTile;
	if( r20 == NULL ) hl_null_access();
	r11 = r20->dx;
	r12 = r0->cursorX;
	r13 = r0->scrollX;
	r12 = r12 - r13;
	r11 = r11 - r12;
	r20->dx = r11;
	label$3fda7ba_24_208:
	r3 = r0->inputWidth;
	if( !r3 ) goto label$3fda7ba_24_212;
	if( r1 == NULL ) hl_null_access();
	h2d_RenderContext_popRenderZone(r1);
	label$3fda7ba_24_212:
	return;
}

void h2d_TextInput_focus(h2d__TextInput r0) {
	String r5, r6;
	vvirtual *r7;
	h2d__Interactive r2;
	int r3, r4;
	r2 = r0->interactive;
	if( r2 == NULL ) hl_null_access();
	h2d_Interactive_focus(r2);
	r3 = r0->cursorIndex;
	r4 = 0;
	if( r3 >= r4 ) goto label$3fda7ba_25_19;
	r3 = 0;
	r0->cursorIndex = r3;
	r5 = r0->text;
	r6 = (String)s$;
	if( r5 == r6 || (r5 && r6 && String___compare(r5,(vdynamic*)r6) == 0) ) goto label$3fda7ba_25_19;
	r7 = hl_alloc_virtual(&t$vrt_f651ef3);
	r3 = 0;
	if( hl_vfields(r7)[1] ) *(int*)(hl_vfields(r7)[1]) = (int)r3; else hl_dyn_seti(r7->value,-469011757/*start*/,&t$_i32,r3);
	r5 = r0->text;
	if( r5 == NULL ) hl_null_access();
	r3 = r5->length;
	if( hl_vfields(r7)[0] ) *(int*)(hl_vfields(r7)[0]) = (int)r3; else hl_dyn_seti(r7->value,-16280745/*length*/,&t$_i32,r3);
	r0->selectionRange = r7;
	label$3fda7ba_25_19:
	return;
}

void h2d_TextInput_onOut(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onOver(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onMove(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onClick(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onPush(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onRelease(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onKeyDown(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onKeyUp(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onTextInput(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onFocus(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onFocusLost(h2d__TextInput r0,hxd__Event r1) {
	return;
}

void h2d_TextInput_onChange(h2d__TextInput r0) {
	return;
}

void h2d_TextInput_drawRec(h2d__TextInput r0,h2d__RenderContext r1) {
	bool r2, r5;
	h2d__Interactive r3;
	r3 = r0->interactive;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->visible;
	r3 = r0->interactive;
	if( r3 == NULL ) hl_null_access();
	r5 = false;
	r5 = h2d_Object_set_visible(((h2d__Object)r3),r5);
	r3 = r0->interactive;
	if( r3 == NULL ) hl_null_access();
	h2d_Interactive_draw(r3,r1);
	h2d_Object_drawRec(((h2d__Object)r0),r1);
	r3 = r0->interactive;
	if( r3 == NULL ) hl_null_access();
	r5 = h2d_Object_set_visible(((h2d__Object)r3),r2);
	return;
}

void h2d_TextInput_new(h2d__TextInput r0,h2d__Font r1,h2d__Object r2) {
	vvirtual *r15;
	hl__types__ArrayObj r7;
	venum *r16;
	hl_type *r9;
	bool r10;
	h2d__Object r12;
	double r6, r14;
	vclosure *r3, *r4;
	h2d__Interactive r13;
	varray *r8;
	int r5;
	r3 = r0->onOut;
	if( r3 ) goto label$3fda7ba_39_4;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onOut,r0);
	r0->onOut = r3;
	label$3fda7ba_39_4:
	r3 = r0->onOver;
	if( r3 ) goto label$3fda7ba_39_8;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onOver,r0);
	r0->onOver = r3;
	label$3fda7ba_39_8:
	r3 = r0->onMove;
	if( r3 ) goto label$3fda7ba_39_12;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onMove,r0);
	r0->onMove = r3;
	label$3fda7ba_39_12:
	r3 = r0->onClick;
	if( r3 ) goto label$3fda7ba_39_16;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onClick,r0);
	r0->onClick = r3;
	label$3fda7ba_39_16:
	r3 = r0->onPush;
	if( r3 ) goto label$3fda7ba_39_20;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onPush,r0);
	r0->onPush = r3;
	label$3fda7ba_39_20:
	r3 = r0->onRelease;
	if( r3 ) goto label$3fda7ba_39_24;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onRelease,r0);
	r0->onRelease = r3;
	label$3fda7ba_39_24:
	r3 = r0->onKeyDown;
	if( r3 ) goto label$3fda7ba_39_28;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onKeyDown,r0);
	r0->onKeyDown = r3;
	label$3fda7ba_39_28:
	r3 = r0->onKeyUp;
	if( r3 ) goto label$3fda7ba_39_32;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onKeyUp,r0);
	r0->onKeyUp = r3;
	label$3fda7ba_39_32:
	r3 = r0->onTextInput;
	if( r3 ) goto label$3fda7ba_39_36;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onTextInput,r0);
	r0->onTextInput = r3;
	label$3fda7ba_39_36:
	r3 = r0->onFocus;
	if( r3 ) goto label$3fda7ba_39_40;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onFocus,r0);
	r0->onFocus = r3;
	label$3fda7ba_39_40:
	r3 = r0->onFocusLost;
	if( r3 ) goto label$3fda7ba_39_44;
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_onFocusLost,r0);
	r0->onFocusLost = r3;
	label$3fda7ba_39_44:
	r4 = r0->onChange;
	if( r4 ) goto label$3fda7ba_39_48;
	r4 = hl_alloc_closure_ptr(&t$fun_1df4ca5,h2d_TextInput_onChange,r0);
	r0->onChange = r4;
	label$3fda7ba_39_48:
	r5 = 100;
	r0->maxHistorySize = r5;
	r6 = 0.;
	r0->lastClick = r6;
	r6 = 0.;
	r0->lastChange = r6;
	r9 = &t$vrt_8f7336e;
	r5 = 0;
	r8 = hl_alloc_array(r9,r5);
	r7 = hl_types_ArrayObj_alloc(r8);
	r0->redo = r7;
	r9 = &t$vrt_8f7336e;
	r5 = 0;
	r8 = hl_alloc_array(r9,r5);
	r7 = hl_types_ArrayObj_alloc(r8);
	r0->undo = r7;
	r6 = 0.;
	r0->scrollX = r6;
	r6 = 0.;
	r0->cursorBlink = r6;
	r10 = true;
	r0->canEdit = r10;
	r6 = 0.5;
	r0->cursorBlinkTime = r6;
	r5 = -1;
	r0->cursorIndex = r5;
	h2d_Text_new(((h2d__Text)r0),r1,r2);
	r13 = (h2d__Interactive)hl_alloc_obj(&t$h2d_Interactive);
	r6 = 0.;
	r14 = 0.;
	r12 = NULL;
	r15 = NULL;
	h2d_Interactive_new(r13,r6,r14,r12,r15);
	r0->interactive = r13;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r16 = (venum*)g$hxd_Cursor_TextInput;
	r16 = h2d_Interactive_set_cursor(r13,r16);
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$1,r0);
	r13->onPush = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$3,r0);
	r13->onKeyDown = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$4,r0);
	r13->onTextInput = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$5,r0);
	r13->onFocusLost = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$6,r0);
	r13->onClick = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$7,r0);
	r13->onKeyUp = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$8,r0);
	r13->onRelease = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$9,r0);
	r13->onFocus = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$10,r0);
	r13->onKeyUp = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$11,r0);
	r13->onMove = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$12,r0);
	r13->onOver = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_0def39d,h2d_TextInput_new__$13,r0);
	r13->onOut = r3;
	r13 = r0->interactive;
	if( r13 == NULL ) hl_null_access();
	r16 = (venum*)g$hxd_Cursor_TextInput;
	r16 = h2d_Interactive_set_cursor(r13,r16);
	r13 = r0->interactive;
	r5 = 0;
	h2d_Object_addChildAt(((h2d__Object)r0),((h2d__Object)r13),r5);
	return;
}

