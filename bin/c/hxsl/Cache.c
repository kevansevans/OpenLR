// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <hxsl/Cache.h>
extern hl_type t$hxsl_SearchMap;
void hxsl_SearchMap_new(hxsl__SearchMap);
extern hl_type t$haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
extern hl_type t$haxe_ds_IntMap;
void haxe_ds_IntMap_new(haxe__ds__IntMap);
#include <hxsl/VecType.h>
extern hl_type t$vrt_6e3ace9;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$hxsl_Type;
int hxsl_Tools_size(venum*);
void hl_types_ArrayObj_unshift(hl__types__ArrayObj,vdynamic*);
extern hl_type t$hxsl_TExprDef;
extern venum* g$hxsl_Type_TVoid;
extern hl_type t$vrt_379f5a4;
extern venum* g$hxsl_VecType_VFloat;
String hxsl_Tools_getName(vvirtual*);
extern String s$5058f1a;
String String___add__(String,String);
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
extern hl_type t$vrt_09f4a29;
extern hl_type t$vrt_cf61ea9;
int hxsl_Tools_allocVarId(void);
extern hl_type t$_i32;
extern hl_type t$String;
extern venum* g$hxsl_VarKind_Var;
extern hl_type t$hxsl_VarKind;
extern hl_type t$hl_types_ArrayObj;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern String s$assert;
vdynamic* haxe_Exception_thrown(vdynamic*);
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
#include <hxsl/Const.h>
extern hl_type t$hxsl_Const;
extern venum* g$hxsl_Type_TFloat;
hl__types__ArrayObj String_split(String,String);
vdynamic* hl_types_ArrayObj_shift(hl__types__ArrayObj);
extern venum* g$hxsl_TGlobal_PackNormal;
extern venum* g$hxsl_TGlobal_Pack;
extern venum* g$hxsl_TGlobal_Vec2;
extern venum* g$hxsl_TGlobal_Vec3;
extern venum* g$hxsl_TGlobal_Vec4;
#include <haxe/macro/Binop.h>
extern hl_type t$vrt_3e1dcdc;
extern String s$OUTPUT;
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);
String String___alloc__(vbyte*,int);
extern venum* g$hxsl_VarKind_Output;
extern venum* g$haxe_macro_Binop_OpAssign;
#include <hxsl/FunctionKind.h>
extern hl_type t$vrt_d3744c2;
extern String s$;
String Std_string(vdynamic*);
String String_toLowerCase(String);
extern venum* g$hxsl_VarKind_Function;
extern hl_type t$vrt_ab557b2;
extern hl_type t$hxsl_FunctionKind;
#include <hxsl/Shader.h>
#include <hxsl/Globals.h>
extern String s$c0cb5f0;
String hl_types_ArrayObj_join(hl__types__ArrayObj,String);
extern hl_type t$hxsl_SharedShader;
void hxsl_SharedShader_new(hxsl__SharedShader,String);
String haxe_crypto_Md5_encode(String);
String String_substr(String,int,vdynamic*);
extern hl_type t$vrt_f479cb2;
extern String s$shaderLinker_;
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern hl_type t$fun_056ca56;
extern hl_type t$ctx_6fe9cfc;
extern hl_type t$fun_6f86a66;
extern hl_type t$fun_7e7e96e;
extern hl_type t$ctx_7028576;
extern hl_type t$fun_e4894d1;
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
extern hl_type t$ctx_155a94c;
extern hl_type t$fun_3085266;
extern hl_type t$ctx_affda8a;
extern hl_type t$fun_5a5e3c2;
extern venum* g$hxsl_FunctionKind_Vertex;
extern hl_type t$hxsl_Output;
extern String s$output_position;
extern venum* g$hxsl_FunctionKind_Fragment;
extern hxsl__$Shader g$_hxsl_Shader;
vdynamic* Type_createEmptyInstance(hl__Class);
extern hl_type t$hxsl_Shader;
extern hl_type t$_dyn;
void hxsl_Shader_updateConstantsFinal(hxsl__Shader,hxsl__Globals);
#include <hxsl/ShaderList.h>
#include <hxsl/ShaderInstance.h>
#include <hxsl/RuntimeShader.h>
vdynamic* haxe_ds_IntMap_get(haxe__ds__IntMap,int);
void haxe_ds_IntMap_set(haxe__ds__IntMap,int,vdynamic*);
hxsl__RuntimeShader hxsl_Cache_compileRuntimeShader(hxsl__Cache,hxsl__ShaderList,bool);
#include <hxsl/VarQualifier.h>
extern venum* g$hxsl_VarQualifier_PerObject;
int hl_types_ArrayObj_indexOf(hl__types__ArrayObj,vdynamic*,vdynamic*);
hl__types__ArrayObj hl_types_ArrayObj_copy(hl__types__ArrayObj);
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
extern venum* g$hxsl_VarKind_Local;
#include <hl/types/ArrayDyn.h>
#include <hxsl/Linker.h>
#include <haxe/Exception.h>
#include <hxsl/Error.h>
#include <hxsl/_Linker/AllocatedVar.h>
#include <hxsl/Splitter.h>
#include <hxsl/Dce.h>
#include <hxsl/ShaderInstanceDesc.h>
#include <hxsl/RuntimeShaderData.h>
extern hl_type t$fun_8000bc1;
extern hl_type t$vrt_283fa46;
extern hl_type t$hxsl_ShaderInstance;
void hl_types_ArrayObj_reverse(hl__types__ArrayObj);
extern hl_type t$hl_types_ArrayDyn;
int hxsl_Cache_compileRuntimeShader__$2(vclosure*,vdynamic*,vdynamic*);
extern hl_type t$fun_d4c4225;
void haxe_ds_ArraySort_sort(hl__types__ArrayDyn,vclosure*);
extern hl_type t$hxsl_Linker;
void hxsl_Linker_new(hxsl__Linker,bool*);
vvirtual* hxsl_Linker_link(hxsl__Linker,hl__types__ArrayObj);
haxe__Exception haxe_Exception_caught(vdynamic*);
extern hxsl__$Error g$_hxsl_Error;
bool Std_isOfType(vdynamic*,vdynamic*);
extern hl_type t$hxsl_Error;
String hxsl_Printer_shaderToString(vvirtual*,bool*);
extern String s$b8ab2cd;
extern String s$3926582;
extern hl_type t$fun_cd51779;
extern hl_type t$fun_af8bfcb;
extern venum* g$hxsl_VarKind_Param;
extern hl_type t$vrt_70d5f54;
extern hl_type t$nul_i32;
extern hl_type t$hxsl_Splitter;
void hxsl_Splitter_new(hxsl__Splitter);
vvirtual* hxsl_Splitter_split(hxsl__Splitter,vvirtual*);
extern hl_type t$hxsl_Dce;
void hxsl_Dce_new(hxsl__Dce);
vvirtual* hxsl_Dce_dce(hxsl__Dce,vvirtual*,vvirtual*);
hxsl__RuntimeShader hxsl_Cache_buildRuntimeShader(hxsl__Cache,vvirtual*,vvirtual*,haxe__ds__IntMap);
extern hl_type t$hxsl_ShaderInstanceDesc;
void hxsl_ShaderInstanceDesc_new(hxsl__ShaderInstanceDesc,hxsl__SharedShader,int);
extern hl_type t$vrt_a3e2f53;
extern String s$b14a7b8;
extern String s$853ae90;
extern hl_type t$hxsl_RuntimeShader;
void hxsl_RuntimeShader_new(hxsl__RuntimeShader);
hxsl__RuntimeShaderData hxsl_Cache_flattenShader(hxsl__Cache,vvirtual*,venum*,haxe__ds__IntMap);
void hxsl_Cache_initGlobals(hxsl__Cache,hxsl__RuntimeShader,hxsl__RuntimeShaderData);
#include <hxsl/AllocGlobal.h>
#include <hxsl/AllocParam.h>
#include <hxsl/Flatten.h>
#include <hl/types/ArrayBytes_Float.h>
#include <haxe/ds/ObjectMap.h>
#include <hxsl/_Flatten/Alloc.h>
#include <hxsl/SizeDecl.h>
extern hl_type t$fun_ba16e83;
extern hl_type t$hxsl_Flatten;
void hxsl_Flatten_new(hxsl__Flatten);
extern hl_type t$hxsl_RuntimeShaderData;
void hxsl_RuntimeShaderData_new(hxsl__RuntimeShaderData);
vvirtual* hxsl_Flatten_flatten(hxsl__Flatten,vvirtual*,venum*,bool);
extern hl_type t$vrt_7c116e9;
vvirtual* haxe_ds_ObjectMap_keys(haxe__ds__ObjectMap);
extern hl_type t$vrt_11e33cd;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_32c99d1;
vdynamic* haxe_ds_ObjectMap_get(haxe__ds__ObjectMap,vdynamic*);
extern hl_type t$hxsl_AllocGlobal;
void hxsl_AllocGlobal_new(hxsl__AllocGlobal,int,String,venum*);
extern hl_type t$hxsl_AllocParam;
extern hl_type t$vrt_7e2476c;
void hxsl_AllocParam_new(hxsl__AllocParam,String,int,int,int,venum*);
bool hxsl_Tools_isSampler(venum*);
int hxsl_Cache_flattenShader__$2(vclosure*,vdynamic*,vdynamic*);
extern hl_type t$fun_aafc2df;
void hl_types_ArrayObj_sort(hl__types__ArrayObj,vclosure*);
extern hxsl__$Cache g$_hxsl_Cache;
extern hl_type t$hxsl_Cache;

void hxsl_Cache_new(hxsl__Cache r0) {
	haxe__ds__StringMap r4;
	bool r1;
	haxe__ds__IntMap r5;
	hxsl__SearchMap r2;
	r1 = false;
	r0->constsToGlobal = r1;
	r2 = (hxsl__SearchMap)hl_alloc_obj(&t$hxsl_SearchMap);
	hxsl_SearchMap_new(r2);
	r0->linkCache = r2;
	r4 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r4);
	r0->linkShaders = r4;
	r5 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r5);
	r0->batchShaders = r5;
	r4 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r4);
	r0->byID = r4;
	return;
}

vvirtual* hxsl_Cache_getLinkShader__$1(vvirtual* r0,venum* r1,int r2,hl__types__ArrayObj r3,vclosure* r4) {
	vvirtual *r14, *r20;
	hl__types__ArrayObj r5;
	venum *r16, *r19, *r21, *r22;
	hl_type *r7;
	vdynamic *r17;
	int r8, r10, r11, r12, r13, r15, r18;
	varray *r6;
	r7 = &t$vrt_6e3ace9;
	r8 = 0;
	r6 = hl_alloc_array(r7,r8);
	r5 = hl_types_ArrayObj_alloc(r6);
	r8 = r2;
	r10 = 0;
	if( r3 == NULL ) hl_null_access();
	r11 = r3->length;
	label$2c4895f_2_8:
	if( r10 >= r11 ) goto label$2c4895f_2_39;
	r12 = r10;
	++r10;
	if( r4 == NULL ) hl_null_access();
	if( r3 == NULL ) hl_null_access();
	r13 = r3->length;
	r15 = 1;
	r13 = r13 - r15;
	r13 = r13 - r12;
	r15 = r3->length;
	if( ((unsigned)r13) < ((unsigned)r15) ) goto label$2c4895f_2_22;
	r16 = NULL;
	goto label$2c4895f_2_25;
	label$2c4895f_2_22:
	r6 = r3->array;
	r17 = ((vdynamic**)(r6 + 1))[r13];
	r16 = (venum*)r17;
	label$2c4895f_2_25:
	r15 = r3->length;
	r18 = 1;
	r15 = r15 - r18;
	r15 = r15 - r12;
	r13 = r8 - r15;
	r14 = r4->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r4->fun)((vdynamic*)r4->value,r16,r13) : ((vvirtual* (*)(venum*,int))r4->fun)(r16,r13);
	if( r14 == NULL ) hl_null_access();
	r19 = hl_vfields(r14)[2] ? (*(venum**)(hl_vfields(r14)[2])) : (venum*)hl_dyn_getp(r14->value,116/*t*/,&t$hxsl_Type);
	r15 = hxsl_Tools_size(r19);
	r13 = r8 - r15;
	r8 = r13;
	if( r5 == NULL ) hl_null_access();
	hl_types_ArrayObj_unshift(r5,((vdynamic*)r14));
	goto label$2c4895f_2_8;
	label$2c4895f_2_39:
	r14 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r20 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r21 = hl_alloc_enum(&t$hxsl_TExprDef,2);
	((hxsl_TExprDef_TGlobal*)r21)->p0 = r1;
	if( hl_vfields(r20)[0] ) *(venum**)(hl_vfields(r20)[0]) = (venum*)r21; else hl_dyn_setp(r20->value,101/*e*/,&t$hxsl_TExprDef,r21);
	r19 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r20)[2] ) *(venum**)(hl_vfields(r20)[2]) = (venum*)r19; else hl_dyn_setp(r20->value,116/*t*/,&t$hxsl_Type,r19);
	if( hl_vfields(r20)[1] ) *(vvirtual**)(hl_vfields(r20)[1]) = (vvirtual*)r0; else hl_dyn_setp(r20->value,112/*p*/,&t$vrt_379f5a4,r0);
	r21 = hl_alloc_enum(&t$hxsl_TExprDef,8);
	((hxsl_TExprDef_TCall*)r21)->p0 = r20;
	((hxsl_TExprDef_TCall*)r21)->p1 = r5;
	if( hl_vfields(r14)[0] ) *(venum**)(hl_vfields(r14)[0]) = (venum*)r21; else hl_dyn_setp(r14->value,101/*e*/,&t$hxsl_TExprDef,r21);
	r22 = (venum*)g$hxsl_VecType_VFloat;
	r19 = hl_alloc_enum(&t$hxsl_Type,5);
	((hxsl_Type_TVec*)r19)->p0 = r2;
	((hxsl_Type_TVec*)r19)->p1 = r22;
	if( hl_vfields(r14)[2] ) *(venum**)(hl_vfields(r14)[2]) = (venum*)r19; else hl_dyn_setp(r14->value,116/*t*/,&t$hxsl_Type,r19);
	if( hl_vfields(r14)[1] ) *(vvirtual**)(hl_vfields(r14)[1]) = (vvirtual*)r0; else hl_dyn_setp(r14->value,112/*p*/,&t$vrt_379f5a4,r0);
	return r14;
}

vvirtual* hxsl_Cache_getLinkShader__$2(venum* r0,String r1,venum* r2,vvirtual* r3) {
	String r4, r6;
	hl__types__ArrayObj r15;
	haxe__ds__StringMap r9;
	vvirtual *r5, *r10, *r11, *r16;
	venum *r13, *r14;
	hxsl__SharedShader r17;
	vdynamic *r8;
	int r12, r18;
	if( r3 ) goto label$2c4895f_3_3;
	r4 = r1;
	goto label$2c4895f_3_7;
	label$2c4895f_3_3:
	r4 = hxsl_Tools_getName(r3);
	r6 = (String)s$5058f1a;
	r4 = String___add__(r4,r6);
	r4 = String___add__(r4,r1);
	label$2c4895f_3_7:
	r9 = ((Enumt$ctx_6fe9cfc*)r0)->p1;
	if( r9 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r9,r4);
	r5 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r8);
	if( !r5 ) goto label$2c4895f_3_13;
	return r5;
	label$2c4895f_3_13:
	r11 = hl_alloc_virtual(&t$vrt_cf61ea9);
	r12 = hxsl_Tools_allocVarId();
	if( hl_vfields(r11)[0] ) *(int*)(hl_vfields(r11)[0]) = (int)r12; else hl_dyn_seti(r11->value,23515/*id*/,&t$_i32,r12);
	if( hl_vfields(r11)[2] ) *(String*)(hl_vfields(r11)[2]) = (String)r1; else hl_dyn_setp(r11->value,150958933/*name*/,&t$String,r1);
	if( hl_vfields(r11)[4] ) *(venum**)(hl_vfields(r11)[4]) = (venum*)r2; else hl_dyn_setp(r11->value,218690500/*type*/,&t$hxsl_Type,r2);
	r14 = (venum*)g$hxsl_VarKind_Var;
	if( hl_vfields(r11)[1] ) *(venum**)(hl_vfields(r11)[1]) = (venum*)r14; else hl_dyn_setp(r11->value,118088286/*kind*/,&t$hxsl_VarKind,r14);
	if( hl_vfields(r11)[3] ) *(vvirtual**)(hl_vfields(r11)[3]) = (vvirtual*)r3; else hl_dyn_setp(r11->value,-310508246/*parent*/,&t$vrt_09f4a29,r3);
	r10 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r11);
	r5 = r10;
	if( r3 ) goto label$2c4895f_3_32;
	r17 = ((Enumt$ctx_6fe9cfc*)r0)->p0;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->data;
	if( r16 == NULL ) hl_null_access();
	r15 = hl_vfields(r16)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r16)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r16->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	if( r15 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r15,((vdynamic*)r5));
	goto label$2c4895f_3_45;
	label$2c4895f_3_32:
	if( r3 == NULL ) hl_null_access();
	r13 = hl_vfields(r3)[5] ? (*(venum**)(hl_vfields(r3)[5])) : (venum*)hl_dyn_getp(r3->value,218690500/*type*/,&t$hxsl_Type);
	if( r13 == NULL ) hl_null_access();
	r12 = HL__ENUM_INDEX__(r13);
	r18 = 13;
	if( r12 != r18 ) goto label$2c4895f_3_42;
	r15 = ((hxsl_Type_TStruct*)r13)->p0;
	if( r15 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r15,((vdynamic*)r5));
	goto label$2c4895f_3_45;
	label$2c4895f_3_42:
	r6 = (String)s$assert;
	r8 = haxe_Exception_thrown(((vdynamic*)r6));
	hl_throw((vdynamic*)r8);
	label$2c4895f_3_45:
	r9 = ((Enumt$ctx_6fe9cfc*)r0)->p1;
	if( r9 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r9,r4,((vdynamic*)r5));
	return r5;
}

vvirtual* hxsl_Cache_getLinkShader__$3(venum* r0,venum* r1,int r2) {
	String r13, r15, r19;
	hl__types__ArrayObj r18, r20, r33;
	haxe__ds__StringMap r14;
	vvirtual *r6, *r10, *r16, *r17, *r22, *r27, *r29;
	hl_type *r25;
	venum *r4, *r7, *r8, *r9, *r26, *r28;
	vclosure *r23, *r30, *r32;
	double r5;
	vdynamic *r11, *r12;
	varray *r24, *r31;
	int r3, r21, r34;
	if( r1 == NULL ) hl_null_access();
	r3 = HL__ENUM_INDEX__(r1);
	switch(r3) {
		default:
			goto label$2c4895f_4_223;
		case 0:
			r5 = ((hxsl_Output_Const*)r1)->p0;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r8 = hl_alloc_enum(&t$hxsl_Const,3);
			((hxsl_Const_CFloat*)r8)->p0 = r5;
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,0);
			((hxsl_TExprDef_TConst*)r7)->p0 = r8;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = (venum*)g$hxsl_Type_TFloat;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 1:
			r12 = ((hxsl_Output_Value*)r1)->p1;
			r13 = ((hxsl_Output_Value*)r1)->p0;
			r14 = ((Enumt$ctx_7028576*)r0)->p1;
			if( r14 == NULL ) hl_null_access();
			r11 = haxe_ds_StringMap_get(r14,r13);
			r16 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r11);
			if( !r16 ) goto label$2c4895f_4_30;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,1);
			((hxsl_TExprDef_TVar*)r7)->p0 = r16;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			if( r16 == NULL ) hl_null_access();
			r9 = hl_vfields(r16)[5] ? (*(venum**)(hl_vfields(r16)[5])) : (venum*)hl_dyn_getp(r16->value,218690500/*type*/,&t$hxsl_Type);
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
			label$2c4895f_4_30:
			if( r13 == NULL ) hl_null_access();
			r19 = (String)s$5058f1a;
			r18 = String_split(r13,r19);
			r17 = NULL;
			label$2c4895f_4_34:
			if( r18 == NULL ) hl_null_access();
			r3 = r18->length;
			r21 = 1;
			if( r21 >= r3 ) goto label$2c4895f_4_51;
			r23 = ((Enumt$ctx_7028576*)r0)->p4;
			if( r23 == NULL ) hl_null_access();
			r11 = hl_types_ArrayObj_shift(r18);
			r15 = (String)r11;
			r25 = &t$vrt_09f4a29;
			r3 = 0;
			r24 = hl_alloc_array(r25,r3);
			r20 = hl_types_ArrayObj_alloc(r24);
			r9 = hl_alloc_enum(&t$hxsl_Type,13);
			((hxsl_Type_TStruct*)r9)->p0 = r20;
			r22 = r23->hasValue ? ((vvirtual* (*)(vdynamic*,String,venum*,vvirtual*))r23->fun)((vdynamic*)r23->value,r15,r9,r17) : ((vvirtual* (*)(String,venum*,vvirtual*))r23->fun)(r15,r9,r17);
			r17 = r22;
			goto label$2c4895f_4_34;
			label$2c4895f_4_51:
			if( !r12 ) goto label$2c4895f_4_54;
			r3 = r12 ? r12->v.i : 0;
			r2 = r3;
			label$2c4895f_4_54:
			r23 = ((Enumt$ctx_7028576*)r0)->p4;
			if( r23 == NULL ) hl_null_access();
			r11 = hl_types_ArrayObj_shift(r18);
			r15 = (String)r11;
			r21 = 1;
			if( r2 != r21 ) goto label$2c4895f_4_62;
			r9 = (venum*)g$hxsl_Type_TFloat;
			goto label$2c4895f_4_64;
			label$2c4895f_4_62:
			r26 = (venum*)g$hxsl_VecType_VFloat;
			r9 = hl_alloc_enum(&t$hxsl_Type,5);
			((hxsl_Type_TVec*)r9)->p0 = r2;
			((hxsl_Type_TVec*)r9)->p1 = r26;
			label$2c4895f_4_64:
			r22 = r23->hasValue ? ((vvirtual* (*)(vdynamic*,String,venum*,vvirtual*))r23->fun)((vdynamic*)r23->value,r15,r9,r17) : ((vvirtual* (*)(String,venum*,vvirtual*))r23->fun)(r15,r9,r17);
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,1);
			((hxsl_TExprDef_TVar*)r7)->p0 = r22;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			if( r22 == NULL ) hl_null_access();
			r9 = hl_vfields(r22)[5] ? (*(venum**)(hl_vfields(r22)[5])) : (venum*)hl_dyn_getp(r22->value,218690500/*type*/,&t$hxsl_Type);
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 2:
			r4 = ((hxsl_Output_PackNormal*)r1)->p0;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r27 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r28 = (venum*)g$hxsl_TGlobal_PackNormal;
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,2);
			((hxsl_TExprDef_TGlobal*)r7)->p0 = r28;
			if( hl_vfields(r27)[0] ) *(venum**)(hl_vfields(r27)[0]) = (venum*)r7; else hl_dyn_setp(r27->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = (venum*)g$hxsl_Type_TVoid;
			if( hl_vfields(r27)[2] ) *(venum**)(hl_vfields(r27)[2]) = (venum*)r9; else hl_dyn_setp(r27->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r27)[1] ) *(vvirtual**)(hl_vfields(r27)[1]) = (vvirtual*)r10; else hl_dyn_setp(r27->value,112/*p*/,&t$vrt_379f5a4,r10);
			r25 = &t$vrt_6e3ace9;
			r3 = 1;
			r24 = hl_alloc_array(r25,r3);
			r18 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r18 == NULL ) hl_null_access();
			r3 = 0;
			r21 = r18->length;
			if( ((unsigned)r3) < ((unsigned)r21) ) goto label$2c4895f_4_94;
			r30 = NULL;
			goto label$2c4895f_4_97;
			label$2c4895f_4_94:
			r31 = r18->array;
			r11 = ((vdynamic**)(r31 + 1))[r3];
			r30 = (vclosure*)r11;
			label$2c4895f_4_97:
			if( r30 == NULL ) hl_null_access();
			r3 = 3;
			r29 = r30->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r30->fun)((vdynamic*)r30->value,r4,r3) : ((vvirtual* (*)(venum*,int))r30->fun)(r4,r3);
			r3 = 0;
			((vvirtual**)(r24 + 1))[r3] = r29;
			r18 = hl_types_ArrayObj_alloc(r24);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,8);
			((hxsl_TExprDef_TCall*)r7)->p0 = r27;
			((hxsl_TExprDef_TCall*)r7)->p1 = r18;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = ((Enumt$ctx_7028576*)r0)->p2;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 3:
			r4 = ((hxsl_Output_PackFloat*)r1)->p0;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r27 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r28 = (venum*)g$hxsl_TGlobal_Pack;
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,2);
			((hxsl_TExprDef_TGlobal*)r7)->p0 = r28;
			if( hl_vfields(r27)[0] ) *(venum**)(hl_vfields(r27)[0]) = (venum*)r7; else hl_dyn_setp(r27->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = (venum*)g$hxsl_Type_TVoid;
			if( hl_vfields(r27)[2] ) *(venum**)(hl_vfields(r27)[2]) = (venum*)r9; else hl_dyn_setp(r27->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r27)[1] ) *(vvirtual**)(hl_vfields(r27)[1]) = (vvirtual*)r10; else hl_dyn_setp(r27->value,112/*p*/,&t$vrt_379f5a4,r10);
			r25 = &t$vrt_6e3ace9;
			r3 = 1;
			r24 = hl_alloc_array(r25,r3);
			r18 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r18 == NULL ) hl_null_access();
			r3 = 0;
			r21 = r18->length;
			if( ((unsigned)r3) < ((unsigned)r21) ) goto label$2c4895f_4_130;
			r30 = NULL;
			goto label$2c4895f_4_133;
			label$2c4895f_4_130:
			r31 = r18->array;
			r11 = ((vdynamic**)(r31 + 1))[r3];
			r30 = (vclosure*)r11;
			label$2c4895f_4_133:
			if( r30 == NULL ) hl_null_access();
			r3 = 1;
			r29 = r30->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r30->fun)((vdynamic*)r30->value,r4,r3) : ((vvirtual* (*)(venum*,int))r30->fun)(r4,r3);
			r3 = 0;
			((vvirtual**)(r24 + 1))[r3] = r29;
			r18 = hl_types_ArrayObj_alloc(r24);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,8);
			((hxsl_TExprDef_TCall*)r7)->p0 = r27;
			((hxsl_TExprDef_TCall*)r7)->p1 = r18;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = ((Enumt$ctx_7028576*)r0)->p2;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 4:
			r18 = ((hxsl_Output_Vec2*)r1)->p0;
			r32 = ((Enumt$ctx_7028576*)r0)->p3;
			if( r32 == NULL ) hl_null_access();
			r28 = (venum*)g$hxsl_TGlobal_Vec2;
			r3 = 2;
			r33 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r33 == NULL ) hl_null_access();
			r21 = 0;
			r34 = r33->length;
			if( ((unsigned)r21) < ((unsigned)r34) ) goto label$2c4895f_4_158;
			r30 = NULL;
			goto label$2c4895f_4_161;
			label$2c4895f_4_158:
			r24 = r33->array;
			r11 = ((vdynamic**)(r24 + 1))[r21];
			r30 = (vclosure*)r11;
			label$2c4895f_4_161:
			r6 = r32->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)((vdynamic*)r32->value,r28,r3,r18,r30) : ((vvirtual* (*)(venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)(r28,r3,r18,r30);
			return r6;
		case 5:
			r18 = ((hxsl_Output_Vec3*)r1)->p0;
			r32 = ((Enumt$ctx_7028576*)r0)->p3;
			if( r32 == NULL ) hl_null_access();
			r28 = (venum*)g$hxsl_TGlobal_Vec3;
			r3 = 3;
			r33 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r33 == NULL ) hl_null_access();
			r21 = 0;
			r34 = r33->length;
			if( ((unsigned)r21) < ((unsigned)r34) ) goto label$2c4895f_4_175;
			r30 = NULL;
			goto label$2c4895f_4_178;
			label$2c4895f_4_175:
			r24 = r33->array;
			r11 = ((vdynamic**)(r24 + 1))[r21];
			r30 = (vclosure*)r11;
			label$2c4895f_4_178:
			r6 = r32->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)((vdynamic*)r32->value,r28,r3,r18,r30) : ((vvirtual* (*)(venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)(r28,r3,r18,r30);
			return r6;
		case 6:
			r18 = ((hxsl_Output_Vec4*)r1)->p0;
			r32 = ((Enumt$ctx_7028576*)r0)->p3;
			if( r32 == NULL ) hl_null_access();
			r28 = (venum*)g$hxsl_TGlobal_Vec4;
			r3 = 4;
			r33 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r33 == NULL ) hl_null_access();
			r21 = 0;
			r34 = r33->length;
			if( ((unsigned)r21) < ((unsigned)r34) ) goto label$2c4895f_4_192;
			r30 = NULL;
			goto label$2c4895f_4_195;
			label$2c4895f_4_192:
			r24 = r33->array;
			r11 = ((vdynamic**)(r24 + 1))[r21];
			r30 = (vclosure*)r11;
			label$2c4895f_4_195:
			r6 = r32->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)((vdynamic*)r32->value,r28,r3,r18,r30) : ((vvirtual* (*)(venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)(r28,r3,r18,r30);
			return r6;
		case 7:
			r18 = ((hxsl_Output_Swiz*)r1)->p1;
			r4 = ((hxsl_Output_Swiz*)r1)->p0;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r20 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r20 == NULL ) hl_null_access();
			r3 = 0;
			r21 = r20->length;
			if( ((unsigned)r3) < ((unsigned)r21) ) goto label$2c4895f_4_207;
			r30 = NULL;
			goto label$2c4895f_4_210;
			label$2c4895f_4_207:
			r24 = r20->array;
			r11 = ((vdynamic**)(r24 + 1))[r3];
			r30 = (vclosure*)r11;
			label$2c4895f_4_210:
			if( r30 == NULL ) hl_null_access();
			r3 = 4;
			r27 = r30->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r30->fun)((vdynamic*)r30->value,r4,r3) : ((vvirtual* (*)(venum*,int))r30->fun)(r4,r3);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,9);
			((hxsl_TExprDef_TSwiz*)r7)->p0 = r27;
			((hxsl_TExprDef_TSwiz*)r7)->p1 = r18;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			if( r18 == NULL ) hl_null_access();
			r3 = r18->length;
			r26 = (venum*)g$hxsl_VecType_VFloat;
			r9 = hl_alloc_enum(&t$hxsl_Type,5);
			((hxsl_Type_TVec*)r9)->p0 = r3;
			((hxsl_Type_TVec*)r9)->p1 = r26;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
	}
	label$2c4895f_4_223:
	r6 = NULL;
	return r6;
}

vvirtual* hxsl_Cache_getLinkShader__$4(venum* r0,venum* r1) {
	String r5, r13;
	hl__types__ArrayObj r17;
	vvirtual *r2, *r16, *r18, *r20, *r23, *r24, *r25;
	venum *r4, *r14, *r21, *r22;
	hxsl__SharedShader r19;
	hl__types__ArrayBytes_Int r6;
	vclosure *r26;
	vdynamic *r15;
	int *r12;
	varray *r27;
	vbyte *r9;
	int r3, r7, r10, r11;
	r2 = hl_alloc_virtual(&t$vrt_3e1dcdc);
	r3 = hxsl_Tools_allocVarId();
	if( hl_vfields(r2)[0] ) *(int*)(hl_vfields(r2)[0]) = (int)r3; else hl_dyn_seti(r2->value,23515/*id*/,&t$_i32,r3);
	r4 = ((Enumt$ctx_155a94c*)r0)->p3;
	if( hl_vfields(r2)[3] ) *(venum**)(hl_vfields(r2)[3]) = (venum*)r4; else hl_dyn_setp(r2->value,218690500/*type*/,&t$hxsl_Type,r4);
	r5 = (String)s$OUTPUT;
	r6 = ((Enumt$ctx_155a94c*)r0)->p2;
	if( r6 == NULL ) hl_null_access();
	r3 = 0;
	r7 = r6->length;
	if( ((unsigned)r3) < ((unsigned)r7) ) goto label$2c4895f_5_12;
	hl_types_ArrayBytes_Int___expand(r6,r3);
	label$2c4895f_5_12:
	r9 = r6->bytes;
	r7 = 2;
	r7 = r3 << r7;
	r10 = *(int*)(r9 + r7);
	r11 = r10;
	++r10;
	*(int*)(r9 + r7) = r10;
	r12 = &r3;
	r9 = hl_itos(r11,r12);
	r13 = String___alloc__(r9,r3);
	r5 = String___add__(r5,r13);
	if( hl_vfields(r2)[2] ) *(String*)(hl_vfields(r2)[2]) = (String)r5; else hl_dyn_setp(r2->value,150958933/*name*/,&t$String,r5);
	r14 = (venum*)g$hxsl_VarKind_Output;
	if( hl_vfields(r2)[1] ) *(venum**)(hl_vfields(r2)[1]) = (venum*)r14; else hl_dyn_setp(r2->value,118088286/*kind*/,&t$hxsl_VarKind,r14);
	r16 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r2);
	r19 = ((Enumt$ctx_155a94c*)r0)->p0;
	if( r19 == NULL ) hl_null_access();
	r18 = r19->data;
	if( r18 == NULL ) hl_null_access();
	r17 = hl_vfields(r18)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r18)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r18->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	if( r17 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_push(r17,((vdynamic*)r16));
	r20 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r22 = (venum*)g$haxe_macro_Binop_OpAssign;
	r23 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r21 = hl_alloc_enum(&t$hxsl_TExprDef,1);
	((hxsl_TExprDef_TVar*)r21)->p0 = r16;
	if( hl_vfields(r23)[0] ) *(venum**)(hl_vfields(r23)[0]) = (venum*)r21; else hl_dyn_setp(r23->value,101/*e*/,&t$hxsl_TExprDef,r21);
	r4 = ((Enumt$ctx_155a94c*)r0)->p3;
	if( hl_vfields(r23)[2] ) *(venum**)(hl_vfields(r23)[2]) = (venum*)r4; else hl_dyn_setp(r23->value,116/*t*/,&t$hxsl_Type,r4);
	r24 = ((Enumt$ctx_155a94c*)r0)->p1;
	if( hl_vfields(r23)[1] ) *(vvirtual**)(hl_vfields(r23)[1]) = (vvirtual*)r24; else hl_dyn_setp(r23->value,112/*p*/,&t$vrt_379f5a4,r24);
	r17 = ((Enumt$ctx_155a94c*)r0)->p4;
	if( r17 == NULL ) hl_null_access();
	r3 = 0;
	r7 = r17->length;
	if( ((unsigned)r3) < ((unsigned)r7) ) goto label$2c4895f_5_50;
	r26 = NULL;
	goto label$2c4895f_5_53;
	label$2c4895f_5_50:
	r27 = r17->array;
	r15 = ((vdynamic**)(r27 + 1))[r3];
	r26 = (vclosure*)r15;
	label$2c4895f_5_53:
	if( r26 == NULL ) hl_null_access();
	r3 = 4;
	r25 = r26->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r26->fun)((vdynamic*)r26->value,r1,r3) : ((vvirtual* (*)(venum*,int))r26->fun)(r1,r3);
	r21 = hl_alloc_enum(&t$hxsl_TExprDef,5);
	((hxsl_TExprDef_TBinop*)r21)->p0 = r22;
	((hxsl_TExprDef_TBinop*)r21)->p1 = r23;
	((hxsl_TExprDef_TBinop*)r21)->p2 = r25;
	if( hl_vfields(r20)[0] ) *(venum**)(hl_vfields(r20)[0]) = (venum*)r21; else hl_dyn_setp(r20->value,101/*e*/,&t$hxsl_TExprDef,r21);
	r4 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r20)[2] ) *(venum**)(hl_vfields(r20)[2]) = (venum*)r4; else hl_dyn_setp(r20->value,116/*t*/,&t$hxsl_Type,r4);
	r24 = ((Enumt$ctx_155a94c*)r0)->p1;
	if( hl_vfields(r20)[1] ) *(vvirtual**)(hl_vfields(r20)[1]) = (vvirtual*)r24; else hl_dyn_setp(r20->value,112/*p*/,&t$vrt_379f5a4,r24);
	return r20;
}

void hxsl_Cache_getLinkShader__$5(venum* r0,venum* r1,hl__types__ArrayObj r2) {
	String r9, r10;
	hl__types__ArrayObj r6, r17;
	vvirtual *r3, *r13, *r19, *r21, *r23, *r24;
	hl_type *r8;
	venum *r5, *r11, *r18, *r22;
	hxsl__SharedShader r25;
	vclosure *r20;
	vdynamic *r12;
	varray *r7;
	int r4, r15, r16;
	r3 = hl_alloc_virtual(&t$vrt_3e1dcdc);
	r4 = hxsl_Tools_allocVarId();
	if( hl_vfields(r3)[0] ) *(int*)(hl_vfields(r3)[0]) = (int)r4; else hl_dyn_seti(r3->value,23515/*id*/,&t$_i32,r4);
	r8 = &t$vrt_d3744c2;
	r4 = 0;
	r7 = hl_alloc_array(r8,r4);
	r6 = hl_types_ArrayObj_alloc(r7);
	r5 = hl_alloc_enum(&t$hxsl_Type,14);
	((hxsl_Type_TFun*)r5)->p0 = r6;
	if( hl_vfields(r3)[3] ) *(venum**)(hl_vfields(r3)[3]) = (venum*)r5; else hl_dyn_setp(r3->value,218690500/*type*/,&t$hxsl_Type,r5);
	r9 = (String)s$;
	r10 = Std_string(((vdynamic*)r1));
	r9 = String___add__(r9,r10);
	if( r9 == NULL ) hl_null_access();
	r9 = String_toLowerCase(r9);
	if( hl_vfields(r3)[2] ) *(String*)(hl_vfields(r3)[2]) = (String)r9; else hl_dyn_setp(r3->value,150958933/*name*/,&t$String,r9);
	r11 = (venum*)g$hxsl_VarKind_Function;
	if( hl_vfields(r3)[1] ) *(venum**)(hl_vfields(r3)[1]) = (venum*)r11; else hl_dyn_setp(r3->value,118088286/*kind*/,&t$hxsl_VarKind,r11);
	r13 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r3);
	r8 = &t$vrt_6e3ace9;
	r4 = 0;
	r7 = hl_alloc_array(r8,r4);
	r6 = hl_types_ArrayObj_alloc(r7);
	r4 = 0;
	label$2c4895f_6_23:
	if( r2 == NULL ) hl_null_access();
	r16 = r2->length;
	if( r4 >= r16 ) goto label$2c4895f_6_41;
	r16 = r2->length;
	if( ((unsigned)r4) < ((unsigned)r16) ) goto label$2c4895f_6_31;
	r18 = NULL;
	goto label$2c4895f_6_34;
	label$2c4895f_6_31:
	r7 = r2->array;
	r12 = ((vdynamic**)(r7 + 1))[r4];
	r18 = (venum*)r12;
	label$2c4895f_6_34:
	++r4;
	if( r6 == NULL ) hl_null_access();
	r20 = ((Enumt$ctx_affda8a*)r0)->p2;
	if( r20 == NULL ) hl_null_access();
	r19 = r20->hasValue ? ((vvirtual* (*)(vdynamic*,venum*))r20->fun)((vdynamic*)r20->value,r18) : ((vvirtual* (*)(venum*))r20->fun)(r18);
	r15 = hl_types_ArrayObj_push(r6,((vdynamic*)r19));
	goto label$2c4895f_6_23;
	label$2c4895f_6_41:
	r21 = hl_alloc_virtual(&t$vrt_ab557b2);
	if( hl_vfields(r21)[2] ) *(venum**)(hl_vfields(r21)[2]) = (venum*)r1; else hl_dyn_setp(r21->value,118088286/*kind*/,&t$hxsl_FunctionKind,r1);
	if( hl_vfields(r21)[3] ) *(vvirtual**)(hl_vfields(r21)[3]) = (vvirtual*)r13; else hl_dyn_setp(r21->value,5691731/*ref*/,&t$vrt_09f4a29,r13);
	r8 = &t$vrt_09f4a29;
	r4 = 0;
	r7 = hl_alloc_array(r8,r4);
	r17 = hl_types_ArrayObj_alloc(r7);
	if( hl_vfields(r21)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r21)[0]) = (hl__types__ArrayObj)r17; else hl_dyn_setp(r21->value,7638631/*args*/,&t$hl_types_ArrayObj,r17);
	r5 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r21)[4] ) *(venum**)(hl_vfields(r21)[4]) = (venum*)r5; else hl_dyn_setp(r21->value,5691745/*ret*/,&t$hxsl_Type,r5);
	r19 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r22 = hl_alloc_enum(&t$hxsl_TExprDef,4);
	((hxsl_TExprDef_TBlock*)r22)->p0 = r6;
	if( hl_vfields(r19)[0] ) *(venum**)(hl_vfields(r19)[0]) = (venum*)r22; else hl_dyn_setp(r19->value,101/*e*/,&t$hxsl_TExprDef,r22);
	r23 = ((Enumt$ctx_affda8a*)r0)->p1;
	if( hl_vfields(r19)[1] ) *(vvirtual**)(hl_vfields(r19)[1]) = (vvirtual*)r23; else hl_dyn_setp(r19->value,112/*p*/,&t$vrt_379f5a4,r23);
	r5 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r19)[2] ) *(venum**)(hl_vfields(r19)[2]) = (venum*)r5; else hl_dyn_setp(r19->value,116/*t*/,&t$hxsl_Type,r5);
	if( hl_vfields(r21)[1] ) *(vvirtual**)(hl_vfields(r21)[1]) = (vvirtual*)r19; else hl_dyn_setp(r21->value,52297279/*expr*/,&t$vrt_6e3ace9,r19);
	r25 = ((Enumt$ctx_affda8a*)r0)->p0;
	if( r25 == NULL ) hl_null_access();
	r24 = r25->data;
	if( r24 == NULL ) hl_null_access();
	r17 = hl_vfields(r24)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r24)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r24->value,63237214/*funs*/,&t$hl_types_ArrayObj);
	if( r17 == NULL ) hl_null_access();
	r4 = hl_types_ArrayObj_push(r17,((vdynamic*)r21));
	return;
}

hxsl__Shader hxsl_Cache_getLinkShader(hxsl__Cache r0,hl__types__ArrayObj r1) {
	String r12, r14, r20;
	vvirtual *r19, *r21;
	haxe__ds__StringMap r13, r38;
	hl__types__ArrayObj r2, r9, r30;
	venum *r10, *r24, *r25, *r28, *r31, *r33, *r35, *r36;
	hl_type *r4;
	hxsl__SharedShader r17;
	hl__types__ArrayBytes_Int r22;
	hxsl__Shader r15, r16;
	hxsl__Globals r39;
	hxsl__$Shader r37;
	vclosure *r26, *r27, *r29, *r32, *r34;
	vdynamic *r11, *r18;
	vbyte *r23;
	int r5, r7, r8;
	varray *r3;
	r4 = &t$String;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r2 = hl_types_ArrayObj_alloc(r3);
	r5 = 0;
	label$2c4895f_7_5:
	if( r1 == NULL ) hl_null_access();
	r8 = r1->length;
	if( r5 >= r8 ) goto label$2c4895f_7_21;
	r8 = r1->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$2c4895f_7_13;
	r10 = NULL;
	goto label$2c4895f_7_16;
	label$2c4895f_7_13:
	r3 = r1->array;
	r11 = ((vdynamic**)(r3 + 1))[r5];
	r10 = (venum*)r11;
	label$2c4895f_7_16:
	++r5;
	if( r2 == NULL ) hl_null_access();
	r12 = Std_string(((vdynamic*)r10));
	r7 = hl_types_ArrayObj_push(r2,((vdynamic*)r12));
	goto label$2c4895f_7_5;
	label$2c4895f_7_21:
	if( r2 == NULL ) hl_null_access();
	r12 = (String)s$c0cb5f0;
	r12 = hl_types_ArrayObj_join(r2,r12);
	r13 = r0->linkShaders;
	if( r13 == NULL ) hl_null_access();
	r11 = haxe_ds_StringMap_get(r13,r12);
	r15 = (hxsl__Shader)r11;
	if( !r15 ) goto label$2c4895f_7_30;
	return r15;
	label$2c4895f_7_30:
	r17 = (hxsl__SharedShader)hl_alloc_obj(&t$hxsl_SharedShader);
	r14 = (String)s$;
	hxsl_SharedShader_new(r17,r14);
	r14 = haxe_crypto_Md5_encode(r12);
	if( r14 == NULL ) hl_null_access();
	r5 = 0;
	r7 = 8;
	r18 = hl_alloc_dynamic(&t$_i32);
	r18->v.i = r7;
	r14 = String_substr(r14,r5,r18);
	r19 = hl_alloc_virtual(&t$vrt_f479cb2);
	r20 = (String)s$shaderLinker_;
	r20 = String___add__(r20,r14);
	if( hl_vfields(r19)[1] ) *(String*)(hl_vfields(r19)[1]) = (String)r20; else hl_dyn_setp(r19->value,150958933/*name*/,&t$String,r20);
	r4 = &t$vrt_09f4a29;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r9 = hl_types_ArrayObj_alloc(r3);
	if( hl_vfields(r19)[2] ) *(hl__types__ArrayObj*)(hl_vfields(r19)[2]) = (hl__types__ArrayObj)r9; else hl_dyn_setp(r19->value,239676598/*vars*/,&t$hl_types_ArrayObj,r9);
	r4 = &t$vrt_ab557b2;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r9 = hl_types_ArrayObj_alloc(r3);
	if( hl_vfields(r19)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r19)[0]) = (hl__types__ArrayObj)r9; else hl_dyn_setp(r19->value,63237214/*funs*/,&t$hl_types_ArrayObj,r9);
	r17->data = r19;
	r21 = NULL;
	r13 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r13);
	r5 = 4;
	r23 = hl_alloc_bytes(r5);
	r5 = 0;
	r7 = 0;
	r8 = 2;
	r8 = r5 << r8;
	*(int*)(r23 + r8) = r7;
	++r5;
	r5 = 1;
	r22 = hl_types_ArrayBase_allocI32(r23,r5);
	r5 = 4;
	r25 = (venum*)g$hxsl_VecType_VFloat;
	r24 = hl_alloc_enum(&t$hxsl_Type,5);
	((hxsl_Type_TVec*)r24)->p0 = r5;
	((hxsl_Type_TVec*)r24)->p1 = r25;
	r26 = hl_alloc_closure_ptr(&t$fun_056ca56,hxsl_Cache_getLinkShader__$1,r21);
	r28 = hl_alloc_enum(&t$ctx_6fe9cfc,0);
	((Enumt$ctx_6fe9cfc*)r28)->p0 = (hxsl__SharedShader)r17;
	((Enumt$ctx_6fe9cfc*)r28)->p1 = (haxe__ds__StringMap)r13;
	r27 = hl_alloc_closure_ptr(&t$fun_6f86a66,hxsl_Cache_getLinkShader__$2,r28);
	r4 = &t$fun_7e7e96e;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r29 = NULL;
	r5 = 0;
	((vclosure**)(r3 + 1))[r5] = r29;
	r9 = hl_types_ArrayObj_alloc(r3);
	if( r9 == NULL ) hl_null_access();
	r5 = 0;
	r31 = hl_alloc_enum(&t$ctx_7028576,0);
	((Enumt$ctx_7028576*)r31)->p0 = (vvirtual*)r21;
	((Enumt$ctx_7028576*)r31)->p1 = (haxe__ds__StringMap)r13;
	((Enumt$ctx_7028576*)r31)->p2 = (venum*)r24;
	((Enumt$ctx_7028576*)r31)->p3 = (vclosure*)r26;
	((Enumt$ctx_7028576*)r31)->p4 = (vclosure*)r27;
	((Enumt$ctx_7028576*)r31)->p5 = (hl__types__ArrayObj)r9;
	r29 = hl_alloc_closure_ptr(&t$fun_e4894d1,hxsl_Cache_getLinkShader__$3,r31);
	r7 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r7) ) goto label$2c4895f_7_95;
	hl_types_ArrayObj___expand(r9,r5);
	label$2c4895f_7_95:
	r3 = r9->array;
	((vclosure**)(r3 + 1))[r5] = r29;
	r33 = hl_alloc_enum(&t$ctx_155a94c,0);
	((Enumt$ctx_155a94c*)r33)->p0 = (hxsl__SharedShader)r17;
	((Enumt$ctx_155a94c*)r33)->p1 = (vvirtual*)r21;
	((Enumt$ctx_155a94c*)r33)->p2 = (hl__types__ArrayBytes_Int)r22;
	((Enumt$ctx_155a94c*)r33)->p3 = (venum*)r24;
	((Enumt$ctx_155a94c*)r33)->p4 = (hl__types__ArrayObj)r9;
	r32 = hl_alloc_closure_ptr(&t$fun_3085266,hxsl_Cache_getLinkShader__$4,r33);
	r35 = hl_alloc_enum(&t$ctx_affda8a,0);
	((Enumt$ctx_affda8a*)r35)->p0 = (hxsl__SharedShader)r17;
	((Enumt$ctx_affda8a*)r35)->p1 = (vvirtual*)r21;
	((Enumt$ctx_affda8a*)r35)->p2 = (vclosure*)r32;
	r34 = hl_alloc_closure_ptr(&t$fun_5a5e3c2,hxsl_Cache_getLinkShader__$5,r35);
	if( r34 == NULL ) hl_null_access();
	r36 = (venum*)g$hxsl_FunctionKind_Vertex;
	r4 = &t$hxsl_Output;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r20 = (String)s$output_position;
	r18 = NULL;
	r10 = hl_alloc_enum(&t$hxsl_Output,1);
	((hxsl_Output_Value*)r10)->p0 = r20;
	((hxsl_Output_Value*)r10)->p1 = r18;
	r5 = 0;
	((venum**)(r3 + 1))[r5] = r10;
	r30 = hl_types_ArrayObj_alloc(r3);
	r34->hasValue ? ((void (*)(vdynamic*,venum*,hl__types__ArrayObj))r34->fun)((vdynamic*)r34->value,r36,r30) : ((void (*)(venum*,hl__types__ArrayObj))r34->fun)(r36,r30);
	r36 = (venum*)g$hxsl_FunctionKind_Fragment;
	r34->hasValue ? ((void (*)(vdynamic*,venum*,hl__types__ArrayObj))r34->fun)((vdynamic*)r34->value,r36,r1) : ((void (*)(venum*,hl__types__ArrayObj))r34->fun)(r36,r1);
	r37 = (hxsl__$Shader)g$_hxsl_Shader;
	r11 = Type_createEmptyInstance(((hl__Class)r37));
	r16 = (hxsl__Shader)hl_dyn_castp(&r11,&t$_dyn,&t$hxsl_Shader);
	if( r16 == NULL ) hl_null_access();
	r16->shader = r17;
	r38 = r0->linkShaders;
	if( r38 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r38,r12,((vdynamic*)r16));
	r39 = NULL;
	hxsl_Shader_updateConstantsFinal(r16,r39);
	return r16;
}

hxsl__RuntimeShader hxsl_Cache_link(hxsl__Cache r0,hxsl__ShaderList r1,bool r2) {
	hxsl__RuntimeShader r15;
	haxe__ds__IntMap r10;
	hxsl__ShaderInstance r9;
	hxsl__Shader r8;
	hxsl__SearchMap r3, r11, r14;
	hxsl__ShaderList r5, r6, r7;
	vdynamic *r12;
	int r13;
	r3 = r0->linkCache;
	r5 = r1;
	r6 = NULL;
	label$2c4895f_8_3:
	if( r5 == r6 ) goto label$2c4895f_8_33;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->s;
	r7 = r5->next;
	r5 = r7;
	if( r8 == NULL ) hl_null_access();
	r9 = r8->instance;
	if( r3 == NULL ) hl_null_access();
	r10 = r3->next;
	if( r10 ) goto label$2c4895f_8_17;
	r10 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r10);
	r3->next = r10;
	label$2c4895f_8_17:
	r10 = r3->next;
	if( r10 == NULL ) hl_null_access();
	if( r9 == NULL ) hl_null_access();
	r13 = r9->id;
	r12 = haxe_ds_IntMap_get(r10,r13);
	r11 = (hxsl__SearchMap)r12;
	if( r11 ) goto label$2c4895f_8_31;
	r14 = (hxsl__SearchMap)hl_alloc_obj(&t$hxsl_SearchMap);
	hxsl_SearchMap_new(r14);
	r11 = r14;
	r10 = r3->next;
	if( r10 == NULL ) hl_null_access();
	r13 = r9->id;
	haxe_ds_IntMap_set(r10,r13,((vdynamic*)r11));
	label$2c4895f_8_31:
	r3 = r11;
	goto label$2c4895f_8_3;
	label$2c4895f_8_33:
	if( r3 == NULL ) hl_null_access();
	r15 = r3->linked;
	if( r15 ) goto label$2c4895f_8_38;
	r15 = hxsl_Cache_compileRuntimeShader(r0,r1,r2);
	r3->linked = r15;
	label$2c4895f_8_38:
	r15 = r3->linked;
	return r15;
}

int hxsl_Cache_compileRuntimeShader__$1(vvirtual* r0,vvirtual* r1) {
	int r2, r3;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[2] ? (*(int*)(hl_vfields(r1)[2])) : (int)hl_dyn_geti(r1->value,112/*p*/,&t$_i32);
	if( r0 == NULL ) hl_null_access();
	r3 = hl_vfields(r0)[2] ? (*(int*)(hl_vfields(r0)[2])) : (int)hl_dyn_geti(r0->value,112/*p*/,&t$_i32);
	r2 = r2 - r3;
	return r2;
}

void hxsl_Cache_compileRuntimeShader__$3(hl__types__ArrayObj r0,vvirtual* r1) {
	vvirtual *r4;
	hl__types__ArrayObj r3;
	venum *r6, *r10, *r11, *r12;
	bool r9;
	vclosure *r16;
	vdynamic *r7, *r14;
	varray *r15;
	int r5, r8, r13;
	if( r1 == NULL ) hl_null_access();
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( !r3 ) goto label$2c4895f_10_31;
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r6 = (venum*)g$hxsl_VarQualifier_PerObject;
	r7 = NULL;
	r5 = hl_types_ArrayObj_indexOf(r3,((vdynamic*)r6),r7);
	r8 = 0;
	if( r5 < r8 ) goto label$2c4895f_10_31;
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	r8 = 1;
	if( r5 != r8 ) goto label$2c4895f_10_18;
	r3 = NULL;
	if( hl_vfields(r1)[4] ) *(hl__types__ArrayObj*)(hl_vfields(r1)[4]) = (hl__types__ArrayObj)r3; else hl_dyn_setp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj,r3);
	goto label$2c4895f_10_26;
	label$2c4895f_10_18:
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_copy(r3);
	if( hl_vfields(r1)[4] ) *(hl__types__ArrayObj*)(hl_vfields(r1)[4]) = (hl__types__ArrayObj)r3; else hl_dyn_setp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj,r3);
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r6 = (venum*)g$hxsl_VarQualifier_PerObject;
	r9 = hl_types_ArrayObj_remove(r3,((vdynamic*)r6));
	label$2c4895f_10_26:
	r10 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,118088286/*kind*/,&t$hxsl_VarKind);
	r11 = (venum*)g$hxsl_VarKind_Var;
	if( r10 == r11 ) goto label$2c4895f_10_31;
	r10 = (venum*)g$hxsl_VarKind_Local;
	if( hl_vfields(r1)[1] ) *(venum**)(hl_vfields(r1)[1]) = (venum*)r10; else hl_dyn_setp(r1->value,118088286/*kind*/,&t$hxsl_VarKind,r10);
	label$2c4895f_10_31:
	r12 = hl_vfields(r1)[5] ? (*(venum**)(hl_vfields(r1)[5])) : (venum*)hl_dyn_getp(r1->value,218690500/*type*/,&t$hxsl_Type);
	if( r12 == NULL ) hl_null_access();
	r5 = HL__ENUM_INDEX__(r12);
	r8 = 13;
	if( r5 != r8 ) goto label$2c4895f_10_62;
	r3 = ((hxsl_Type_TStruct*)r12)->p0;
	r5 = 0;
	label$2c4895f_10_38:
	if( r3 == NULL ) hl_null_access();
	r13 = r3->length;
	if( r5 >= r13 ) goto label$2c4895f_10_62;
	r13 = r3->length;
	if( ((unsigned)r5) < ((unsigned)r13) ) goto label$2c4895f_10_46;
	r4 = NULL;
	goto label$2c4895f_10_49;
	label$2c4895f_10_46:
	r15 = r3->array;
	r14 = ((vdynamic**)(r15 + 1))[r5];
	r4 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r14);
	label$2c4895f_10_49:
	++r5;
	if( r0 == NULL ) hl_null_access();
	r8 = 0;
	r13 = r0->length;
	if( ((unsigned)r8) < ((unsigned)r13) ) goto label$2c4895f_10_56;
	r16 = NULL;
	goto label$2c4895f_10_59;
	label$2c4895f_10_56:
	r15 = r0->array;
	r14 = ((vdynamic**)(r15 + 1))[r8];
	r16 = (vclosure*)r14;
	label$2c4895f_10_59:
	if( r16 == NULL ) hl_null_access();
	r16->hasValue ? ((void (*)(vdynamic*,vvirtual*))r16->fun)((vdynamic*)r16->value,r4) : ((void (*)(vvirtual*))r16->fun)(r4);
	goto label$2c4895f_10_38;
	label$2c4895f_10_62:
	return;
}

hxsl__RuntimeShader hxsl_Cache_compileRuntimeShader(hxsl__Cache r0,hxsl__ShaderList r1,bool r2) {
	hxsl__RuntimeShader r56, r59;
	String r34, r35, r36;
	bool *r21;
	haxe__ds__StringMap r65;
	vvirtual *r15, *r26, *r27, *r39, *r45, *r49, *r51, *r53, *r55, *r60;
	hl__types__ArrayObj r3, r14, r25, r37;
	hxsl__RuntimeShaderData r64;
	venum *r42, *r43, *r44;
	hl_type *r5;
	bool r20, r30;
	hxsl__SharedShader r58;
	hxsl___Linker__AllocatedVar r41;
	haxe__ds__IntMap r40, r46;
	hxsl__Linker r19;
	hxsl__ShaderInstance r12;
	hxsl__Error r33;
	hxsl__Shader r11;
	hxsl__Splitter r50;
	hxsl__$Error r32;
	hxsl__ShaderList r8, r9, r10;
	vclosure *r17, *r18, *r38;
	hl__types__ArrayDyn r16;
	int *r62;
	hxsl__ShaderInstanceDesc r57;
	hxsl__Dce r54;
	haxe__Exception r29;
	vdynamic *r22, *r28, *r31, *r48, *r52;
	vbyte *r63;
	int r6, r13, r23, r24, r47, r61;
	varray *r4;
	static vclosure cl$0 = { &t$fun_8000bc1, hxsl_Cache_compileRuntimeShader__$1, 0 };
	hl_trap_ctx trap$0;
	r5 = &t$vrt_283fa46;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r6 = 0;
	r8 = r1;
	r9 = NULL;
	label$2c4895f_11_7:
	if( r8 == r9 ) goto label$2c4895f_11_25;
	if( r8 == NULL ) hl_null_access();
	r11 = r8->s;
	r10 = r8->next;
	r8 = r10;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->instance;
	if( r3 == NULL ) hl_null_access();
	r15 = hl_alloc_virtual(&t$vrt_283fa46);
	if( hl_vfields(r15)[1] ) *(hxsl__ShaderInstance*)(hl_vfields(r15)[1]) = (hxsl__ShaderInstance)r12; else hl_dyn_setp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance,r12);
	r13 = r11->priority;
	if( hl_vfields(r15)[2] ) *(int*)(hl_vfields(r15)[2]) = (int)r13; else hl_dyn_seti(r15->value,112/*p*/,&t$_i32,r13);
	r13 = r6;
	++r6;
	if( hl_vfields(r15)[0] ) *(int*)(hl_vfields(r15)[0]) = (int)r13; else hl_dyn_seti(r15->value,-32204280/*index*/,&t$_i32,r13);
	r13 = hl_types_ArrayObj_push(r3,((vdynamic*)r15));
	goto label$2c4895f_11_7;
	label$2c4895f_11_25:
	if( r3 == NULL ) hl_null_access();
	hl_types_ArrayObj_reverse(r3);
	r16 = (hl__types__ArrayDyn)hl_dyn_castp(&r3,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	r17 = &cl$0;
	if( r17 ) goto label$2c4895f_11_32;
	r18 = NULL;
	goto label$2c4895f_11_33;
	label$2c4895f_11_32:
	r18 = hl_alloc_closure_ptr(&t$fun_d4c4225,hxsl_Cache_compileRuntimeShader__$2,r17);
	label$2c4895f_11_33:
	haxe_ds_ArraySort_sort(r16,r18);
	r19 = (hxsl__Linker)hl_alloc_obj(&t$hxsl_Linker);
	r20 = r2;
	r21 = &r20;
	hxsl_Linker_new(r19,r21);
	hl_trap(trap$0,r22,label$2c4895f_11_68);
	r5 = &t$vrt_f479cb2;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r14 = hl_types_ArrayObj_alloc(r4);
	r13 = 0;
	label$2c4895f_11_44:
	if( r3 == NULL ) hl_null_access();
	r24 = r3->length;
	if( r13 >= r24 ) goto label$2c4895f_11_63;
	r24 = r3->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_11_52;
	r15 = NULL;
	goto label$2c4895f_11_55;
	label$2c4895f_11_52:
	r4 = r3->array;
	r22 = ((vdynamic**)(r4 + 1))[r13];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r22);
	label$2c4895f_11_55:
	++r13;
	if( r14 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r12 = hl_vfields(r15)[1] ? (*(hxsl__ShaderInstance*)(hl_vfields(r15)[1])) : (hxsl__ShaderInstance)hl_dyn_getp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance);
	if( r12 == NULL ) hl_null_access();
	r26 = r12->shader;
	r23 = hl_types_ArrayObj_push(r14,((vdynamic*)r26));
	goto label$2c4895f_11_44;
	label$2c4895f_11_63:
	if( r19 == NULL ) hl_null_access();
	r27 = hxsl_Linker_link(r19,r14);
	r26 = r27;
	hl_endtrap(trap$0);
	goto label$2c4895f_11_114;
	label$2c4895f_11_68:
	r28 = NULL;
	r29 = haxe_Exception_caught(r22);
	if( r29 == NULL ) hl_null_access();
	r28 = ((vdynamic* (*)(haxe__Exception))r29->$type->vobj_proto[0])(r29);
	r32 = (hxsl__$Error)g$_hxsl_Error;
	r30 = Std_isOfType(r28,((vdynamic*)r32));
	if( !r30 ) goto label$2c4895f_11_113;
	r33 = (hxsl__Error)hl_dyn_castp(&r28,&t$_dyn,&t$hxsl_Error);
	r5 = &t$String;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r14 = hl_types_ArrayObj_alloc(r4);
	r13 = 0;
	label$2c4895f_11_81:
	if( r3 == NULL ) hl_null_access();
	r24 = r3->length;
	if( r13 >= r24 ) goto label$2c4895f_11_102;
	r24 = r3->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_11_89;
	r15 = NULL;
	goto label$2c4895f_11_92;
	label$2c4895f_11_89:
	r4 = r3->array;
	r31 = ((vdynamic**)(r4 + 1))[r13];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r31);
	label$2c4895f_11_92:
	++r13;
	if( r14 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r12 = hl_vfields(r15)[1] ? (*(hxsl__ShaderInstance*)(hl_vfields(r15)[1])) : (hxsl__ShaderInstance)hl_dyn_getp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance);
	if( r12 == NULL ) hl_null_access();
	r27 = r12->shader;
	r21 = NULL;
	r34 = hxsl_Printer_shaderToString(r27,r21);
	r23 = hl_types_ArrayObj_push(r14,((vdynamic*)r34));
	goto label$2c4895f_11_81;
	label$2c4895f_11_102:
	if( r33 == NULL ) hl_null_access();
	r34 = r33->msg;
	r35 = (String)s$b8ab2cd;
	if( r14 == NULL ) hl_null_access();
	r36 = (String)s$3926582;
	r36 = hl_types_ArrayObj_join(r14,r36);
	r35 = String___add__(r35,r36);
	r34 = String___add__(r34,r35);
	r33->msg = r34;
	r31 = haxe_Exception_thrown(((vdynamic*)r33));
	hl_throw((vdynamic*)r31);
	label$2c4895f_11_113:
	hl_throw((vdynamic*)r22);
	label$2c4895f_11_114:
	if( !r2 ) goto label$2c4895f_11_157;
	r5 = &t$fun_cd51779;
	r13 = 1;
	r4 = hl_alloc_array(r5,r13);
	r38 = NULL;
	r13 = 0;
	((vclosure**)(r4 + 1))[r13] = r38;
	r14 = hl_types_ArrayObj_alloc(r4);
	if( r14 == NULL ) hl_null_access();
	r13 = 0;
	r38 = hl_alloc_closure_ptr(&t$fun_af8bfcb,hxsl_Cache_compileRuntimeShader__$3,r14);
	r23 = r14->length;
	if( ((unsigned)r13) < ((unsigned)r23) ) goto label$2c4895f_11_128;
	hl_types_ArrayObj___expand(r14,r13);
	label$2c4895f_11_128:
	r4 = r14->array;
	((vclosure**)(r4 + 1))[r13] = r38;
	r13 = 0;
	if( r27 == NULL ) hl_null_access();
	r25 = hl_vfields(r27)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r27)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r27->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	label$2c4895f_11_133:
	if( r25 == NULL ) hl_null_access();
	r24 = r25->length;
	if( r13 >= r24 ) goto label$2c4895f_11_157;
	r24 = r25->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_11_141;
	r39 = NULL;
	goto label$2c4895f_11_144;
	label$2c4895f_11_141:
	r4 = r25->array;
	r28 = ((vdynamic**)(r4 + 1))[r13];
	r39 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r28);
	label$2c4895f_11_144:
	++r13;
	if( r14 == NULL ) hl_null_access();
	r23 = 0;
	r24 = r14->length;
	if( ((unsigned)r23) < ((unsigned)r24) ) goto label$2c4895f_11_151;
	r38 = NULL;
	goto label$2c4895f_11_154;
	label$2c4895f_11_151:
	r4 = r14->array;
	r28 = ((vdynamic**)(r4 + 1))[r23];
	r38 = (vclosure*)r28;
	label$2c4895f_11_154:
	if( r38 == NULL ) hl_null_access();
	r38->hasValue ? ((void (*)(vdynamic*,vvirtual*))r38->fun)((vdynamic*)r38->value,r39) : ((void (*)(vvirtual*))r38->fun)(r39);
	goto label$2c4895f_11_133;
	label$2c4895f_11_157:
	r40 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r40);
	r13 = 0;
	if( r19 == NULL ) hl_null_access();
	r14 = r19->allVars;
	label$2c4895f_11_162:
	if( r14 == NULL ) hl_null_access();
	r24 = r14->length;
	if( r13 >= r24 ) goto label$2c4895f_11_225;
	r24 = r14->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_11_170;
	r41 = NULL;
	goto label$2c4895f_11_173;
	label$2c4895f_11_170:
	r4 = r14->array;
	r28 = ((vdynamic**)(r4 + 1))[r13];
	r41 = (hxsl___Linker__AllocatedVar)r28;
	label$2c4895f_11_173:
	++r13;
	if( r41 == NULL ) hl_null_access();
	r39 = r41->v;
	if( r39 == NULL ) hl_null_access();
	r42 = hl_vfields(r39)[1] ? (*(venum**)(hl_vfields(r39)[1])) : (venum*)hl_dyn_getp(r39->value,118088286/*kind*/,&t$hxsl_VarKind);
	r43 = (venum*)g$hxsl_VarKind_Param;
	if( r42 != r43 ) goto label$2c4895f_11_224;
	r39 = r41->v;
	if( r39 == NULL ) hl_null_access();
	r44 = hl_vfields(r39)[5] ? (*(venum**)(hl_vfields(r39)[5])) : (venum*)hl_dyn_getp(r39->value,218690500/*type*/,&t$hxsl_Type);
	if( r44 == NULL ) hl_null_access();
	r23 = HL__ENUM_INDEX__(r44);
	r24 = 13;
	if( r23 != r24 ) goto label$2c4895f_11_189;
	r25 = ((hxsl_Type_TStruct*)r44)->p0;
	goto label$2c4895f_11_162;
	label$2c4895f_11_189:
	if( r3 == NULL ) hl_null_access();
	r23 = r41->instanceIndex;
	r24 = r3->length;
	if( ((unsigned)r23) < ((unsigned)r24) ) goto label$2c4895f_11_195;
	r15 = NULL;
	goto label$2c4895f_11_198;
	label$2c4895f_11_195:
	r4 = r3->array;
	r28 = ((vdynamic**)(r4 + 1))[r23];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r28);
	label$2c4895f_11_198:
	if( r40 == NULL ) hl_null_access();
	r23 = r41->id;
	r45 = hl_alloc_virtual(&t$vrt_70d5f54);
	if( r15 == NULL ) hl_null_access();
	r24 = hl_vfields(r15)[0] ? (*(int*)(hl_vfields(r15)[0])) : (int)hl_dyn_geti(r15->value,-32204280/*index*/,&t$_i32);
	if( hl_vfields(r45)[1] ) *(int*)(hl_vfields(r45)[1]) = (int)r24; else hl_dyn_seti(r45->value,434184351/*instance*/,&t$_i32,r24);
	r12 = hl_vfields(r15)[1] ? (*(hxsl__ShaderInstance*)(hl_vfields(r15)[1])) : (hxsl__ShaderInstance)hl_dyn_getp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance);
	if( r12 == NULL ) hl_null_access();
	r46 = r12->params;
	if( r46 == NULL ) hl_null_access();
	r25 = r41->merged;
	if( r25 == NULL ) hl_null_access();
	r24 = 0;
	r47 = r25->length;
	if( ((unsigned)r24) < ((unsigned)r47) ) goto label$2c4895f_11_215;
	r39 = NULL;
	goto label$2c4895f_11_218;
	label$2c4895f_11_215:
	r4 = r25->array;
	r28 = ((vdynamic**)(r4 + 1))[r24];
	r39 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r28);
	label$2c4895f_11_218:
	if( r39 == NULL ) hl_null_access();
	r24 = hl_vfields(r39)[0] ? (*(int*)(hl_vfields(r39)[0])) : (int)hl_dyn_geti(r39->value,23515/*id*/,&t$_i32);
	r28 = haxe_ds_IntMap_get(r46,r24);
	r48 = (vdynamic*)r28;
	if( hl_vfields(r45)[0] ) *(vdynamic**)(hl_vfields(r45)[0]) = (vdynamic*)r48; else hl_dyn_setp(r45->value,-32204280/*index*/,&t$nul_i32,r48);
	haxe_ds_IntMap_set(r40,r23,((vdynamic*)r45));
	label$2c4895f_11_224:
	goto label$2c4895f_11_162;
	label$2c4895f_11_225:
	hl_trap(trap$0,r28,label$2c4895f_11_231);
	r50 = (hxsl__Splitter)hl_alloc_obj(&t$hxsl_Splitter);
	hxsl_Splitter_new(r50);
	r49 = hxsl_Splitter_split(r50,r26);
	hl_endtrap(trap$0);
	goto label$2c4895f_11_250;
	label$2c4895f_11_231:
	r31 = NULL;
	r29 = haxe_Exception_caught(r28);
	if( r29 == NULL ) hl_null_access();
	r31 = ((vdynamic* (*)(haxe__Exception))r29->$type->vobj_proto[0])(r29);
	r32 = (hxsl__$Error)g$_hxsl_Error;
	r30 = Std_isOfType(r31,((vdynamic*)r32));
	if( !r30 ) goto label$2c4895f_11_249;
	r33 = (hxsl__Error)hl_dyn_castp(&r31,&t$_dyn,&t$hxsl_Error);
	if( r33 == NULL ) hl_null_access();
	r34 = r33->msg;
	r35 = (String)s$b8ab2cd;
	r21 = NULL;
	r36 = hxsl_Printer_shaderToString(r26,r21);
	r35 = String___add__(r35,r36);
	r34 = String___add__(r34,r35);
	r33->msg = r34;
	r52 = haxe_Exception_thrown(((vdynamic*)r33));
	hl_throw((vdynamic*)r52);
	label$2c4895f_11_249:
	hl_throw((vdynamic*)r28);
	label$2c4895f_11_250:
	r54 = (hxsl__Dce)hl_alloc_obj(&t$hxsl_Dce);
	hxsl_Dce_new(r54);
	if( r49 == NULL ) hl_null_access();
	r51 = hl_vfields(r49)[1] ? (*(vvirtual**)(hl_vfields(r49)[1])) : (vvirtual*)hl_dyn_getp(r49->value,-515384742/*vertex*/,&t$vrt_f479cb2);
	r55 = hl_vfields(r49)[0] ? (*(vvirtual**)(hl_vfields(r49)[0])) : (vvirtual*)hl_dyn_getp(r49->value,-303735098/*fragment*/,&t$vrt_f479cb2);
	r53 = hxsl_Dce_dce(r54,r51,r55);
	if( r53 == NULL ) hl_null_access();
	r51 = hl_vfields(r53)[1] ? (*(vvirtual**)(hl_vfields(r53)[1])) : (vvirtual*)hl_dyn_getp(r53->value,-515384742/*vertex*/,&t$vrt_f479cb2);
	r55 = hl_vfields(r53)[0] ? (*(vvirtual**)(hl_vfields(r53)[0])) : (vvirtual*)hl_dyn_getp(r53->value,-303735098/*fragment*/,&t$vrt_f479cb2);
	r56 = hxsl_Cache_buildRuntimeShader(r0,r51,r55,r40);
	r5 = &t$hxsl_ShaderInstanceDesc;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r14 = hl_types_ArrayObj_alloc(r4);
	r8 = r1;
	r9 = NULL;
	label$2c4895f_11_266:
	if( r8 == r9 ) goto label$2c4895f_11_280;
	if( r8 == NULL ) hl_null_access();
	r11 = r8->s;
	r10 = r8->next;
	r8 = r10;
	if( r14 == NULL ) hl_null_access();
	r57 = (hxsl__ShaderInstanceDesc)hl_alloc_obj(&t$hxsl_ShaderInstanceDesc);
	if( r11 == NULL ) hl_null_access();
	r58 = r11->shader;
	r13 = r11->constBits;
	hxsl_ShaderInstanceDesc_new(r57,r58,r13);
	r13 = hl_types_ArrayObj_push(r14,((vdynamic*)r57));
	goto label$2c4895f_11_266;
	label$2c4895f_11_280:
	if( r56 == NULL ) hl_null_access();
	r60 = hl_alloc_virtual(&t$vrt_a3e2f53);
	if( hl_vfields(r60)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r60)[0]) = (hl__types__ArrayObj)r14; else hl_dyn_setp(r60->value,186287176/*instances*/,&t$hl_types_ArrayObj,r14);
	r34 = NULL;
	if( hl_vfields(r60)[1] ) *(String*)(hl_vfields(r60)[1]) = (String)r34; else hl_dyn_setp(r60->value,359375608/*signature*/,&t$String,r34);
	r56->spec = r60;
	r13 = 0;
	if( r3 == NULL ) hl_null_access();
	r23 = r3->length;
	label$2c4895f_11_289:
	if( r13 >= r23 ) goto label$2c4895f_11_322;
	r24 = r13;
	++r13;
	if( r3 == NULL ) hl_null_access();
	r47 = r3->length;
	r61 = 1;
	r47 = r47 - r61;
	r47 = r47 - r24;
	r61 = r3->length;
	if( ((unsigned)r47) < ((unsigned)r61) ) goto label$2c4895f_11_302;
	r15 = NULL;
	goto label$2c4895f_11_305;
	label$2c4895f_11_302:
	r4 = r3->array;
	r31 = ((vdynamic**)(r4 + 1))[r47];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r31);
	label$2c4895f_11_305:
	if( r56 == NULL ) hl_null_access();
	r60 = r56->spec;
	if( r60 == NULL ) hl_null_access();
	r25 = hl_vfields(r60)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r60)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r60->value,186287176/*instances*/,&t$hl_types_ArrayObj);
	if( r25 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r47 = hl_vfields(r15)[0] ? (*(int*)(hl_vfields(r15)[0])) : (int)hl_dyn_geti(r15->value,-32204280/*index*/,&t$_i32);
	r61 = r25->length;
	if( ((unsigned)r47) < ((unsigned)r61) ) goto label$2c4895f_11_316;
	r57 = NULL;
	goto label$2c4895f_11_319;
	label$2c4895f_11_316:
	r4 = r25->array;
	r31 = ((vdynamic**)(r4 + 1))[r47];
	r57 = (hxsl__ShaderInstanceDesc)r31;
	label$2c4895f_11_319:
	if( r57 == NULL ) hl_null_access();
	r57->index = r24;
	goto label$2c4895f_11_289;
	label$2c4895f_11_322:
	r5 = &t$String;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r25 = hl_types_ArrayObj_alloc(r4);
	r13 = 0;
	if( r56 == NULL ) hl_null_access();
	r60 = r56->spec;
	if( r60 == NULL ) hl_null_access();
	r37 = hl_vfields(r60)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r60)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r60->value,186287176/*instances*/,&t$hl_types_ArrayObj);
	label$2c4895f_11_331:
	if( r37 == NULL ) hl_null_access();
	r24 = r37->length;
	if( r13 >= r24 ) goto label$2c4895f_11_366;
	r24 = r37->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_11_339;
	r57 = NULL;
	goto label$2c4895f_11_342;
	label$2c4895f_11_339:
	r4 = r37->array;
	r31 = ((vdynamic**)(r4 + 1))[r13];
	r57 = (hxsl__ShaderInstanceDesc)r31;
	label$2c4895f_11_342:
	++r13;
	if( r25 == NULL ) hl_null_access();
	if( r57 == NULL ) hl_null_access();
	r58 = r57->shader;
	if( r58 == NULL ) hl_null_access();
	r51 = r58->data;
	if( r51 == NULL ) hl_null_access();
	r34 = hl_vfields(r51)[1] ? (*(String*)(hl_vfields(r51)[1])) : (String)hl_dyn_getp(r51->value,150958933/*name*/,&t$String);
	r35 = (String)s$b14a7b8;
	r34 = String___add__(r34,r35);
	r23 = r57->bits;
	r62 = &r23;
	r63 = hl_itos(r23,r62);
	r35 = String___alloc__(r63,r23);
	r34 = String___add__(r34,r35);
	r35 = (String)s$b14a7b8;
	r34 = String___add__(r34,r35);
	r23 = r57->index;
	r62 = &r23;
	r63 = hl_itos(r23,r62);
	r35 = String___alloc__(r63,r23);
	r34 = String___add__(r34,r35);
	r23 = hl_types_ArrayObj_push(r25,((vdynamic*)r34));
	goto label$2c4895f_11_331;
	label$2c4895f_11_366:
	if( r25 == NULL ) hl_null_access();
	r34 = (String)s$853ae90;
	r34 = hl_types_ArrayObj_join(r25,r34);
	if( r56 == NULL ) hl_null_access();
	r60 = r56->spec;
	if( r60 == NULL ) hl_null_access();
	r35 = haxe_crypto_Md5_encode(r34);
	if( hl_vfields(r60)[1] ) *(String*)(hl_vfields(r60)[1]) = (String)r35; else hl_dyn_setp(r60->value,359375608/*signature*/,&t$String,r35);
	r64 = r56->vertex;
	if( r64 == NULL ) hl_null_access();
	r51 = r64->data;
	r21 = NULL;
	r35 = hxsl_Printer_shaderToString(r51,r21);
	r64 = r56->fragment;
	if( r64 == NULL ) hl_null_access();
	r51 = r64->data;
	r21 = NULL;
	r36 = hxsl_Printer_shaderToString(r51,r21);
	r35 = String___add__(r35,r36);
	r35 = haxe_crypto_Md5_encode(r35);
	r56->signature = r35;
	r56->batchMode = r2;
	r65 = r0->byID;
	if( r65 == NULL ) hl_null_access();
	r35 = r56->signature;
	r31 = haxe_ds_StringMap_get(r65,r35);
	r59 = (hxsl__RuntimeShader)r31;
	if( !r59 ) goto label$2c4895f_11_398;
	if( r59 == NULL ) hl_null_access();
	r13 = r59->id;
	r56->id = r13;
	goto label$2c4895f_11_402;
	label$2c4895f_11_398:
	r65 = r0->byID;
	if( r65 == NULL ) hl_null_access();
	r35 = r56->signature;
	haxe_ds_StringMap_set(r65,r35,((vdynamic*)r56));
	label$2c4895f_11_402:
	return r56;
}

hxsl__RuntimeShader hxsl_Cache_buildRuntimeShader(hxsl__Cache r0,vvirtual* r1,vvirtual* r2,haxe__ds__IntMap r3) {
	hxsl__RuntimeShader r4;
	venum *r7;
	hxsl__RuntimeShaderData r6;
	bool r9;
	haxe__ds__IntMap r8;
	r4 = (hxsl__RuntimeShader)hl_alloc_obj(&t$hxsl_RuntimeShader);
	hxsl_RuntimeShader_new(r4);
	r7 = (venum*)g$hxsl_FunctionKind_Vertex;
	r6 = hxsl_Cache_flattenShader(r0,r1,r7,r3);
	r4->vertex = r6;
	r6 = r4->vertex;
	if( r6 == NULL ) hl_null_access();
	r9 = true;
	r6->vertex = r9;
	r7 = (venum*)g$hxsl_FunctionKind_Fragment;
	r6 = hxsl_Cache_flattenShader(r0,r2,r7,r3);
	r4->fragment = r6;
	r8 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r8);
	r4->globals = r8;
	r6 = r4->vertex;
	hxsl_Cache_initGlobals(r0,r4,r6);
	r6 = r4->fragment;
	hxsl_Cache_initGlobals(r0,r4,r6);
	return r4;
}

void hxsl_Cache_initGlobals(hxsl__Cache r0,hxsl__RuntimeShader r1,hxsl__RuntimeShaderData r2) {
	bool r8;
	hxsl__AllocGlobal r3, r5;
	haxe__ds__IntMap r6;
	hxsl__AllocParam r10, r11;
	vdynamic *r9;
	int r7;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->globals;
	label$2c4895f_13_2:
	if( !r3 ) goto label$2c4895f_13_15;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->globals;
	if( r6 == NULL ) hl_null_access();
	if( r3 == NULL ) hl_null_access();
	r7 = r3->gid;
	r8 = true;
	r9 = hl_alloc_dynbool(r8);
	haxe_ds_IntMap_set(r6,r7,r9);
	r5 = r3->next;
	r3 = r5;
	goto label$2c4895f_13_2;
	label$2c4895f_13_15:
	if( r2 == NULL ) hl_null_access();
	r10 = r2->params;
	label$2c4895f_13_17:
	if( !r10 ) goto label$2c4895f_13_34;
	if( r10 == NULL ) hl_null_access();
	r5 = r10->perObjectGlobal;
	if( !r5 ) goto label$2c4895f_13_31;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->globals;
	if( r6 == NULL ) hl_null_access();
	r5 = r10->perObjectGlobal;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->gid;
	r8 = true;
	r9 = hl_alloc_dynbool(r8);
	haxe_ds_IntMap_set(r6,r7,r9);
	label$2c4895f_13_31:
	r11 = r10->next;
	r10 = r11;
	goto label$2c4895f_13_17;
	label$2c4895f_13_34:
	return;
}

String hxsl_Cache_getPath(hxsl__Cache r0,vvirtual* r1) {
	String r3, r4;
	vvirtual *r2;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[3] ? (*(vvirtual**)(hl_vfields(r1)[3])) : (vvirtual*)hl_dyn_getp(r1->value,-310508246/*parent*/,&t$vrt_09f4a29);
	if( r2 ) goto label$2c4895f_14_5;
	r3 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,150958933/*name*/,&t$String);
	return r3;
	label$2c4895f_14_5:
	r2 = hl_vfields(r1)[3] ? (*(vvirtual**)(hl_vfields(r1)[3])) : (vvirtual*)hl_dyn_getp(r1->value,-310508246/*parent*/,&t$vrt_09f4a29);
	r3 = hxsl_Cache_getPath(r0,r2);
	r4 = (String)s$5058f1a;
	r3 = String___add__(r3,r4);
	r4 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,150958933/*name*/,&t$String);
	r3 = String___add__(r3,r4);
	return r3;
}

int hxsl_Cache_flattenShader__$1(vvirtual* r0,vvirtual* r1) {
	venum *r3;
	int r2, r4;
	if( r0 == NULL ) hl_null_access();
	r3 = hl_vfields(r0)[1] ? (*(venum**)(hl_vfields(r0)[1])) : (venum*)hl_dyn_getp(r0->value,116/*t*/,&t$hxsl_Type);
	if( r3 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r3);
	if( r1 == NULL ) hl_null_access();
	r3 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,116/*t*/,&t$hxsl_Type);
	if( r3 == NULL ) hl_null_access();
	r4 = HL__ENUM_INDEX__(r3);
	r2 = r2 - r4;
	return r2;
}

hxsl__RuntimeShaderData hxsl_Cache_flattenShader(hxsl__Cache r0,vvirtual* r1,venum* r2,haxe__ds__IntMap r3) {
	String r22;
	haxe__ds__ObjectMap r15;
	hl__types__ArrayObj r9, r20, r23, r26;
	vvirtual *r7, *r14, *r17, *r18, *r19, *r37, *r42;
	venum *r21, *r29, *r33, *r34, *r35, *r36, *r41;
	hl_type *r11;
	hxsl__RuntimeShaderData r6;
	bool r8;
	hxsl__AllocGlobal r28, r32;
	hxsl__Flatten r4;
	hxsl__AllocParam r38, r39, r45;
	hxsl___Flatten__Alloc r27;
	hl__types__ArrayBytes_Float r13;
	vclosure *r43, *r44;
	vdynamic *r16;
	int r12, r24, r25, r30, r31, r40;
	varray *r10;
	static vclosure cl$0 = { &t$fun_ba16e83, hxsl_Cache_flattenShader__$1, 0 };
	r4 = (hxsl__Flatten)hl_alloc_obj(&t$hxsl_Flatten);
	hxsl_Flatten_new(r4);
	r6 = (hxsl__RuntimeShaderData)hl_alloc_obj(&t$hxsl_RuntimeShaderData);
	hxsl_RuntimeShaderData_new(r6);
	r8 = r0->constsToGlobal;
	r7 = hxsl_Flatten_flatten(r4,r1,r2,r8);
	r11 = &t$vrt_7c116e9;
	r12 = 0;
	r10 = hl_alloc_array(r11,r12);
	r9 = hl_types_ArrayObj_alloc(r10);
	r13 = r4->consts;
	r6->consts = r13;
	r12 = 0;
	r6->texturesCount = r12;
	r15 = r4->allocData;
	if( r15 == NULL ) hl_null_access();
	r14 = haxe_ds_ObjectMap_keys(r15);
	r17 = hl_to_virtual(&t$vrt_11e33cd,(vdynamic*)r14);
	label$2c4895f_16_18:
	if( r17 == NULL ) hl_null_access();
	if( hl_vfields(r17)[0] ) r8 = ((bool (*)(vdynamic*))hl_vfields(r17)[0])(r17->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r17->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r8 = (bool)ret.v.i;
	}
	if( !r8 ) goto label$2c4895f_16_357;
	if( hl_vfields(r17)[1] ) r18 = ((vvirtual* (*)(vdynamic*))hl_vfields(r17)[1])(r17->value); else {
		r18 = (vvirtual*)hl_dyn_call_obj(r17->value,&t$fun_32c99d1,151160317/*next*/,NULL,NULL);
	}
	if( r4 == NULL ) hl_null_access();
	r15 = r4->allocData;
	if( r15 == NULL ) hl_null_access();
	r16 = haxe_ds_ObjectMap_get(r15,((vdynamic*)r18));
	r20 = (hl__types__ArrayObj)hl_dyn_castp(&r16,&t$_dyn,&t$hl_types_ArrayObj);
	if( r18 == NULL ) hl_null_access();
	r21 = hl_vfields(r18)[1] ? (*(venum**)(hl_vfields(r18)[1])) : (venum*)hl_dyn_getp(r18->value,118088286/*kind*/,&t$hxsl_VarKind);
	if( r21 == NULL ) hl_null_access();
	r12 = HL__ENUM_INDEX__(r21);
	switch(r12) {
		default:
		case 1:
			r22 = (String)s$assert;
			r16 = haxe_Exception_thrown(((vdynamic*)r22));
			hl_throw((vdynamic*)r16);
		case 0:
			r11 = &t$hxsl_AllocGlobal;
			r12 = 0;
			r10 = hl_alloc_array(r11,r12);
			r23 = hl_types_ArrayObj_alloc(r10);
			r12 = 0;
			label$2c4895f_16_41:
			if( r20 == NULL ) hl_null_access();
			r25 = r20->length;
			if( r12 >= r25 ) goto label$2c4895f_16_67;
			r25 = r20->length;
			if( ((unsigned)r12) < ((unsigned)r25) ) goto label$2c4895f_16_49;
			r27 = NULL;
			goto label$2c4895f_16_52;
			label$2c4895f_16_49:
			r10 = r20->array;
			r16 = ((vdynamic**)(r10 + 1))[r12];
			r27 = (hxsl___Flatten__Alloc)r16;
			label$2c4895f_16_52:
			++r12;
			if( r27 == NULL ) hl_null_access();
			r19 = r27->v;
			if( !r19 ) goto label$2c4895f_16_66;
			if( r23 == NULL ) hl_null_access();
			r28 = (hxsl__AllocGlobal)hl_alloc_obj(&t$hxsl_AllocGlobal);
			r24 = r27->pos;
			r19 = r27->v;
			r22 = hxsl_Cache_getPath(r0,r19);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocGlobal_new(r28,r24,r22,r29);
			r24 = hl_types_ArrayObj_push(r23,((vdynamic*)r28));
			label$2c4895f_16_66:
			goto label$2c4895f_16_41;
			label$2c4895f_16_67:
			r26 = r23;
			r12 = 0;
			if( r23 == NULL ) hl_null_access();
			r24 = r23->length;
			r25 = 1;
			r24 = r24 - r25;
			label$2c4895f_16_73:
			if( r12 >= r24 ) goto label$2c4895f_16_97;
			r25 = r12;
			++r12;
			if( r26 == NULL ) hl_null_access();
			r31 = r26->length;
			if( ((unsigned)r25) < ((unsigned)r31) ) goto label$2c4895f_16_82;
			r28 = NULL;
			goto label$2c4895f_16_85;
			label$2c4895f_16_82:
			r10 = r26->array;
			r16 = ((vdynamic**)(r10 + 1))[r25];
			r28 = (hxsl__AllocGlobal)r16;
			label$2c4895f_16_85:
			if( r28 == NULL ) hl_null_access();
			r31 = 1;
			r30 = r25 + r31;
			r31 = r26->length;
			if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_16_92;
			r32 = NULL;
			goto label$2c4895f_16_95;
			label$2c4895f_16_92:
			r10 = r26->array;
			r16 = ((vdynamic**)(r10 + 1))[r30];
			r32 = (hxsl__AllocGlobal)r16;
			label$2c4895f_16_95:
			r28->next = r32;
			goto label$2c4895f_16_73;
			label$2c4895f_16_97:
			if( r18 == NULL ) hl_null_access();
			r29 = hl_vfields(r18)[5] ? (*(venum**)(hl_vfields(r18)[5])) : (venum*)hl_dyn_getp(r18->value,218690500/*type*/,&t$hxsl_Type);
			if( r29 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r29);
			r24 = 15;
			if( r12 != r24 ) goto label$2c4895f_16_151;
			r34 = ((hxsl_Type_TArray*)r29)->p1;
			r33 = ((hxsl_Type_TArray*)r29)->p0;
			if( r33 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r33);
			r24 = 5;
			if( r12 != r24 ) goto label$2c4895f_16_147;
			r12 = ((hxsl_Type_TVec*)r33)->p0;
			r24 = 4;
			if( r12 != r24 ) goto label$2c4895f_16_143;
			r35 = ((hxsl_Type_TVec*)r33)->p1;
			if( r35 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r35);
			r24 = 1;
			if( r12 != r24 ) goto label$2c4895f_16_139;
			if( r34 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r34);
			r24 = 0;
			if( r12 != r24 ) goto label$2c4895f_16_135;
			r12 = ((hxsl_SizeDecl_SConst*)r34)->p0;
			if( r6 == NULL ) hl_null_access();
			if( r26 == NULL ) hl_null_access();
			r24 = 0;
			r25 = r26->length;
			if( ((unsigned)r24) < ((unsigned)r25) ) goto label$2c4895f_16_129;
			r28 = NULL;
			goto label$2c4895f_16_132;
			label$2c4895f_16_129:
			r10 = r26->array;
			r16 = ((vdynamic**)(r10 + 1))[r24];
			r28 = (hxsl__AllocGlobal)r16;
			label$2c4895f_16_132:
			r6->globals = r28;
			r6->globalsSize = r12;
			goto label$2c4895f_16_138;
			label$2c4895f_16_135:
			r22 = (String)s$assert;
			r16 = haxe_Exception_thrown(((vdynamic*)r22));
			hl_throw((vdynamic*)r16);
			label$2c4895f_16_138:
			goto label$2c4895f_16_142;
			label$2c4895f_16_139:
			r22 = (String)s$assert;
			r16 = haxe_Exception_thrown(((vdynamic*)r22));
			hl_throw((vdynamic*)r16);
			label$2c4895f_16_142:
			goto label$2c4895f_16_146;
			label$2c4895f_16_143:
			r22 = (String)s$assert;
			r16 = haxe_Exception_thrown(((vdynamic*)r22));
			hl_throw((vdynamic*)r16);
			label$2c4895f_16_146:
			goto label$2c4895f_16_150;
			label$2c4895f_16_147:
			r22 = (String)s$assert;
			r16 = haxe_Exception_thrown(((vdynamic*)r22));
			hl_throw((vdynamic*)r16);
			label$2c4895f_16_150:
			goto label$2c4895f_16_154;
			label$2c4895f_16_151:
			r22 = (String)s$assert;
			r16 = haxe_Exception_thrown(((vdynamic*)r22));
			hl_throw((vdynamic*)r16);
			label$2c4895f_16_154:
			goto label$2c4895f_16_356;
		case 2:
			r11 = &t$hxsl_AllocParam;
			r12 = 0;
			r10 = hl_alloc_array(r11,r12);
			r23 = hl_types_ArrayObj_alloc(r10);
			r12 = 0;
			r24 = 0;
			label$2c4895f_16_161:
			if( r20 == NULL ) hl_null_access();
			r30 = r20->length;
			if( r24 >= r30 ) goto label$2c4895f_16_244;
			r30 = r20->length;
			if( ((unsigned)r24) < ((unsigned)r30) ) goto label$2c4895f_16_169;
			r27 = NULL;
			goto label$2c4895f_16_172;
			label$2c4895f_16_169:
			r10 = r20->array;
			r16 = ((vdynamic**)(r10 + 1))[r24];
			r27 = (hxsl___Flatten__Alloc)r16;
			label$2c4895f_16_172:
			++r24;
			if( r27 == NULL ) hl_null_access();
			r19 = r27->v;
			if( r19 ) goto label$2c4895f_16_177;
			goto label$2c4895f_16_161;
			label$2c4895f_16_177:
			if( r3 == NULL ) hl_null_access();
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r25 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,23515/*id*/,&t$_i32);
			r16 = haxe_ds_IntMap_get(r3,r25);
			r37 = hl_to_virtual(&t$vrt_7e2476c,(vdynamic*)r16);
			if( r37 ) goto label$2c4895f_16_208;
			r38 = (hxsl__AllocParam)hl_alloc_obj(&t$hxsl_AllocParam);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r22 = hl_vfields(r19)[2] ? (*(String*)(hl_vfields(r19)[2])) : (String)hl_dyn_getp(r19->value,150958933/*name*/,&t$String);
			r25 = r27->pos;
			r30 = -1;
			r31 = -1;
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocParam_new(r38,r22,r25,r30,r31,r29);
			r28 = (hxsl__AllocGlobal)hl_alloc_obj(&t$hxsl_AllocGlobal);
			r25 = -1;
			r19 = r27->v;
			r22 = hxsl_Cache_getPath(r0,r19);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocGlobal_new(r28,r25,r22,r29);
			r38->perObjectGlobal = r28;
			if( r23 == NULL ) hl_null_access();
			r25 = hl_types_ArrayObj_push(r23,((vdynamic*)r38));
			++r12;
			goto label$2c4895f_16_161;
			label$2c4895f_16_208:
			r38 = (hxsl__AllocParam)hl_alloc_obj(&t$hxsl_AllocParam);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r22 = hl_vfields(r19)[2] ? (*(String*)(hl_vfields(r19)[2])) : (String)hl_dyn_getp(r19->value,150958933/*name*/,&t$String);
			r25 = r27->pos;
			if( r37 == NULL ) hl_null_access();
			r30 = hl_vfields(r37)[1] ? (*(int*)(hl_vfields(r37)[1])) : (int)hl_dyn_geti(r37->value,434184351/*instance*/,&t$_i32);
			r31 = hl_vfields(r37)[0] ? (*(int*)(hl_vfields(r37)[0])) : (int)hl_dyn_geti(r37->value,-32204280/*index*/,&t$_i32);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocParam_new(r38,r22,r25,r30,r31,r29);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			if( r29 == NULL ) hl_null_access();
			r25 = HL__ENUM_INDEX__(r29);
			r30 = 15;
			if( r25 != r30 ) goto label$2c4895f_16_240;
			r34 = ((hxsl_Type_TArray*)r29)->p1;
			r33 = ((hxsl_Type_TArray*)r29)->p0;
			r8 = hxsl_Tools_isSampler(r33);
			if( !r8 ) goto label$2c4895f_16_238;
			r25 = r27->size;
			r25 = -r25;
			r38->pos = r25;
			r30 = r27->size;
			r25 = r12 + r30;
			r12 = r25;
			goto label$2c4895f_16_239;
			label$2c4895f_16_238:
			++r12;
			label$2c4895f_16_239:
			goto label$2c4895f_16_241;
			label$2c4895f_16_240:
			++r12;
			label$2c4895f_16_241:
			if( r23 == NULL ) hl_null_access();
			r25 = hl_types_ArrayObj_push(r23,((vdynamic*)r38));
			goto label$2c4895f_16_161;
			label$2c4895f_16_244:
			r24 = 0;
			if( r23 == NULL ) hl_null_access();
			r25 = r23->length;
			r30 = 1;
			r25 = r25 - r30;
			label$2c4895f_16_249:
			if( r24 >= r25 ) goto label$2c4895f_16_273;
			r30 = r24;
			++r24;
			if( r23 == NULL ) hl_null_access();
			r40 = r23->length;
			if( ((unsigned)r30) < ((unsigned)r40) ) goto label$2c4895f_16_258;
			r38 = NULL;
			goto label$2c4895f_16_261;
			label$2c4895f_16_258:
			r10 = r23->array;
			r16 = ((vdynamic**)(r10 + 1))[r30];
			r38 = (hxsl__AllocParam)r16;
			label$2c4895f_16_261:
			if( r38 == NULL ) hl_null_access();
			r40 = 1;
			r31 = r30 + r40;
			r40 = r23->length;
			if( ((unsigned)r31) < ((unsigned)r40) ) goto label$2c4895f_16_268;
			r39 = NULL;
			goto label$2c4895f_16_271;
			label$2c4895f_16_268:
			r10 = r23->array;
			r16 = ((vdynamic**)(r10 + 1))[r31];
			r39 = (hxsl__AllocParam)r16;
			label$2c4895f_16_271:
			r38->next = r39;
			goto label$2c4895f_16_249;
			label$2c4895f_16_273:
			if( r18 == NULL ) hl_null_access();
			r29 = hl_vfields(r18)[5] ? (*(venum**)(hl_vfields(r18)[5])) : (venum*)hl_dyn_getp(r18->value,218690500/*type*/,&t$hxsl_Type);
			if( r29 == NULL ) hl_null_access();
			r24 = HL__ENUM_INDEX__(r29);
			r25 = 15;
			if( r24 != r25 ) goto label$2c4895f_16_353;
			r34 = ((hxsl_Type_TArray*)r29)->p1;
			r33 = ((hxsl_Type_TArray*)r29)->p0;
			r8 = hxsl_Tools_isSampler(r33);
			if( !r8 ) goto label$2c4895f_16_293;
			if( r9 == NULL ) hl_null_access();
			r42 = hl_alloc_virtual(&t$vrt_7c116e9);
			if( hl_vfields(r42)[1] ) *(venum**)(hl_vfields(r42)[1]) = (venum*)r33; else hl_dyn_setp(r42->value,116/*t*/,&t$hxsl_Type,r33);
			if( hl_vfields(r42)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r42)[0]) = (hl__types__ArrayObj)r23; else hl_dyn_setp(r42->value,4847905/*all*/,&t$hl_types_ArrayObj,r23);
			r24 = hl_types_ArrayObj_push(r9,((vdynamic*)r42));
			if( r6 == NULL ) hl_null_access();
			r24 = r6->texturesCount;
			r24 = r24 + r12;
			r6->texturesCount = r24;
			goto label$2c4895f_16_352;
			label$2c4895f_16_293:
			if( r33 == NULL ) hl_null_access();
			r24 = HL__ENUM_INDEX__(r33);
			switch(r24) {
				default:
				case 0:
				case 1:
				case 2:
				case 3:
				case 4:
				case 6:
				case 7:
				case 8:
				case 9:
				case 10:
				case 11:
				case 12:
				case 13:
				case 14:
				case 15:
					r22 = (String)s$assert;
					r16 = haxe_Exception_thrown(((vdynamic*)r22));
					hl_throw((vdynamic*)r16);
				case 5:
					r24 = ((hxsl_Type_TVec*)r33)->p0;
					r25 = 4;
					if( r24 != r25 ) goto label$2c4895f_16_333;
					r35 = ((hxsl_Type_TVec*)r33)->p1;
					if( r35 == NULL ) hl_null_access();
					r24 = HL__ENUM_INDEX__(r35);
					r25 = 1;
					if( r24 != r25 ) goto label$2c4895f_16_329;
					if( r34 == NULL ) hl_null_access();
					r24 = HL__ENUM_INDEX__(r34);
					r25 = 0;
					if( r24 != r25 ) goto label$2c4895f_16_325;
					r24 = ((hxsl_SizeDecl_SConst*)r34)->p0;
					if( r6 == NULL ) hl_null_access();
					if( r23 == NULL ) hl_null_access();
					r25 = 0;
					r30 = r23->length;
					if( ((unsigned)r25) < ((unsigned)r30) ) goto label$2c4895f_16_319;
					r38 = NULL;
					goto label$2c4895f_16_322;
					label$2c4895f_16_319:
					r10 = r23->array;
					r16 = ((vdynamic**)(r10 + 1))[r25];
					r38 = (hxsl__AllocParam)r16;
					label$2c4895f_16_322:
					r6->params = r38;
					r6->paramsSize = r24;
					goto label$2c4895f_16_328;
					label$2c4895f_16_325:
					r22 = (String)s$assert;
					r16 = haxe_Exception_thrown(((vdynamic*)r22));
					hl_throw((vdynamic*)r16);
					label$2c4895f_16_328:
					goto label$2c4895f_16_332;
					label$2c4895f_16_329:
					r22 = (String)s$assert;
					r16 = haxe_Exception_thrown(((vdynamic*)r22));
					hl_throw((vdynamic*)r16);
					label$2c4895f_16_332:
					goto label$2c4895f_16_336;
					label$2c4895f_16_333:
					r22 = (String)s$assert;
					r16 = haxe_Exception_thrown(((vdynamic*)r22));
					hl_throw((vdynamic*)r16);
					label$2c4895f_16_336:
					goto label$2c4895f_16_352;
				case 16:
					r36 = ((hxsl_Type_TBuffer*)r33)->p1;
					r41 = ((hxsl_Type_TBuffer*)r33)->p0;
					if( r6 == NULL ) hl_null_access();
					if( r23 == NULL ) hl_null_access();
					r24 = 0;
					r25 = r23->length;
					if( ((unsigned)r24) < ((unsigned)r25) ) goto label$2c4895f_16_346;
					r38 = NULL;
					goto label$2c4895f_16_349;
					label$2c4895f_16_346:
					r10 = r23->array;
					r16 = ((vdynamic**)(r10 + 1))[r24];
					r38 = (hxsl__AllocParam)r16;
					label$2c4895f_16_349:
					r6->buffers = r38;
					r24 = r23->length;
					r6->bufferCount = r24;
			}
			label$2c4895f_16_352:
			goto label$2c4895f_16_356;
			label$2c4895f_16_353:
			r22 = (String)s$assert;
			r16 = haxe_Exception_thrown(((vdynamic*)r22));
			hl_throw((vdynamic*)r16);
	}
	label$2c4895f_16_356:
	goto label$2c4895f_16_18;
	label$2c4895f_16_357:
	if( r9 == NULL ) hl_null_access();
	r12 = r9->length;
	r24 = 0;
	if( r24 >= r12 ) goto label$2c4895f_16_438;
	r43 = &cl$0;
	if( r43 ) goto label$2c4895f_16_365;
	r44 = NULL;
	goto label$2c4895f_16_366;
	label$2c4895f_16_365:
	r44 = hl_alloc_closure_ptr(&t$fun_aafc2df,hxsl_Cache_flattenShader__$2,r43);
	label$2c4895f_16_366:
	hl_types_ArrayObj_sort(r9,r44);
	if( r6 == NULL ) hl_null_access();
	r12 = 0;
	r24 = r9->length;
	if( ((unsigned)r12) < ((unsigned)r24) ) goto label$2c4895f_16_373;
	r42 = NULL;
	goto label$2c4895f_16_376;
	label$2c4895f_16_373:
	r10 = r9->array;
	r16 = ((vdynamic**)(r10 + 1))[r12];
	r42 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r16);
	label$2c4895f_16_376:
	if( r42 == NULL ) hl_null_access();
	r20 = hl_vfields(r42)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r42)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r42->value,4847905/*all*/,&t$hl_types_ArrayObj);
	if( r20 == NULL ) hl_null_access();
	r12 = 0;
	r24 = r20->length;
	if( ((unsigned)r12) < ((unsigned)r24) ) goto label$2c4895f_16_384;
	r38 = NULL;
	goto label$2c4895f_16_387;
	label$2c4895f_16_384:
	r10 = r20->array;
	r16 = ((vdynamic**)(r10 + 1))[r12];
	r38 = (hxsl__AllocParam)r16;
	label$2c4895f_16_387:
	r6->textures = r38;
	r12 = 1;
	r24 = r9->length;
	label$2c4895f_16_390:
	if( r12 >= r24 ) goto label$2c4895f_16_438;
	r25 = r12;
	++r12;
	if( r9 == NULL ) hl_null_access();
	r31 = 1;
	r30 = r25 - r31;
	r31 = r9->length;
	if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_16_401;
	r42 = NULL;
	goto label$2c4895f_16_404;
	label$2c4895f_16_401:
	r10 = r9->array;
	r16 = ((vdynamic**)(r10 + 1))[r30];
	r42 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r16);
	label$2c4895f_16_404:
	if( r42 == NULL ) hl_null_access();
	r20 = hl_vfields(r42)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r42)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r42->value,4847905/*all*/,&t$hl_types_ArrayObj);
	if( r20 == NULL ) hl_null_access();
	r30 = r20->length;
	r31 = 1;
	r30 = r30 - r31;
	r31 = r20->length;
	if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_16_414;
	r38 = NULL;
	goto label$2c4895f_16_417;
	label$2c4895f_16_414:
	r10 = r20->array;
	r16 = ((vdynamic**)(r10 + 1))[r30];
	r38 = (hxsl__AllocParam)r16;
	label$2c4895f_16_417:
	if( r38 == NULL ) hl_null_access();
	r31 = r9->length;
	if( ((unsigned)r25) < ((unsigned)r31) ) goto label$2c4895f_16_422;
	r42 = NULL;
	goto label$2c4895f_16_425;
	label$2c4895f_16_422:
	r10 = r9->array;
	r16 = ((vdynamic**)(r10 + 1))[r25];
	r42 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r16);
	label$2c4895f_16_425:
	if( r42 == NULL ) hl_null_access();
	r23 = hl_vfields(r42)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r42)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r42->value,4847905/*all*/,&t$hl_types_ArrayObj);
	if( r23 == NULL ) hl_null_access();
	r30 = 0;
	r31 = r23->length;
	if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_16_433;
	r45 = NULL;
	goto label$2c4895f_16_436;
	label$2c4895f_16_433:
	r10 = r23->array;
	r16 = ((vdynamic**)(r10 + 1))[r30];
	r45 = (hxsl__AllocParam)r16;
	label$2c4895f_16_436:
	r38->next = r45;
	goto label$2c4895f_16_390;
	label$2c4895f_16_438:
	if( r6 == NULL ) hl_null_access();
	r28 = r6->globals;
	if( r28 ) goto label$2c4895f_16_443;
	r12 = 0;
	r6->globalsSize = r12;
	label$2c4895f_16_443:
	r38 = r6->params;
	if( r38 ) goto label$2c4895f_16_447;
	r12 = 0;
	r6->paramsSize = r12;
	label$2c4895f_16_447:
	r38 = r6->buffers;
	if( r38 ) goto label$2c4895f_16_451;
	r12 = 0;
	r6->bufferCount = r12;
	label$2c4895f_16_451:
	r6->data = r7;
	return r6;
}

hxsl__Cache hxsl_Cache_get() {
	hxsl__Cache r0, r3;
	hxsl__$Cache r1;
	r1 = (hxsl__$Cache)g$_hxsl_Cache;
	r0 = r1->INST;
	if( r0 ) goto label$2c4895f_17_8;
	r3 = (hxsl__Cache)hl_alloc_obj(&t$hxsl_Cache);
	hxsl_Cache_new(r3);
	r0 = r3;
	r1 = (hxsl__$Cache)g$_hxsl_Cache;
	r1->INST = r3;
	label$2c4895f_17_8:
	return r0;
}

int hxsl_Cache_compileRuntimeShader__$2(vclosure* r0,vdynamic* r1,vdynamic* r2) {
	vvirtual *r3, *r4;
	int r5;
	r3 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r1);
	r4 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r2);
	r5 = r0->hasValue ? ((int (*)(vdynamic*,vvirtual*,vvirtual*))r0->fun)((vdynamic*)r0->value,r3,r4) : ((int (*)(vvirtual*,vvirtual*))r0->fun)(r3,r4);
	return r5;
}

int hxsl_Cache_flattenShader__$2(vclosure* r0,vdynamic* r1,vdynamic* r2) {
	vvirtual *r3, *r4;
	int r5;
	r3 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r1);
	r4 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r2);
	r5 = r0->hasValue ? ((int (*)(vdynamic*,vvirtual*,vvirtual*))r0->fun)((vdynamic*)r0->value,r3,r4) : ((int (*)(vvirtual*,vvirtual*))r0->fun)(r3,r4);
	return r5;
}

