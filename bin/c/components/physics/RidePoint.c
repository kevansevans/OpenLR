// Generated by HLC 4.1.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <components/physics/RidePoint.h>
extern hl_type t$h2d_col_Point;
void h2d_col_Point_new(h2d__col__Point,double*,double*);
extern hl_type t$vrt_6c2da0f;

void components_physics_RidePoint_step(components__physics__RidePoint r0,h2d__col__Point r1) {
	h2d__col__Point r2, r4, r6, r8;
	double r5, r7, r10;
	double *r9, *r11;
	if( r1 ) goto label$028f293_1_3;
	r2 = r0->grav;
	goto label$028f293_1_4;
	label$028f293_1_3:
	r2 = r1;
	label$028f293_1_4:
	r4 = r0->dir;
	if( r4 == NULL ) hl_null_access();
	r6 = r0->pos;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r0->vel;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->x;
	r5 = r5 - r7;
	if( r2 == NULL ) hl_null_access();
	r7 = r2->x;
	r5 = r5 + r7;
	r4->x = r5;
	r4 = r0->dir;
	if( r4 == NULL ) hl_null_access();
	r6 = r0->pos;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->y;
	r6 = r0->vel;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r5 = r5 - r7;
	r7 = r2->y;
	r5 = r5 + r7;
	r4->y = r5;
	r4 = r0->vel;
	if( r4 == NULL ) hl_null_access();
	r6 = r0->pos;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r4->x = r5;
	r4 = r0->vel;
	if( r4 == NULL ) hl_null_access();
	r6 = r0->pos;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->y;
	r4->y = r5;
	r4 = r0->pos;
	r6 = r0->dir;
	r8 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r4 == NULL ) hl_null_access();
	r5 = r4->x;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->x;
	r5 = r5 + r7;
	r9 = &r5;
	r7 = r4->y;
	r10 = r6->y;
	r7 = r7 + r10;
	r11 = &r7;
	h2d_col_Point_new(r8,r9,r11);
	r0->pos = r8;
	return;
}

vvirtual* components_physics_RidePoint_saveState(components__physics__RidePoint r0) {
	vvirtual *r9;
	h2d__col__Point r1, r3, r5, r10;
	double r4, r7, r11, r12;
	double *r6, *r8;
	r1 = r0->pos;
	r3 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r1 == NULL ) hl_null_access();
	r4 = r1->x;
	r6 = &r4;
	r7 = r1->y;
	r8 = &r7;
	h2d_col_Point_new(r3,r6,r8);
	r5 = r0->vel;
	r9 = hl_alloc_virtual(&t$vrt_6c2da0f);
	if( hl_vfields(r9)[0] ) *(h2d__col__Point*)(hl_vfields(r9)[0]) = (h2d__col__Point)r3; else hl_dyn_setp(r9->value,-352673756/*position*/,&t$h2d_col_Point,r3);
	r10 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r5 == NULL ) hl_null_access();
	r11 = r5->x;
	r6 = &r11;
	r12 = r5->y;
	r8 = &r12;
	h2d_col_Point_new(r10,r6,r8);
	if( hl_vfields(r9)[1] ) *(h2d__col__Point*)(hl_vfields(r9)[1]) = (h2d__col__Point)r10; else hl_dyn_setp(r9->value,519963165/*velocity*/,&t$h2d_col_Point,r10);
	return r9;
}

void components_physics_RidePoint_restoreState(components__physics__RidePoint r0,vvirtual* r1) {
	h2d__col__Point r2, r4, r6;
	double r5, r8, r10, r11;
	double *r7, *r9;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[0] ? (*(h2d__col__Point*)(hl_vfields(r1)[0])) : (h2d__col__Point)hl_dyn_getp(r1->value,-352673756/*position*/,&t$h2d_col_Point);
	r4 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r2 == NULL ) hl_null_access();
	r5 = r2->x;
	r7 = &r5;
	r8 = r2->y;
	r9 = &r8;
	h2d_col_Point_new(r4,r7,r9);
	r0->pos = r4;
	r4 = hl_vfields(r1)[1] ? (*(h2d__col__Point*)(hl_vfields(r1)[1])) : (h2d__col__Point)hl_dyn_getp(r1->value,519963165/*velocity*/,&t$h2d_col_Point);
	r6 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r4 == NULL ) hl_null_access();
	r10 = r4->x;
	r7 = &r10;
	r11 = r4->y;
	r9 = &r11;
	h2d_col_Point_new(r6,r7,r9);
	r0->vel = r6;
	return;
}

void components_physics_RidePoint_new(components__physics__RidePoint r0,double* r1,double* r2,double* r3) {
	h2d__col__Point r7;
	double r4, r5, r6, r8, r9;
	if( r1 ) goto label$028f293_4_3;
	r4 = 0.;
	goto label$028f293_4_4;
	label$028f293_4_3:
	r4 = *r1;
	label$028f293_4_4:
	if( r2 ) goto label$028f293_4_7;
	r5 = 0.;
	goto label$028f293_4_8;
	label$028f293_4_7:
	r5 = *r2;
	label$028f293_4_8:
	if( r3 ) goto label$028f293_4_11;
	r6 = 0.;
	goto label$028f293_4_12;
	label$028f293_4_11:
	r6 = *r3;
	label$028f293_4_12:
	r7 = NULL;
	r0->grav = r7;
	r7 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r8 = r4;
	r1 = &r8;
	r9 = r5;
	r2 = &r9;
	h2d_col_Point_new(r7,r1,r2);
	r0->pos = r7;
	r7 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r1 = NULL;
	r2 = NULL;
	h2d_col_Point_new(r7,r1,r2);
	r0->dir = r7;
	r7 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r1 = NULL;
	r2 = NULL;
	h2d_col_Point_new(r7,r1,r2);
	r0->vel = r7;
	r0->friction = r6;
	return;
}

