// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <components/managers/Grid.h>
#include <components/lines/LineBase.h>
#include <h2d/col/Point.h>
void components_managers_Grid_addLine(components__managers__Grid,components__lines__LineBase);
vvirtual* components_managers_Grid_registryPosition(double,double);
extern hl_type t$_i32;
void components_managers_Grid_storeLine(components__managers__Grid,components__lines__LineBase,int,int);
#include <hl/natives.h>
#include <components/managers/Simulation.h>
#include <_std/Main.h>
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
extern $Main g$_Main;
void components_managers_Simulation_updateSim(components__managers__Simulation);
#include <components/stage/LRConsole.h>
extern String s$x;
String String___alloc__(vbyte*,int);
String String___add__(String,String);
extern String s$y;
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
extern hl_type t$vrt_3d3bf19;
extern hl_type t$vrt_e998098;
extern hl_type t$h2d_col_Point;
void h2d_col_Point_new(h2d__col__Point,double*,double*);
extern hl_type t$components_lines_LineBase;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$hl_types_ArrayObj;
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern String s$Error_registering_line;
#include <h2d/Console.h>
void h2d_Console_log(h2d__Console,String,vdynamic*);
void components_managers_Grid_unregister(components__managers__Grid,components__lines__LineBase);
#include <components/stage/Canvas.h>
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
void components_stage_Canvas_redrawLines(components__stage__Canvas,int);
extern hl_type t$vrt_689169c;
extern hl_type t$haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
void hl_types_ArrayObj_new(hl__types__ArrayObj);

void components_managers_Grid_register(components__managers__Grid r0,components__lines__LineBase r1) {
	vvirtual *r4, *r8, *r9;
	bool r18;
	h2d__col__Point r6;
	double r5, r7, r15, r16, r17, r19, r20, r21, r22;
	int r2, r10, r11, r12, r13, r14;
	r2 = 0;
	r0->updateFrame = r2;
	components_managers_Grid_addLine(r0,r1);
	if( r1 == NULL ) hl_null_access();
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r4 = components_managers_Grid_registryPosition(r5,r7);
	r6 = r1->end;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r1->end;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r8 = components_managers_Grid_registryPosition(r5,r7);
	r5 = r1->dx;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_24;
	if( r8 == NULL ) hl_null_access();
	r2 = hl_vfields(r8)[2] ? (*(int*)(hl_vfields(r8)[2])) : (int)hl_dyn_geti(r8->value,120/*x*/,&t$_i32);
	goto label$e6f4f97_1_26;
	label$e6f4f97_1_24:
	if( r4 == NULL ) hl_null_access();
	r2 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	label$e6f4f97_1_26:
	r5 = r1->dx;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_32;
	if( r4 == NULL ) hl_null_access();
	r10 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	goto label$e6f4f97_1_34;
	label$e6f4f97_1_32:
	if( r8 == NULL ) hl_null_access();
	r10 = hl_vfields(r8)[2] ? (*(int*)(hl_vfields(r8)[2])) : (int)hl_dyn_geti(r8->value,120/*x*/,&t$_i32);
	label$e6f4f97_1_34:
	r5 = r1->dy;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_40;
	if( r8 == NULL ) hl_null_access();
	r11 = hl_vfields(r8)[3] ? (*(int*)(hl_vfields(r8)[3])) : (int)hl_dyn_geti(r8->value,121/*y*/,&t$_i32);
	goto label$e6f4f97_1_42;
	label$e6f4f97_1_40:
	if( r4 == NULL ) hl_null_access();
	r11 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	label$e6f4f97_1_42:
	r5 = r1->dy;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_48;
	if( r4 == NULL ) hl_null_access();
	r12 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	goto label$e6f4f97_1_50;
	label$e6f4f97_1_48:
	if( r8 == NULL ) hl_null_access();
	r12 = hl_vfields(r8)[3] ? (*(int*)(hl_vfields(r8)[3])) : (int)hl_dyn_geti(r8->value,121/*y*/,&t$_i32);
	label$e6f4f97_1_50:
	r5 = r1->dx;
	r7 = 0.;
	if( r5 != r7 ) goto label$e6f4f97_1_56;
	r5 = r1->dy;
	r7 = 0.;
	if( r5 == r7 ) goto label$e6f4f97_1_58;
	label$e6f4f97_1_56:
	if( r10 != r2 ) goto label$e6f4f97_1_63;
	if( r12 != r11 ) goto label$e6f4f97_1_63;
	label$e6f4f97_1_58:
	if( r4 == NULL ) hl_null_access();
	r13 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	r14 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	components_managers_Grid_storeLine(r0,r1,r13,r14);
	return;
	label$e6f4f97_1_63:
	if( r4 == NULL ) hl_null_access();
	r13 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	r14 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	components_managers_Grid_storeLine(r0,r1,r13,r14);
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r15 = 1.;
	r16 = r1->dx;
	r15 = r15 / r16;
	r16 = 1.;
	r17 = r1->dy;
	r16 = r16 / r17;
	label$e6f4f97_1_79:
	r18 = true;
	if( !r18 ) goto label$e6f4f97_1_195;
	if( r4 == NULL ) hl_null_access();
	r13 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	r14 = 0;
	if( r13 >= r14 ) goto label$e6f4f97_1_99;
	if( r1 == NULL ) hl_null_access();
	r19 = r1->dx;
	r20 = 0.;
	if( !(r20 < r19) ) goto label$e6f4f97_1_94;
	r19 = 14.;
	r20 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r19 = r19 + r20;
	goto label$e6f4f97_1_97;
	label$e6f4f97_1_94:
	r19 = -14.;
	r20 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r19 = r19 - r20;
	label$e6f4f97_1_97:
	r17 = r19;
	goto label$e6f4f97_1_112;
	label$e6f4f97_1_99:
	if( r1 == NULL ) hl_null_access();
	r19 = r1->dx;
	r20 = 0.;
	if( !(r20 < r19) ) goto label$e6f4f97_1_107;
	r19 = 14.;
	r20 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r19 = r19 - r20;
	goto label$e6f4f97_1_111;
	label$e6f4f97_1_107:
	r19 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r20 = 1.;
	r19 = r19 + r20;
	r19 = -r19;
	label$e6f4f97_1_111:
	r17 = r19;
	label$e6f4f97_1_112:
	r13 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	r14 = 0;
	if( r13 >= r14 ) goto label$e6f4f97_1_127;
	r20 = r1->dy;
	r21 = 0.;
	if( !(r21 < r20) ) goto label$e6f4f97_1_122;
	r20 = 14.;
	r21 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r20 = r20 + r21;
	goto label$e6f4f97_1_125;
	label$e6f4f97_1_122:
	r20 = -14.;
	r21 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r20 = r20 - r21;
	label$e6f4f97_1_125:
	r19 = r20;
	goto label$e6f4f97_1_139;
	label$e6f4f97_1_127:
	r20 = r1->dy;
	r21 = 0.;
	if( !(r21 < r20) ) goto label$e6f4f97_1_134;
	r20 = 14.;
	r21 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r20 = r20 - r21;
	goto label$e6f4f97_1_138;
	label$e6f4f97_1_134:
	r20 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r21 = 1.;
	r20 = r20 + r21;
	r20 = -r20;
	label$e6f4f97_1_138:
	r19 = r20;
	label$e6f4f97_1_139:
	r20 = r1->dx;
	r21 = 0.;
	if( r20 != r21 ) goto label$e6f4f97_1_145;
	r20 = r7 + r19;
	r7 = r20;
	goto label$e6f4f97_1_179;
	label$e6f4f97_1_145:
	r20 = r1->dy;
	r21 = 0.;
	if( r20 != r21 ) goto label$e6f4f97_1_151;
	r20 = r5 + r17;
	r5 = r20;
	goto label$e6f4f97_1_179;
	label$e6f4f97_1_151:
	r21 = r1->dy;
	r21 = r21 * r17;
	r21 = r21 * r15;
	r20 = r7 + r21;
	r21 = r20 - r7;
	r21 = hl_math_abs(r21);
	r22 = hl_math_abs(r19);
	if( !(r21 < r22) ) goto label$e6f4f97_1_163;
	r21 = r5 + r17;
	r5 = r21;
	r7 = r20;
	goto label$e6f4f97_1_179;
	label$e6f4f97_1_163:
	r21 = r20 - r7;
	r21 = hl_math_abs(r21);
	r22 = hl_math_abs(r19);
	if( r21 != r22 ) goto label$e6f4f97_1_172;
	r21 = r5 + r17;
	r5 = r21;
	r21 = r7 + r19;
	r7 = r21;
	goto label$e6f4f97_1_179;
	label$e6f4f97_1_172:
	r22 = r1->dx;
	r22 = r22 * r19;
	r22 = r22 * r16;
	r21 = r5 + r22;
	r5 = r21;
	r21 = r7 + r19;
	r7 = r21;
	label$e6f4f97_1_179:
	r9 = components_managers_Grid_registryPosition(r5,r7);
	r4 = r9;
	if( r9 == NULL ) hl_null_access();
	r13 = hl_vfields(r9)[2] ? (*(int*)(hl_vfields(r9)[2])) : (int)hl_dyn_geti(r9->value,120/*x*/,&t$_i32);
	if( r13 < r10 ) goto label$e6f4f97_1_194;
	r13 = hl_vfields(r9)[2] ? (*(int*)(hl_vfields(r9)[2])) : (int)hl_dyn_geti(r9->value,120/*x*/,&t$_i32);
	if( r2 < r13 ) goto label$e6f4f97_1_194;
	r13 = hl_vfields(r9)[3] ? (*(int*)(hl_vfields(r9)[3])) : (int)hl_dyn_geti(r9->value,121/*y*/,&t$_i32);
	if( r13 < r12 ) goto label$e6f4f97_1_194;
	r13 = hl_vfields(r9)[3] ? (*(int*)(hl_vfields(r9)[3])) : (int)hl_dyn_geti(r9->value,121/*y*/,&t$_i32);
	if( r11 < r13 ) goto label$e6f4f97_1_194;
	r13 = hl_vfields(r9)[2] ? (*(int*)(hl_vfields(r9)[2])) : (int)hl_dyn_geti(r9->value,120/*x*/,&t$_i32);
	r14 = hl_vfields(r9)[3] ? (*(int*)(hl_vfields(r9)[3])) : (int)hl_dyn_geti(r9->value,121/*y*/,&t$_i32);
	components_managers_Grid_storeLine(r0,r1,r13,r14);
	goto label$e6f4f97_1_79;
	label$e6f4f97_1_194:
	return;
	label$e6f4f97_1_195:
	return;
}

void components_managers_Grid_addLine(components__managers__Grid r0,components__lines__LineBase r1) {
	hl__types__ArrayObj r5;
	$Main r9;
	components__managers__Simulation r8;
	vdynamic *r3;
	varray *r7;
	int r4, r6;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->id;
	if( r3 ) goto label$e6f4f97_2_6;
	r4 = r0->lineIDCount;
	r3 = hl_alloc_dynamic(&t$_i32);
	r3->v.i = r4;
	r1->id = r3;
	label$e6f4f97_2_6:
	r5 = r0->lines;
	if( r5 == NULL ) hl_null_access();
	r3 = r1->id;
	r4 = r3 ? r3->v.i : 0;
	r6 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$e6f4f97_2_13;
	hl_types_ArrayObj___expand(r5,r4);
	label$e6f4f97_2_13:
	r7 = r5->array;
	((components__lines__LineBase*)(r7 + 1))[r4] = r1;
	r4 = r0->lineCount;
	++r4;
	r0->lineCount = r4;
	r4 = r0->lineIDCount;
	++r4;
	r0->lineIDCount = r4;
	r4 = r1->type;
	switch(r4) {
		default:
			goto label$e6f4f97_2_35;
		case 0:
			r4 = r0->floorCount;
			++r4;
			r0->floorCount = r4;
			goto label$e6f4f97_2_35;
		case 1:
			r4 = r0->accelCount;
			++r4;
			r0->accelCount = r4;
			goto label$e6f4f97_2_35;
		case 2:
			r4 = r0->sceneCount;
			++r4;
			r0->sceneCount = r4;
	}
	label$e6f4f97_2_35:
	r9 = ($Main)g$_Main;
	r8 = r9->simulation;
	if( r8 == NULL ) hl_null_access();
	components_managers_Simulation_updateSim(r8);
	return;
}

void components_managers_Grid_storeLine(components__managers__Grid r0,components__lines__LineBase r1,int r2,int r3) {
	String r4, r8;
	hl__types__ArrayObj r19;
	vvirtual *r12, *r13;
	haxe__ds__StringMap r11;
	hl_type *r21;
	$Main r23;
	h2d__col__Point r14;
	double r15, r17;
	double *r16, *r18;
	vdynamic *r10, *r24;
	int *r6;
	components__stage__LRConsole r22;
	varray *r20;
	vbyte *r7;
	int r5, r25;
	r4 = (String)s$x;
	r5 = r2;
	r6 = &r5;
	r7 = hl_itos(r5,r6);
	r8 = String___alloc__(r7,r5);
	r4 = String___add__(r4,r8);
	r8 = (String)s$y;
	r4 = String___add__(r4,r8);
	r5 = r3;
	r6 = &r5;
	r7 = hl_itos(r5,r6);
	r8 = String___alloc__(r7,r5);
	r4 = String___add__(r4,r8);
	r11 = r0->registry;
	if( r11 == NULL ) hl_null_access();
	r10 = haxe_ds_StringMap_get(r11,r4);
	r12 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r10);
	if( r12 ) goto label$e6f4f97_3_45;
	r13 = hl_alloc_virtual(&t$vrt_e998098);
	r14 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r15 = (double)r2;
	r16 = &r15;
	r17 = (double)r3;
	r18 = &r17;
	h2d_col_Point_new(r14,r16,r18);
	if( hl_vfields(r13)[3] ) *(h2d__col__Point*)(hl_vfields(r13)[3]) = (h2d__col__Point)r14; else hl_dyn_setp(r13->value,-352673756/*position*/,&t$h2d_col_Point,r14);
	r21 = &t$components_lines_LineBase;
	r5 = 0;
	r20 = hl_alloc_array(r21,r5);
	r19 = hl_types_ArrayObj_alloc(r20);
	if( hl_vfields(r13)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r13)[0]) = (hl__types__ArrayObj)r19; else hl_dyn_setp(r13->value,233152173/*allLines*/,&t$hl_types_ArrayObj,r19);
	r21 = &t$components_lines_LineBase;
	r5 = 0;
	r20 = hl_alloc_array(r21,r5);
	r19 = hl_types_ArrayObj_alloc(r20);
	if( hl_vfields(r13)[1] ) *(hl__types__ArrayObj*)(hl_vfields(r13)[1]) = (hl__types__ArrayObj)r19; else hl_dyn_setp(r13->value,-246583750/*colliders*/,&t$hl_types_ArrayObj,r19);
	r21 = &t$components_lines_LineBase;
	r5 = 0;
	r20 = hl_alloc_array(r21,r5);
	r19 = hl_types_ArrayObj_alloc(r20);
	if( hl_vfields(r13)[2] ) *(hl__types__ArrayObj*)(hl_vfields(r13)[2]) = (hl__types__ArrayObj)r19; else hl_dyn_setp(r13->value,332491895/*nonColliders*/,&t$hl_types_ArrayObj,r19);
	r12 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r13);
	r11 = r0->registry;
	if( r11 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r11,r4,((vdynamic*)r12));
	label$e6f4f97_3_45:
	r11 = r0->registry;
	if( r11 == NULL ) hl_null_access();
	r10 = haxe_ds_StringMap_get(r11,r4);
	r12 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r10);
	if( r12 == NULL ) hl_null_access();
	r19 = hl_vfields(r12)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r12)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r12->value,233152173/*allLines*/,&t$hl_types_ArrayObj);
	if( r19 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r19,((vdynamic*)r1));
	if( r1 == NULL ) hl_null_access();
	r5 = r1->type;
	switch(r5) {
		default:
			r23 = ($Main)g$_Main;
			r22 = r23->console;
			if( r22 == NULL ) hl_null_access();
			r8 = (String)s$Error_registering_line;
			r5 = 16711680;
			r24 = hl_alloc_dynamic(&t$_i32);
			r24->v.i = r5;
			h2d_Console_log(((h2d__Console)r22),r8,r24);
			goto label$e6f4f97_3_87;
		case 0:
		case 1:
			r11 = r0->registry;
			if( r11 == NULL ) hl_null_access();
			r10 = haxe_ds_StringMap_get(r11,r4);
			r12 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r10);
			if( r12 == NULL ) hl_null_access();
			r19 = hl_vfields(r12)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r12)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r12->value,-246583750/*colliders*/,&t$hl_types_ArrayObj);
			if( r19 == NULL ) hl_null_access();
			r24 = r1->id;
			r5 = r24 ? r24->v.i : 0;
			r25 = r19->length;
			if( ((unsigned)r5) < ((unsigned)r25) ) goto label$e6f4f97_3_76;
			hl_types_ArrayObj___expand(r19,r5);
			label$e6f4f97_3_76:
			r20 = r19->array;
			((components__lines__LineBase*)(r20 + 1))[r5] = r1;
			goto label$e6f4f97_3_87;
		case 2:
			r11 = r0->registry;
			if( r11 == NULL ) hl_null_access();
			r10 = haxe_ds_StringMap_get(r11,r4);
			r12 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r10);
			if( r12 == NULL ) hl_null_access();
			r19 = hl_vfields(r12)[3] ? (*(hl__types__ArrayObj*)(hl_vfields(r12)[3])) : (hl__types__ArrayObj)hl_dyn_getp(r12->value,332491895/*nonColliders*/,&t$hl_types_ArrayObj);
			if( r19 == NULL ) hl_null_access();
			r5 = hl_types_ArrayObj_push(r19,((vdynamic*)r1));
	}
	label$e6f4f97_3_87:
	r19 = r1->keyList;
	if( r19 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r19,((vdynamic*)r4));
	return;
}

void components_managers_Grid_deleteTrack(components__managers__Grid r0) {
	hl__types__ArrayObj r3;
	components__lines__LineBase r5;
	vdynamic *r6;
	varray *r7;
	int r1, r4;
	r1 = 0;
	r3 = r0->lines;
	label$e6f4f97_4_2:
	if( r3 == NULL ) hl_null_access();
	r4 = r3->length;
	if( r1 >= r4 ) goto label$e6f4f97_4_16;
	r4 = r3->length;
	if( ((unsigned)r1) < ((unsigned)r4) ) goto label$e6f4f97_4_10;
	r5 = NULL;
	goto label$e6f4f97_4_13;
	label$e6f4f97_4_10:
	r7 = r3->array;
	r6 = ((vdynamic**)(r7 + 1))[r1];
	r5 = (components__lines__LineBase)r6;
	label$e6f4f97_4_13:
	++r1;
	components_managers_Grid_unregister(r0,r5);
	goto label$e6f4f97_4_2;
	label$e6f4f97_4_16:
	return;
}

void components_managers_Grid_unregister(components__managers__Grid r0,components__lines__LineBase r1) {
	String r10;
	vvirtual *r14;
	haxe__ds__StringMap r13;
	hl__types__ArrayObj r6, r9;
	bool r12;
	$Main r17;
	components__lines__LineBase r3;
	components__stage__Canvas r18;
	components__managers__Simulation r16;
	vdynamic *r4, *r15;
	varray *r11;
	int r5, r7, r8;
	if( r1 ) goto label$e6f4f97_5_2;
	return;
	label$e6f4f97_5_2:
	r5 = 0;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->keyList;
	label$e6f4f97_5_5:
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	if( r5 >= r8 ) goto label$e6f4f97_5_47;
	r8 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$e6f4f97_5_13;
	r10 = NULL;
	goto label$e6f4f97_5_16;
	label$e6f4f97_5_13:
	r11 = r6->array;
	r4 = ((vdynamic**)(r11 + 1))[r5];
	r10 = (String)r4;
	label$e6f4f97_5_16:
	++r5;
	r13 = r0->registry;
	if( r13 == NULL ) hl_null_access();
	r4 = haxe_ds_StringMap_get(r13,r10);
	r14 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r4);
	if( r14 == NULL ) hl_null_access();
	r9 = hl_vfields(r14)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,233152173/*allLines*/,&t$hl_types_ArrayObj);
	if( r9 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_remove(r9,((vdynamic*)r1));
	if( r1 == NULL ) hl_null_access();
	r7 = r1->type;
	switch(r7) {
		default:
			goto label$e6f4f97_5_46;
		case 0:
		case 1:
			r13 = r0->registry;
			if( r13 == NULL ) hl_null_access();
			r4 = haxe_ds_StringMap_get(r13,r10);
			r14 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r4);
			if( r14 == NULL ) hl_null_access();
			r9 = hl_vfields(r14)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,-246583750/*colliders*/,&t$hl_types_ArrayObj);
			if( r9 == NULL ) hl_null_access();
			r12 = hl_types_ArrayObj_remove(r9,((vdynamic*)r1));
			goto label$e6f4f97_5_46;
		case 2:
			r13 = r0->registry;
			if( r13 == NULL ) hl_null_access();
			r4 = haxe_ds_StringMap_get(r13,r10);
			r14 = hl_to_virtual(&t$vrt_3d3bf19,(vdynamic*)r4);
			if( r14 == NULL ) hl_null_access();
			r9 = hl_vfields(r14)[3] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[3])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,332491895/*nonColliders*/,&t$hl_types_ArrayObj);
			if( r9 == NULL ) hl_null_access();
			r12 = hl_types_ArrayObj_remove(r9,((vdynamic*)r1));
	}
	label$e6f4f97_5_46:
	goto label$e6f4f97_5_5;
	label$e6f4f97_5_47:
	r5 = r0->lineCount;
	--r5;
	r0->lineCount = r5;
	if( r1 == NULL ) hl_null_access();
	r5 = r1->type;
	switch(r5) {
		default:
			goto label$e6f4f97_5_65;
		case 0:
			r5 = r0->floorCount;
			--r5;
			r0->floorCount = r5;
			goto label$e6f4f97_5_65;
		case 1:
			r5 = r0->accelCount;
			--r5;
			r0->accelCount = r5;
			goto label$e6f4f97_5_65;
		case 2:
			r5 = r0->sceneCount;
			--r5;
			r0->sceneCount = r5;
	}
	label$e6f4f97_5_65:
	r6 = r0->lines;
	if( r6 == NULL ) hl_null_access();
	r15 = r1->id;
	r5 = r15 ? r15->v.i : 0;
	r3 = NULL;
	r7 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r7) ) goto label$e6f4f97_5_73;
	hl_types_ArrayObj___expand(r6,r5);
	label$e6f4f97_5_73:
	r11 = r6->array;
	((components__lines__LineBase*)(r11 + 1))[r5] = r3;
	r17 = ($Main)g$_Main;
	r16 = r17->simulation;
	if( r16 == NULL ) hl_null_access();
	components_managers_Simulation_updateSim(r16);
	r17 = ($Main)g$_Main;
	r18 = r17->canvas;
	if( r18 == NULL ) hl_null_access();
	r5 = r1->type;
	components_stage_Canvas_redrawLines(r18,r5);
	return;
}

vvirtual* components_managers_Grid_registryPosition(double r0,double r1) {
	vvirtual *r7;
	double r3, r4, r6, r9, r10;
	int r2, r5, r8;
	r4 = 14.;
	r3 = r0 / r4;
	r2 = hl_math_floor(r3);
	r3 = (double)r2;
	r2 = (int)r3;
	r6 = 14.;
	r4 = r1 / r6;
	r5 = hl_math_floor(r4);
	r4 = (double)r5;
	r7 = hl_alloc_virtual(&t$vrt_689169c);
	if( hl_vfields(r7)[2] ) *(int*)(hl_vfields(r7)[2]) = (int)r2; else hl_dyn_seti(r7->value,120/*x*/,&t$_i32,r2);
	r5 = (int)r4;
	if( hl_vfields(r7)[3] ) *(int*)(hl_vfields(r7)[3]) = (int)r5; else hl_dyn_seti(r7->value,121/*y*/,&t$_i32,r5);
	r5 = 14;
	r10 = 14.;
	r9 = r0 / r10;
	r8 = hl_math_floor(r9);
	r5 = r5 * r8;
	r9 = (double)r5;
	r6 = r0 - r9;
	if( hl_vfields(r7)[0] ) *(double*)(hl_vfields(r7)[0]) = (double)r6; else hl_dyn_setd(r7->value,23089/*gx*/,r6);
	r5 = 14;
	r10 = 14.;
	r9 = r1 / r10;
	r8 = hl_math_floor(r9);
	r5 = r5 * r8;
	r9 = (double)r5;
	r6 = r1 - r9;
	if( hl_vfields(r7)[1] ) *(double*)(hl_vfields(r7)[1]) = (double)r6; else hl_dyn_setd(r7->value,23090/*gy*/,r6);
	return r7;
}

void components_managers_Grid_new(components__managers__Grid r0) {
	hl__types__ArrayObj r4;
	haxe__ds__StringMap r2;
	int r1;
	r1 = 0;
	r0->updateFrame = r1;
	r1 = 0;
	r0->sceneCount = r1;
	r1 = 0;
	r0->accelCount = r1;
	r1 = 0;
	r0->floorCount = r1;
	r1 = 0;
	r0->lineIDCount = r1;
	r1 = 0;
	r0->lineCount = r1;
	r2 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r2);
	r0->registry = r2;
	r4 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r4);
	r0->lines = r4;
	return;
}

