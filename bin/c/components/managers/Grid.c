// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <components/managers/Grid.h>
#include <components/lines/LineBase.h>
#include <h2d/col/Point.h>
void components_managers_Grid_addLine(components__managers__Grid,components__lines__LineBase);
vvirtual* components_managers_Grid_registryPosition(double,double);
extern hl_type t$_i32;
void components_managers_Grid_storeLine(components__managers__Grid,components__lines__LineBase,int,int);
#include <hl/natives.h>
void haxe_ds_IntMap_set(haxe__ds__IntMap,int,vdynamic*);
#include <hl/types/ArrayObj.h>
#include <components/stage/LRConsole.h>
#include <_std/Main.h>
#include <components/managers/Simulation.h>
extern String s$x;
String String___alloc__(vbyte*,int);
String String___add__(String,String);
extern String s$y;
bool hl_types_ArrayObj_contains(hl__types__ArrayObj,vdynamic*);
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
extern hl_type t$vrt_f730762;
extern hl_type t$vrt_a2a1457;
extern hl_type t$h2d_col_Point;
void h2d_col_Point_new(h2d__col__Point,double*,double*);
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
extern $Main g$_Main;
extern String s$Error_registering_line;
#include <h2d/Console.h>
void h2d_Console_log(h2d__Console,String,vdynamic*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern hl_type t$nul_i32;
void components_managers_Simulation_updateSimHistory(components__managers__Simulation,int);
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
extern hl_type t$vrt_689169c;
extern hl_type t$haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
extern hl_type t$haxe_ds_IntMap;
void haxe_ds_IntMap_new(haxe__ds__IntMap);

void components_managers_Grid_register(components__managers__Grid r0,components__lines__LineBase r1) {
	vvirtual *r4, *r8, *r9;
	bool r18;
	h2d__col__Point r6;
	double r5, r7, r15, r16, r17, r19, r20, r21, r22;
	int r2, r10, r11, r12, r13, r14;
	r2 = 0;
	r0->updateFrame = r2;
	components_managers_Grid_addLine(r0,r1);
	if( r1 == NULL ) hl_null_access();
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r4 = components_managers_Grid_registryPosition(r5,r7);
	r6 = r1->end;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r1->end;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r8 = components_managers_Grid_registryPosition(r5,r7);
	r5 = r1->dx;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_24;
	if( r8 == NULL ) hl_null_access();
	r2 = hl_vfields(r8)[2] ? (*(int*)(hl_vfields(r8)[2])) : (int)hl_dyn_geti(r8->value,120/*x*/,&t$_i32);
	goto label$e6f4f97_1_26;
	label$e6f4f97_1_24:
	if( r4 == NULL ) hl_null_access();
	r2 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	label$e6f4f97_1_26:
	r5 = r1->dx;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_32;
	if( r4 == NULL ) hl_null_access();
	r10 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	goto label$e6f4f97_1_34;
	label$e6f4f97_1_32:
	if( r8 == NULL ) hl_null_access();
	r10 = hl_vfields(r8)[2] ? (*(int*)(hl_vfields(r8)[2])) : (int)hl_dyn_geti(r8->value,120/*x*/,&t$_i32);
	label$e6f4f97_1_34:
	r5 = r1->dy;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_40;
	if( r8 == NULL ) hl_null_access();
	r11 = hl_vfields(r8)[3] ? (*(int*)(hl_vfields(r8)[3])) : (int)hl_dyn_geti(r8->value,121/*y*/,&t$_i32);
	goto label$e6f4f97_1_42;
	label$e6f4f97_1_40:
	if( r4 == NULL ) hl_null_access();
	r11 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	label$e6f4f97_1_42:
	r5 = r1->dy;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e6f4f97_1_48;
	if( r4 == NULL ) hl_null_access();
	r12 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	goto label$e6f4f97_1_50;
	label$e6f4f97_1_48:
	if( r8 == NULL ) hl_null_access();
	r12 = hl_vfields(r8)[3] ? (*(int*)(hl_vfields(r8)[3])) : (int)hl_dyn_geti(r8->value,121/*y*/,&t$_i32);
	label$e6f4f97_1_50:
	if( r4 == NULL ) hl_null_access();
	r13 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	r14 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	components_managers_Grid_storeLine(r0,r1,r13,r14);
	r5 = r1->dx;
	r7 = 0.;
	if( r5 != r7 ) goto label$e6f4f97_1_60;
	r5 = r1->dy;
	r7 = 0.;
	if( r5 == r7 ) goto label$e6f4f97_1_62;
	label$e6f4f97_1_60:
	if( r10 != r2 ) goto label$e6f4f97_1_63;
	if( r12 != r11 ) goto label$e6f4f97_1_63;
	label$e6f4f97_1_62:
	return;
	label$e6f4f97_1_63:
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r1->start;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r15 = 1.;
	r16 = r1->dx;
	r15 = r15 / r16;
	r16 = 1.;
	r17 = r1->dy;
	r16 = r16 / r17;
	label$e6f4f97_1_75:
	r18 = true;
	if( !r18 ) goto label$e6f4f97_1_190;
	if( r4 == NULL ) hl_null_access();
	r13 = hl_vfields(r4)[2] ? (*(int*)(hl_vfields(r4)[2])) : (int)hl_dyn_geti(r4->value,120/*x*/,&t$_i32);
	r14 = 0;
	if( r13 >= r14 ) goto label$e6f4f97_1_95;
	if( r1 == NULL ) hl_null_access();
	r19 = r1->dx;
	r20 = 0.;
	if( !(r20 < r19) ) goto label$e6f4f97_1_90;
	r19 = 14.;
	r20 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r19 = r19 + r20;
	goto label$e6f4f97_1_93;
	label$e6f4f97_1_90:
	r19 = -14.;
	r20 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r19 = r19 - r20;
	label$e6f4f97_1_93:
	r17 = r19;
	goto label$e6f4f97_1_108;
	label$e6f4f97_1_95:
	if( r1 == NULL ) hl_null_access();
	r19 = r1->dx;
	r20 = 0.;
	if( !(r20 < r19) ) goto label$e6f4f97_1_103;
	r19 = 14.;
	r20 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r19 = r19 - r20;
	goto label$e6f4f97_1_107;
	label$e6f4f97_1_103:
	r19 = hl_vfields(r4)[0] ? (*(double*)(hl_vfields(r4)[0])) : (double)hl_dyn_getd(r4->value,23089/*gx*/);
	r20 = 1.;
	r19 = r19 + r20;
	r19 = -r19;
	label$e6f4f97_1_107:
	r17 = r19;
	label$e6f4f97_1_108:
	r13 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,121/*y*/,&t$_i32);
	r14 = 0;
	if( r13 >= r14 ) goto label$e6f4f97_1_123;
	r20 = r1->dy;
	r21 = 0.;
	if( !(r21 < r20) ) goto label$e6f4f97_1_118;
	r20 = 14.;
	r21 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r20 = r20 + r21;
	goto label$e6f4f97_1_121;
	label$e6f4f97_1_118:
	r20 = -14.;
	r21 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r20 = r20 - r21;
	label$e6f4f97_1_121:
	r19 = r20;
	goto label$e6f4f97_1_135;
	label$e6f4f97_1_123:
	r20 = r1->dy;
	r21 = 0.;
	if( !(r21 < r20) ) goto label$e6f4f97_1_130;
	r20 = 14.;
	r21 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r20 = r20 - r21;
	goto label$e6f4f97_1_134;
	label$e6f4f97_1_130:
	r20 = hl_vfields(r4)[1] ? (*(double*)(hl_vfields(r4)[1])) : (double)hl_dyn_getd(r4->value,23090/*gy*/);
	r21 = 1.;
	r20 = r20 + r21;
	r20 = -r20;
	label$e6f4f97_1_134:
	r19 = r20;
	label$e6f4f97_1_135:
	r20 = r1->dx;
	r21 = 0.;
	if( r20 != r21 ) goto label$e6f4f97_1_141;
	r20 = r7 + r19;
	r7 = r20;
	goto label$e6f4f97_1_175;
	label$e6f4f97_1_141:
	r20 = r1->dy;
	r21 = 0.;
	if( r20 != r21 ) goto label$e6f4f97_1_147;
	r20 = r5 + r17;
	r5 = r20;
	goto label$e6f4f97_1_175;
	label$e6f4f97_1_147:
	r21 = r1->dy;
	r21 = r21 * r17;
	r21 = r21 * r15;
	r20 = r7 + r21;
	r21 = r20 - r7;
	r21 = hl_math_abs(r21);
	r22 = hl_math_abs(r19);
	if( !(r21 < r22) ) goto label$e6f4f97_1_159;
	r21 = r5 + r17;
	r5 = r21;
	r7 = r20;
	goto label$e6f4f97_1_175;
	label$e6f4f97_1_159:
	r21 = r20 - r7;
	r21 = hl_math_abs(r21);
	r22 = hl_math_abs(r19);
	if( r21 != r22 ) goto label$e6f4f97_1_168;
	r21 = r5 + r17;
	r5 = r21;
	r21 = r7 + r19;
	r7 = r21;
	goto label$e6f4f97_1_175;
	label$e6f4f97_1_168:
	r22 = r1->dx;
	r22 = r22 * r19;
	r22 = r22 * r16;
	r21 = r5 + r22;
	r5 = r21;
	r21 = r7 + r19;
	r7 = r21;
	label$e6f4f97_1_175:
	r9 = components_managers_Grid_registryPosition(r5,r7);
	if( r9 == NULL ) hl_null_access();
	r13 = hl_vfields(r9)[2] ? (*(int*)(hl_vfields(r9)[2])) : (int)hl_dyn_geti(r9->value,120/*x*/,&t$_i32);
	if( r13 < r10 ) goto label$e6f4f97_1_189;
	r13 = hl_vfields(r9)[2] ? (*(int*)(hl_vfields(r9)[2])) : (int)hl_dyn_geti(r9->value,120/*x*/,&t$_i32);
	if( r2 < r13 ) goto label$e6f4f97_1_189;
	r13 = hl_vfields(r9)[3] ? (*(int*)(hl_vfields(r9)[3])) : (int)hl_dyn_geti(r9->value,121/*y*/,&t$_i32);
	if( r13 < r12 ) goto label$e6f4f97_1_189;
	r13 = hl_vfields(r9)[3] ? (*(int*)(hl_vfields(r9)[3])) : (int)hl_dyn_geti(r9->value,121/*y*/,&t$_i32);
	if( r11 < r13 ) goto label$e6f4f97_1_189;
	r13 = hl_vfields(r9)[2] ? (*(int*)(hl_vfields(r9)[2])) : (int)hl_dyn_geti(r9->value,120/*x*/,&t$_i32);
	r14 = hl_vfields(r9)[3] ? (*(int*)(hl_vfields(r9)[3])) : (int)hl_dyn_geti(r9->value,121/*y*/,&t$_i32);
	components_managers_Grid_storeLine(r0,r1,r13,r14);
	goto label$e6f4f97_1_75;
	label$e6f4f97_1_189:
	return;
	label$e6f4f97_1_190:
	return;
}

void components_managers_Grid_addLine(components__managers__Grid r0,components__lines__LineBase r1) {
	haxe__ds__IntMap r5;
	vdynamic *r3;
	int r4;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->id;
	if( r3 ) goto label$e6f4f97_2_6;
	r4 = r0->lineIDCount;
	r3 = hl_alloc_dynamic(&t$_i32);
	r3->v.i = r4;
	r1->id = r3;
	label$e6f4f97_2_6:
	r5 = r0->lines;
	if( r5 == NULL ) hl_null_access();
	r3 = r1->id;
	r4 = r3 ? r3->v.i : 0;
	haxe_ds_IntMap_set(r5,r4,((vdynamic*)r1));
	r4 = r0->lineCount;
	++r4;
	r0->lineCount = r4;
	r4 = r0->lineIDCount;
	++r4;
	r0->lineIDCount = r4;
	r4 = r1->type;
	switch(r4) {
		default:
			goto label$e6f4f97_2_31;
		case 0:
			r4 = r0->floorCount;
			++r4;
			r0->floorCount = r4;
			goto label$e6f4f97_2_31;
		case 1:
			r4 = r0->accelCount;
			++r4;
			r0->accelCount = r4;
			goto label$e6f4f97_2_31;
		case 2:
			r4 = r0->sceneCount;
			++r4;
			r0->sceneCount = r4;
	}
	label$e6f4f97_2_31:
	return;
}

void components_managers_Grid_storeLine(components__managers__Grid r0,components__lines__LineBase r1,int r2,int r3) {
	String r4, r8;
	vvirtual *r14, *r15;
	haxe__ds__StringMap r13;
	hl__types__ArrayObj r11;
	bool r10;
	$Main r22;
	h2d__col__Point r16;
	components__managers__Simulation r24;
	double r17, r19;
	double *r18, *r20;
	vdynamic *r12, *r23;
	int *r6;
	components__stage__LRConsole r21;
	vbyte *r7;
	int r5;
	r4 = (String)s$x;
	r5 = r2;
	r6 = &r5;
	r7 = hl_itos(r5,r6);
	r8 = String___alloc__(r7,r5);
	r4 = String___add__(r4,r8);
	r8 = (String)s$y;
	r4 = String___add__(r4,r8);
	r5 = r3;
	r6 = &r5;
	r7 = hl_itos(r5,r6);
	r8 = String___alloc__(r7,r5);
	r4 = String___add__(r4,r8);
	if( r1 == NULL ) hl_null_access();
	r11 = r1->keyList;
	if( r11 == NULL ) hl_null_access();
	r10 = hl_types_ArrayObj_contains(r11,((vdynamic*)r4));
	if( !r10 ) goto label$e6f4f97_3_19;
	return;
	label$e6f4f97_3_19:
	r13 = r0->registry;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r4);
	r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r12);
	if( r14 ) goto label$e6f4f97_3_42;
	r15 = hl_alloc_virtual(&t$vrt_a2a1457);
	r16 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r17 = (double)r2;
	r18 = &r17;
	r19 = (double)r3;
	r20 = &r19;
	h2d_col_Point_new(r16,r18,r20);
	if( hl_vfields(r15)[2] ) *(h2d__col__Point*)(hl_vfields(r15)[2]) = (h2d__col__Point)r16; else hl_dyn_setp(r15->value,-352673756/*position*/,&t$h2d_col_Point,r16);
	r11 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r11);
	if( hl_vfields(r15)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r15)[0]) = (hl__types__ArrayObj)r11; else hl_dyn_setp(r15->value,-246583750/*colliders*/,&t$hl_types_ArrayObj,r11);
	r11 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r11);
	if( hl_vfields(r15)[1] ) *(hl__types__ArrayObj*)(hl_vfields(r15)[1]) = (hl__types__ArrayObj)r11; else hl_dyn_setp(r15->value,332491895/*nonColliders*/,&t$hl_types_ArrayObj,r11);
	r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r15);
	r13 = r0->registry;
	if( r13 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r13,r4,((vdynamic*)r14));
	label$e6f4f97_3_42:
	r5 = r1->type;
	switch(r5) {
		default:
			r22 = ($Main)g$_Main;
			r21 = r22->console;
			if( r21 == NULL ) hl_null_access();
			r8 = (String)s$Error_registering_line;
			r5 = 16711680;
			r23 = hl_alloc_dynamic(&t$_i32);
			r23->v.i = r5;
			h2d_Console_log(((h2d__Console)r21),r8,r23);
			goto label$e6f4f97_3_78;
		case 0:
			r13 = r0->registry;
			if( r13 == NULL ) hl_null_access();
			r12 = haxe_ds_StringMap_get(r13,r4);
			r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r12);
			if( r14 == NULL ) hl_null_access();
			r11 = hl_vfields(r14)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,-246583750/*colliders*/,&t$hl_types_ArrayObj);
			if( r11 == NULL ) hl_null_access();
			r5 = hl_types_ArrayObj_push(r11,((vdynamic*)r1));
			goto label$e6f4f97_3_78;
		case 1:
			r13 = r0->registry;
			if( r13 == NULL ) hl_null_access();
			r12 = haxe_ds_StringMap_get(r13,r4);
			r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r12);
			if( r14 == NULL ) hl_null_access();
			r11 = hl_vfields(r14)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,-246583750/*colliders*/,&t$hl_types_ArrayObj);
			if( r11 == NULL ) hl_null_access();
			r5 = hl_types_ArrayObj_push(r11,((vdynamic*)r1));
			goto label$e6f4f97_3_78;
		case 2:
			r13 = r0->registry;
			if( r13 == NULL ) hl_null_access();
			r12 = haxe_ds_StringMap_get(r13,r4);
			r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r12);
			if( r14 == NULL ) hl_null_access();
			r11 = hl_vfields(r14)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,332491895/*nonColliders*/,&t$hl_types_ArrayObj);
			if( r11 == NULL ) hl_null_access();
			r5 = hl_types_ArrayObj_push(r11,((vdynamic*)r1));
	}
	label$e6f4f97_3_78:
	r11 = r1->keyList;
	if( r11 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r11,((vdynamic*)r4));
	r13 = r0->registry;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r4);
	r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r12);
	if( r14 == NULL ) hl_null_access();
	r23 = hl_vfields(r14)[1] ? (*(vdynamic**)(hl_vfields(r14)[1])) : (vdynamic*)hl_dyn_getp(r14->value,390036483/*lowFrame*/,&t$nul_i32);
	if( !r23 ) goto label$e6f4f97_3_99;
	r22 = ($Main)g$_Main;
	r24 = r22->simulation;
	if( r24 == NULL ) hl_null_access();
	r13 = r0->registry;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r4);
	r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r12);
	if( r14 == NULL ) hl_null_access();
	r23 = hl_vfields(r14)[1] ? (*(vdynamic**)(hl_vfields(r14)[1])) : (vdynamic*)hl_dyn_getp(r14->value,390036483/*lowFrame*/,&t$nul_i32);
	r5 = r23 ? r23->v.i : 0;
	components_managers_Simulation_updateSimHistory(r24,r5);
	label$e6f4f97_3_99:
	return;
}

void components_managers_Grid_unregister(components__managers__Grid r0,components__lines__LineBase r1) {
	String r9;
	vvirtual *r14;
	haxe__ds__StringMap r13;
	hl__types__ArrayObj r4, r8;
	bool r12;
	haxe__ds__IntMap r18;
	$Main r17;
	components__lines__LineBase r5;
	components__managers__Simulation r16;
	vdynamic *r10, *r15;
	varray *r11;
	int r2, r6, r7;
	r2 = 0;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->keyList;
	label$e6f4f97_4_3:
	if( r4 == NULL ) hl_null_access();
	r7 = r4->length;
	if( r2 >= r7 ) goto label$e6f4f97_4_55;
	r7 = r4->length;
	if( ((unsigned)r2) < ((unsigned)r7) ) goto label$e6f4f97_4_11;
	r9 = NULL;
	goto label$e6f4f97_4_14;
	label$e6f4f97_4_11:
	r11 = r4->array;
	r10 = ((vdynamic**)(r11 + 1))[r2];
	r9 = (String)r10;
	label$e6f4f97_4_14:
	++r2;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->type;
	switch(r6) {
		default:
			goto label$e6f4f97_4_36;
		case 0:
		case 1:
			r13 = r0->registry;
			if( r13 == NULL ) hl_null_access();
			r10 = haxe_ds_StringMap_get(r13,r9);
			r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r10);
			if( r14 == NULL ) hl_null_access();
			r8 = hl_vfields(r14)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,-246583750/*colliders*/,&t$hl_types_ArrayObj);
			if( r8 == NULL ) hl_null_access();
			r12 = hl_types_ArrayObj_remove(r8,((vdynamic*)r1));
			goto label$e6f4f97_4_36;
		case 2:
			r13 = r0->registry;
			if( r13 == NULL ) hl_null_access();
			r10 = haxe_ds_StringMap_get(r13,r9);
			r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r10);
			if( r14 == NULL ) hl_null_access();
			r8 = hl_vfields(r14)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r14)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r14->value,332491895/*nonColliders*/,&t$hl_types_ArrayObj);
			if( r8 == NULL ) hl_null_access();
			r12 = hl_types_ArrayObj_remove(r8,((vdynamic*)r1));
	}
	label$e6f4f97_4_36:
	r13 = r0->registry;
	if( r13 == NULL ) hl_null_access();
	r10 = haxe_ds_StringMap_get(r13,r9);
	r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r10);
	if( r14 == NULL ) hl_null_access();
	r15 = hl_vfields(r14)[1] ? (*(vdynamic**)(hl_vfields(r14)[1])) : (vdynamic*)hl_dyn_getp(r14->value,390036483/*lowFrame*/,&t$nul_i32);
	if( !r15 ) goto label$e6f4f97_4_54;
	r17 = ($Main)g$_Main;
	r16 = r17->simulation;
	if( r16 == NULL ) hl_null_access();
	r13 = r0->registry;
	if( r13 == NULL ) hl_null_access();
	r10 = haxe_ds_StringMap_get(r13,r9);
	r14 = hl_to_virtual(&t$vrt_f730762,(vdynamic*)r10);
	if( r14 == NULL ) hl_null_access();
	r15 = hl_vfields(r14)[1] ? (*(vdynamic**)(hl_vfields(r14)[1])) : (vdynamic*)hl_dyn_getp(r14->value,390036483/*lowFrame*/,&t$nul_i32);
	r6 = r15 ? r15->v.i : 0;
	components_managers_Simulation_updateSimHistory(r16,r6);
	label$e6f4f97_4_54:
	goto label$e6f4f97_4_3;
	label$e6f4f97_4_55:
	if( r1 == NULL ) hl_null_access();
	r2 = r1->type;
	switch(r2) {
		default:
			goto label$e6f4f97_4_70;
		case 0:
			r2 = r0->floorCount;
			--r2;
			r0->floorCount = r2;
			goto label$e6f4f97_4_70;
		case 1:
			r2 = r0->accelCount;
			--r2;
			r0->accelCount = r2;
			goto label$e6f4f97_4_70;
		case 2:
			r2 = r0->sceneCount;
			--r2;
			r0->sceneCount = r2;
	}
	label$e6f4f97_4_70:
	r2 = r0->lineCount;
	--r2;
	r0->lineCount = r2;
	r5 = NULL;
	r18 = r0->lines;
	if( r18 == NULL ) hl_null_access();
	r15 = r1->id;
	r2 = r15 ? r15->v.i : 0;
	haxe_ds_IntMap_set(r18,r2,((vdynamic*)r5));
	return;
}

vvirtual* components_managers_Grid_registryPosition(double r0,double r1) {
	vvirtual *r7;
	double r3, r4, r6, r9, r10;
	int r2, r5, r8;
	r4 = 14.;
	r3 = r0 / r4;
	r2 = hl_math_floor(r3);
	r3 = (double)r2;
	r2 = (int)r3;
	r6 = 14.;
	r4 = r1 / r6;
	r5 = hl_math_floor(r4);
	r4 = (double)r5;
	r7 = hl_alloc_virtual(&t$vrt_689169c);
	if( hl_vfields(r7)[2] ) *(int*)(hl_vfields(r7)[2]) = (int)r2; else hl_dyn_seti(r7->value,120/*x*/,&t$_i32,r2);
	r5 = (int)r4;
	if( hl_vfields(r7)[3] ) *(int*)(hl_vfields(r7)[3]) = (int)r5; else hl_dyn_seti(r7->value,121/*y*/,&t$_i32,r5);
	r5 = 14;
	r10 = 14.;
	r9 = r0 / r10;
	r8 = hl_math_floor(r9);
	r5 = r5 * r8;
	r9 = (double)r5;
	r6 = r0 - r9;
	if( hl_vfields(r7)[0] ) *(double*)(hl_vfields(r7)[0]) = (double)r6; else hl_dyn_setd(r7->value,23089/*gx*/,r6);
	r5 = 14;
	r10 = 14.;
	r9 = r1 / r10;
	r8 = hl_math_floor(r9);
	r5 = r5 * r8;
	r9 = (double)r5;
	r6 = r1 - r9;
	if( hl_vfields(r7)[1] ) *(double*)(hl_vfields(r7)[1]) = (double)r6; else hl_dyn_setd(r7->value,23090/*gy*/,r6);
	return r7;
}

void components_managers_Grid_new(components__managers__Grid r0) {
	haxe__ds__StringMap r2;
	haxe__ds__IntMap r4;
	int r1;
	r1 = 0;
	r0->updateFrame = r1;
	r1 = 0;
	r0->sceneCount = r1;
	r1 = 0;
	r0->accelCount = r1;
	r1 = 0;
	r0->floorCount = r1;
	r1 = 0;
	r0->lineIDCount = r1;
	r1 = 0;
	r0->lineCount = r1;
	r2 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r2);
	r0->registry = r2;
	r4 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r4);
	r0->lines = r4;
	return;
}

