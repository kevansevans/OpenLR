// Generated by HLC 4.1.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <components/lines/Floor.h>
void components_lines_LineBase_new(components__lines__LineBase,h2d__col__Point,h2d__col__Point,bool,vdynamic*);
void h2d_Graphics_clear(h2d__Graphics);
#include <hl/natives.h>
void h2d_Graphics_lineStyle(h2d__Graphics,double*,int*,double*);
void h2d_Graphics_flush(h2d__Graphics);
void h2d_Graphics_addVertex(h2d__Graphics,double,double,double,double,double,double,double*,double*);
void h2d_Graphics_drawCircle(h2d__Graphics,double,double,double,int*);
#include <components/physics/RidePoint.h>

void components_lines_Floor_new(components__lines__Floor r0,h2d__col__Point r1,h2d__col__Point r2,bool r3) {
	vdynamic *r5;
	int r6;
	r5 = NULL;
	components_lines_LineBase_new(((components__lines__LineBase)r0),r1,r2,r3,r5);
	r6 = 0;
	r0->type = r6;
	return;
}

void components_lines_Floor_render(components__lines__Floor r0) {
	h2d__Graphics r2, r3;
	bool r4;
	h2d__col__Point r6;
	double r5, r7, r9, r12, r14, r15, r16, r17, r18, r19, r20, r21, r22, r23, r24, r25, r26, r27, r29, r30, r31, r32, r33;
	int *r11;
	double *r10, *r13;
	int r8, r28, r34, r35;
	r2 = r0->rideLayer;
	if( r2 == NULL ) hl_null_access();
	h2d_Graphics_clear(r2);
	r2 = r0->colorLayer;
	if( r2 == NULL ) hl_null_access();
	h2d_Graphics_clear(r2);
	r2 = r0->rideLayer;
	r3 = r0->colorLayer;
	if( r3 == NULL ) hl_null_access();
	r4 = true;
	r3->posChanged = r4;
	if( r2 == NULL ) hl_null_access();
	r4 = true;
	r2->posChanged = r4;
	r6 = r0->start;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r3->x = r5;
	r2->x = r5;
	r2 = r0->rideLayer;
	r3 = r0->colorLayer;
	if( r3 == NULL ) hl_null_access();
	r4 = true;
	r3->posChanged = r4;
	if( r2 == NULL ) hl_null_access();
	r4 = true;
	r2->posChanged = r4;
	r6 = r0->start;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->y;
	r3->y = r5;
	r2->y = r5;
	r5 = r0->nx;
	r7 = 0.;
	if( !(r7 < r5) ) goto label$e262668_2_39;
	r5 = r0->nx;
	r8 = hl_math_ceil(r5);
	r5 = (double)r8;
	goto label$e262668_2_42;
	label$e262668_2_39:
	r5 = r0->nx;
	r8 = hl_math_floor(r5);
	r5 = (double)r8;
	label$e262668_2_42:
	r7 = r0->ny;
	r9 = 0.;
	if( !(r9 < r7) ) goto label$e262668_2_49;
	r7 = r0->ny;
	r8 = hl_math_ceil(r7);
	r7 = (double)r8;
	goto label$e262668_2_52;
	label$e262668_2_49:
	r7 = r0->ny;
	r8 = hl_math_floor(r7);
	r7 = (double)r8;
	label$e262668_2_52:
	r2 = r0->colorLayer;
	if( r2 == NULL ) hl_null_access();
	r8 = 2;
	r9 = (double)r8;
	r10 = &r9;
	r8 = 26367;
	r11 = &r8;
	r12 = 0.75;
	r13 = &r12;
	h2d_Graphics_lineStyle(r2,r10,r11,r13);
	r2 = r0->colorLayer;
	if( r2 == NULL ) hl_null_access();
	h2d_Graphics_flush(r2);
	r16 = r2->curR;
	r17 = r2->curG;
	r18 = r2->curB;
	r19 = r2->curA;
	r21 = r2->ma;
	r20 = r5 * r21;
	r22 = r2->mc;
	r21 = r7 * r22;
	r20 = r20 + r21;
	r21 = r2->mx;
	r20 = r20 + r21;
	r10 = &r20;
	r22 = r2->mb;
	r21 = r5 * r22;
	r23 = r2->md;
	r22 = r7 * r23;
	r21 = r21 + r22;
	r22 = r2->my;
	r21 = r21 + r22;
	r13 = &r21;
	h2d_Graphics_addVertex(r2,r5,r7,r16,r17,r18,r19,r10,r13);
	r2 = r0->colorLayer;
	r6 = r0->gfxEnd;
	if( r6 == NULL ) hl_null_access();
	r14 = r6->x;
	r14 = r14 + r5;
	r6 = r0->gfxEnd;
	if( r6 == NULL ) hl_null_access();
	r15 = r6->y;
	r15 = r15 + r7;
	if( r2 == NULL ) hl_null_access();
	r18 = r2->curR;
	r19 = r2->curG;
	r22 = r2->curB;
	r23 = r2->curA;
	r25 = r2->ma;
	r24 = r14 * r25;
	r26 = r2->mc;
	r25 = r15 * r26;
	r24 = r24 + r25;
	r25 = r2->mx;
	r24 = r24 + r25;
	r10 = &r24;
	r26 = r2->mb;
	r25 = r14 * r26;
	r27 = r2->md;
	r26 = r15 * r27;
	r25 = r25 + r26;
	r26 = r2->my;
	r25 = r25 + r26;
	r13 = &r25;
	h2d_Graphics_addVertex(r2,r14,r15,r18,r19,r22,r23,r10,r13);
	r2 = r0->rideLayer;
	if( r2 == NULL ) hl_null_access();
	r28 = 2;
	r14 = (double)r28;
	r10 = &r14;
	r28 = 0;
	r11 = &r28;
	r13 = NULL;
	h2d_Graphics_lineStyle(r2,r10,r11,r13);
	r2 = r0->rideLayer;
	if( r2 == NULL ) hl_null_access();
	h2d_Graphics_flush(r2);
	r15 = 0.;
	r16 = 0.;
	r17 = r2->curR;
	r18 = r2->curG;
	r19 = r2->curB;
	r22 = r2->curA;
	r23 = 0.;
	r26 = r2->ma;
	r23 = r23 * r26;
	r26 = 0.;
	r27 = r2->mc;
	r26 = r26 * r27;
	r23 = r23 + r26;
	r26 = r2->mx;
	r23 = r23 + r26;
	r10 = &r23;
	r26 = 0.;
	r27 = r2->mb;
	r26 = r26 * r27;
	r27 = 0.;
	r29 = r2->md;
	r27 = r27 * r29;
	r26 = r26 + r27;
	r27 = r2->my;
	r26 = r26 + r27;
	r13 = &r26;
	h2d_Graphics_addVertex(r2,r15,r16,r17,r18,r19,r22,r10,r13);
	r2 = r0->rideLayer;
	r6 = r0->gfxEnd;
	if( r6 == NULL ) hl_null_access();
	r15 = r6->x;
	r6 = r0->gfxEnd;
	if( r6 == NULL ) hl_null_access();
	r16 = r6->y;
	if( r2 == NULL ) hl_null_access();
	r19 = r2->curR;
	r22 = r2->curG;
	r27 = r2->curB;
	r29 = r2->curA;
	r31 = r2->ma;
	r30 = r15 * r31;
	r32 = r2->mc;
	r31 = r16 * r32;
	r30 = r30 + r31;
	r31 = r2->mx;
	r30 = r30 + r31;
	r10 = &r30;
	r32 = r2->mb;
	r31 = r15 * r32;
	r33 = r2->md;
	r32 = r16 * r33;
	r31 = r31 + r32;
	r32 = r2->my;
	r31 = r31 + r32;
	r13 = &r31;
	h2d_Graphics_addVertex(r2,r15,r16,r19,r22,r27,r29,r10,r13);
	r2 = r0->rideLayer;
	if( r2 == NULL ) hl_null_access();
	r15 = 0.;
	r16 = 0.;
	r17 = r0->lineCapRadius;
	r34 = r0->lineCapSegment;
	r11 = &r34;
	h2d_Graphics_drawCircle(r2,r15,r16,r17,r11);
	r2 = r0->rideLayer;
	if( r2 == NULL ) hl_null_access();
	r6 = r0->gfxEnd;
	if( r6 == NULL ) hl_null_access();
	r15 = r6->x;
	r6 = r0->gfxEnd;
	if( r6 == NULL ) hl_null_access();
	r16 = r6->y;
	r17 = r0->lineCapRadius;
	r35 = r0->lineCapSegment;
	r11 = &r35;
	h2d_Graphics_drawCircle(r2,r15,r16,r17,r11);
	return;
}

void components_lines_Floor_collide(components__lines__Floor r0,components__physics__RidePoint r1) {
	h2d__col__Point r3, r12;
	double r2, r4, r6, r7, r8, r9, r10, r13;
	int r11;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->x;
	r3 = r0->start;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->x;
	r2 = r2 - r4;
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->y;
	r3 = r0->start;
	if( r3 == NULL ) hl_null_access();
	r6 = r3->y;
	r4 = r4 - r6;
	r6 = r0->nx;
	r6 = r6 * r2;
	r7 = r0->ny;
	r7 = r7 * r4;
	r6 = r6 + r7;
	r8 = r0->dx;
	r7 = r2 * r8;
	r9 = r0->dy;
	r8 = r4 * r9;
	r7 = r7 + r8;
	r8 = r0->invSqrDistance;
	r7 = r7 * r8;
	r3 = r1->dir;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->x;
	r9 = r0->nx;
	r8 = r8 * r9;
	r3 = r1->dir;
	if( r3 == NULL ) hl_null_access();
	r9 = r3->y;
	r10 = r0->ny;
	r9 = r9 * r10;
	r8 = r8 + r9;
	r9 = 0.;
	if( !(r9 < r8) ) goto label$e262668_3_105;
	r9 = 0.;
	if( !(r9 < r6) ) goto label$e262668_3_105;
	r11 = r0->zone;
	r9 = (double)r11;
	if( !(r6 < r9) ) goto label$e262668_3_105;
	r9 = r0->limStart;
	if( !(r7 >= r9) ) goto label$e262668_3_105;
	r9 = r0->limEnd;
	if( !(r9 >= r7) ) goto label$e262668_3_105;
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->x;
	r10 = r0->nx;
	r9 = r6 * r10;
	r8 = r8 - r9;
	r3->x = r8;
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->y;
	r10 = r0->ny;
	r9 = r6 * r10;
	r8 = r8 - r9;
	r3->y = r8;
	r3 = r1->vel;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->x;
	r9 = r0->ny;
	r10 = r1->friction;
	r9 = r9 * r10;
	r9 = r9 * r6;
	r12 = r1->vel;
	if( r12 == NULL ) hl_null_access();
	r10 = r12->x;
	r12 = r1->pos;
	if( r12 == NULL ) hl_null_access();
	r13 = r12->x;
	if( !(r10 < r13) ) goto label$e262668_3_79;
	r11 = 1;
	goto label$e262668_3_80;
	label$e262668_3_79:
	r11 = -1;
	label$e262668_3_80:
	r10 = (double)r11;
	r9 = r9 * r10;
	r8 = r8 + r9;
	r3->x = r8;
	r3 = r1->vel;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->y;
	r9 = r0->nx;
	r10 = r1->friction;
	r9 = r9 * r10;
	r9 = r9 * r6;
	r12 = r1->vel;
	if( r12 == NULL ) hl_null_access();
	r10 = r12->y;
	r12 = r1->pos;
	if( r12 == NULL ) hl_null_access();
	r13 = r12->y;
	if( !(r10 < r13) ) goto label$e262668_3_100;
	r11 = -1;
	goto label$e262668_3_101;
	label$e262668_3_100:
	r11 = 1;
	label$e262668_3_101:
	r10 = (double)r11;
	r9 = r9 * r10;
	r8 = r8 - r9;
	r3->y = r8;
	label$e262668_3_105:
	return;
}

