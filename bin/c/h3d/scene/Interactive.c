// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <h3d/scene/Interactive.h>
h3d__scene__Scene h3d_scene_Object_getScene(h3d__scene__Object);
void h3d_scene_Scene_addEventTarget(h3d__scene__Scene,h3d__scene__Interactive);
void h3d_scene_Object_onAdd(h3d__scene__Object);
void h3d_scene_Scene_removeEventTarget(h3d__scene__Scene,h3d__scene__Interactive);
void h3d_scene_Object_onRemove(h3d__scene__Object);
extern hl_type t$vrt_238393a;
#include <hxd/EventKind.h>
extern hl_type t$vrt_c8e313e;
void hxd_SceneEvents_updateCursor(hxd__SceneEvents,vvirtual*);
extern hl_type t$fun_620dba2;
extern hl_type t$h3d_Vector;
void h3d_Vector_new(h3d__Vector,double*,double*,double*,double*);
void h3d_scene_Object_new(h3d__scene__Object,h3d__scene__Object);
extern venum* g$hxd_Cursor_Button;

void h3d_scene_Interactive_onAdd(h3d__scene__Interactive r0) {
	h3d__scene__Scene r1;
	r1 = h3d_scene_Object_getScene(((h3d__scene__Object)r0));
	r0->scene = r1;
	r1 = r0->scene;
	if( !r1 ) goto label$a10b22e_1_7;
	r1 = r0->scene;
	if( r1 == NULL ) hl_null_access();
	h3d_scene_Scene_addEventTarget(r1,r0);
	label$a10b22e_1_7:
	h3d_scene_Object_onAdd(((h3d__scene__Object)r0));
	return;
}

void h3d_scene_Interactive_onRemove(h3d__scene__Interactive r0) {
	h3d__scene__Scene r2;
	r2 = r0->scene;
	if( !r2 ) goto label$a10b22e_2_7;
	r2 = r0->scene;
	if( r2 == NULL ) hl_null_access();
	h3d_scene_Scene_removeEventTarget(r2,r0);
	r2 = NULL;
	r0->scene = r2;
	label$a10b22e_2_7:
	h3d_scene_Object_onRemove(((h3d__scene__Object)r0));
	return;
}

vvirtual* h3d_scene_Interactive_getInteractiveScene(h3d__scene__Interactive r0) {
	vvirtual *r2;
	h3d__scene__Scene r1;
	r1 = r0->scene;
	if( r1 ) goto label$a10b22e_3_4;
	r2 = NULL;
	goto label$a10b22e_3_8;
	label$a10b22e_3_4:
	r2 = r1->f$28;
	if( r2 ) goto label$a10b22e_3_8;
	r2 = hl_to_virtual(&t$vrt_238393a,(vdynamic*)r1);
	r1->f$28 = r2;
	label$a10b22e_3_8:
	return r2;
}

void h3d_scene_Interactive_handleEvent(h3d__scene__Interactive r0,hxd__Event r1) {
	venum *r5;
	bool r3;
	vclosure *r7;
	int r4, r6;
	r3 = r0->propagateEvents;
	if( !r3 ) goto label$a10b22e_4_5;
	if( r1 == NULL ) hl_null_access();
	r3 = true;
	r1->propagate = r3;
	label$a10b22e_4_5:
	r3 = r0->cancelEvents;
	if( !r3 ) goto label$a10b22e_4_10;
	if( r1 == NULL ) hl_null_access();
	r3 = true;
	r1->cancel = r3;
	label$a10b22e_4_10:
	if( r1 == NULL ) hl_null_access();
	r5 = r1->kind;
	if( r5 == NULL ) hl_null_access();
	r4 = HL__ENUM_INDEX__(r5);
	switch(r4) {
		default:
			goto label$a10b22e_4_104;
		case 0:
			r3 = r0->enableRightButton;
			if( r3 ) goto label$a10b22e_4_21;
			r4 = r1->button;
			r6 = 0;
			if( r4 != r6 ) goto label$a10b22e_4_30;
			label$a10b22e_4_21:
			r4 = r1->button;
			r0->mouseDownButton = r4;
			r7 = r0->onPush;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			r3 = r1->cancel;
			if( !r3 ) goto label$a10b22e_4_30;
			r4 = -1;
			r0->mouseDownButton = r4;
			label$a10b22e_4_30:
			goto label$a10b22e_4_104;
		case 1:
			r3 = r0->enableRightButton;
			if( r3 ) goto label$a10b22e_4_36;
			r4 = r1->button;
			r6 = 0;
			if( r4 != r6 ) goto label$a10b22e_4_45;
			label$a10b22e_4_36:
			r7 = r0->onRelease;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			r4 = r0->mouseDownButton;
			r6 = r1->button;
			if( r4 != r6 ) goto label$a10b22e_4_45;
			r7 = r0->onClick;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			label$a10b22e_4_45:
			r4 = -1;
			r0->mouseDownButton = r4;
			goto label$a10b22e_4_104;
		case 2:
			r7 = r0->onMove;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 3:
			r7 = r0->onOver;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 4:
			r7 = r0->onOut;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 5:
			r7 = r0->onWheel;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 6:
			r7 = r0->onFocus;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 7:
			r7 = r0->onFocusLost;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 8:
			r7 = r0->onKeyDown;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 9:
			r7 = r0->onKeyUp;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 10:
			r3 = r0->enableRightButton;
			if( r3 ) goto label$a10b22e_4_85;
			r4 = r1->button;
			r6 = 0;
			if( r4 != r6 ) goto label$a10b22e_4_94;
			label$a10b22e_4_85:
			r7 = r0->onRelease;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			r4 = r0->mouseDownButton;
			r6 = r1->button;
			if( r4 != r6 ) goto label$a10b22e_4_94;
			r7 = r0->onReleaseOutside;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			label$a10b22e_4_94:
			r4 = -1;
			r0->mouseDownButton = r4;
			goto label$a10b22e_4_104;
		case 11:
			r7 = r0->onTextInput;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
			goto label$a10b22e_4_104;
		case 12:
			r7 = r0->onCheck;
			if( r7 == NULL ) hl_null_access();
			r7->hasValue ? ((void (*)(vdynamic*,hxd__Event))r7->fun)((vdynamic*)r7->value,r1) : ((void (*)(hxd__Event))r7->fun)(r1);
	}
	label$a10b22e_4_104:
	return;
}

venum* h3d_scene_Interactive_set_cursor(h3d__scene__Interactive r0,venum* r1) {
	vvirtual *r5;
	h3d__scene__Scene r3;
	hxd__SceneEvents r4;
	r0->cursor = r1;
	r3 = r0->scene;
	if( !r3 ) goto label$a10b22e_5_16;
	r3 = r0->scene;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->events;
	if( !r4 ) goto label$a10b22e_5_16;
	r3 = r0->scene;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->events;
	if( r4 == NULL ) hl_null_access();
	r5 = r0->f$44;
	if( r5 ) goto label$a10b22e_5_15;
	r5 = hl_to_virtual(&t$vrt_c8e313e,(vdynamic*)r0);
	r0->f$44 = r5;
	label$a10b22e_5_15:
	hxd_SceneEvents_updateCursor(r4,r5);
	label$a10b22e_5_16:
	return r1;
}

void h3d_scene_Interactive_onOver(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onOut(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onPush(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onRelease(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onReleaseOutside(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onClick(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onMove(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onWheel(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onFocus(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onFocusLost(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onKeyUp(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onKeyDown(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onCheck(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_onTextInput(h3d__scene__Interactive r0,hxd__Event r1) {
	return;
}

void h3d_scene_Interactive_new(h3d__scene__Interactive r0,vvirtual* r1,h3d__scene__Object r2) {
	venum *r12;
	bool r11;
	h3d__Vector r4;
	vclosure *r3;
	double *r5, *r6, *r7, *r8;
	int r10;
	r3 = r0->onOver;
	if( r3 ) goto label$a10b22e_20_4;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onOver,r0);
	r0->onOver = r3;
	label$a10b22e_20_4:
	r3 = r0->onOut;
	if( r3 ) goto label$a10b22e_20_8;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onOut,r0);
	r0->onOut = r3;
	label$a10b22e_20_8:
	r3 = r0->onPush;
	if( r3 ) goto label$a10b22e_20_12;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onPush,r0);
	r0->onPush = r3;
	label$a10b22e_20_12:
	r3 = r0->onRelease;
	if( r3 ) goto label$a10b22e_20_16;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onRelease,r0);
	r0->onRelease = r3;
	label$a10b22e_20_16:
	r3 = r0->onReleaseOutside;
	if( r3 ) goto label$a10b22e_20_20;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onReleaseOutside,r0);
	r0->onReleaseOutside = r3;
	label$a10b22e_20_20:
	r3 = r0->onClick;
	if( r3 ) goto label$a10b22e_20_24;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onClick,r0);
	r0->onClick = r3;
	label$a10b22e_20_24:
	r3 = r0->onMove;
	if( r3 ) goto label$a10b22e_20_28;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onMove,r0);
	r0->onMove = r3;
	label$a10b22e_20_28:
	r3 = r0->onWheel;
	if( r3 ) goto label$a10b22e_20_32;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onWheel,r0);
	r0->onWheel = r3;
	label$a10b22e_20_32:
	r3 = r0->onFocus;
	if( r3 ) goto label$a10b22e_20_36;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onFocus,r0);
	r0->onFocus = r3;
	label$a10b22e_20_36:
	r3 = r0->onFocusLost;
	if( r3 ) goto label$a10b22e_20_40;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onFocusLost,r0);
	r0->onFocusLost = r3;
	label$a10b22e_20_40:
	r3 = r0->onKeyUp;
	if( r3 ) goto label$a10b22e_20_44;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onKeyUp,r0);
	r0->onKeyUp = r3;
	label$a10b22e_20_44:
	r3 = r0->onKeyDown;
	if( r3 ) goto label$a10b22e_20_48;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onKeyDown,r0);
	r0->onKeyDown = r3;
	label$a10b22e_20_48:
	r3 = r0->onCheck;
	if( r3 ) goto label$a10b22e_20_52;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onCheck,r0);
	r0->onCheck = r3;
	label$a10b22e_20_52:
	r3 = r0->onTextInput;
	if( r3 ) goto label$a10b22e_20_56;
	r3 = hl_alloc_closure_ptr(&t$fun_620dba2,h3d_scene_Interactive_onTextInput,r0);
	r0->onTextInput = r3;
	label$a10b22e_20_56:
	r4 = (h3d__Vector)hl_alloc_obj(&t$h3d_Vector);
	r5 = NULL;
	r6 = NULL;
	r7 = NULL;
	r8 = NULL;
	h3d_Vector_new(r4,r5,r6,r7,r8);
	r0->hitPoint = r4;
	r10 = -1;
	r0->mouseDownButton = r10;
	r11 = false;
	r0->propagateEvents = r11;
	r11 = false;
	r0->cancelEvents = r11;
	h3d_scene_Object_new(((h3d__scene__Object)r0),r2);
	r0->shape = r1;
	r12 = (venum*)g$hxd_Cursor_Button;
	r12 = h3d_scene_Interactive_set_cursor(r0,r12);
	return;
}

