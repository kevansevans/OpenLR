// Generated by HLC 4.1.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <haxe/NativeStackTrace.h>
#include <haxe/Exception.h>
extern hl_type t$haxe_Exception;
extern String s$;
extern String s$stack;
void haxe_Exception_new(haxe__Exception,String,haxe__Exception,vdynamic*);
#include <hl/natives.h>
extern hl_type t$String;
extern String s$NativeStackTrace_callStack;
int String_indexOf(String,String,vdynamic*);
extern hl_type t$_bytes;
#include <_std/EReg.h>
#include <haxe/StackItem.h>
extern hl_type t$haxe_StackItem;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$EReg;
extern String s$e696748;
void EReg_new(EReg,String,String);
extern String s$_fun_0_9_0_9_;
bool EReg_match(EReg,String);
String EReg_matched(EReg,int);
vdynamic* Std_parseInt(String);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);

void haxe_NativeStackTrace_saveStack(vdynamic* r0) {
	return;
}

varray* haxe_NativeStackTrace_callStack() {
	String r3, r5, r14;
	hl_type *r17;
	haxe__Exception r2, r4;
	vdynamic *r1, *r15;
	vbyte *r13;
	int r8, r9, r10, r11, r12, r16;
	varray *r6, *r7;
	hl_trap_ctx trap$0;
	hl_trap(trap$0,r1,label$c0b5e0e_2_8);
	r2 = (haxe__Exception)hl_alloc_obj(&t$haxe_Exception);
	r3 = (String)s$;
	r4 = NULL;
	r5 = (String)s$stack;
	haxe_Exception_new(r2,r3,r4,((vdynamic*)r5));
	hl_throw((vdynamic*)r2);
	hl_endtrap(trap$0);
	label$c0b5e0e_2_8:
	r7 = hl_exception_stack();
	r6 = r7;
	r8 = 1;
	r9 = 0;
	r10 = r7->size;
	r11 = 1;
	r10 = r10 - r11;
	label$c0b5e0e_2_15:
	if( r9 >= r10 ) goto label$c0b5e0e_2_33;
	r11 = r9;
	++r9;
	r13 = ((vbyte**)(r6 + 1))[r11];
	r3 = (String)hl_alloc_obj(&t$String);
	r3->bytes = r13;
	r12 = 0;
	r12 = hl_ucs2length(r13,r12);
	r3->length = r12;
	r14 = (String)s$NativeStackTrace_callStack;
	r15 = NULL;
	r12 = String_indexOf(r3,r14,r15);
	r16 = 0;
	if( r12 >= r16 ) goto label$c0b5e0e_2_31;
	goto label$c0b5e0e_2_33;
	label$c0b5e0e_2_31:
	++r8;
	goto label$c0b5e0e_2_15;
	label$c0b5e0e_2_33:
	r10 = r6->size;
	if( r8 >= r10 ) goto label$c0b5e0e_2_42;
	r9 = r6->size;
	r9 = r9 - r8;
	r17 = &t$_bytes;
	r7 = hl_alloc_array(r17,r9);
	r10 = 0;
	hl_array_blit(r7,r10,r6,r8,r9);
	return r7;
	label$c0b5e0e_2_42:
	return r6;
}

hl__types__ArrayObj haxe_NativeStackTrace_toHaxe(varray* r0,int* r1) {
	String r9, r10, r17, r19;
	hl__types__ArrayObj r3;
	venum *r18;
	hl_type *r5;
	bool r16;
	EReg r8, r11;
	vdynamic *r20;
	vbyte *r15;
	varray *r4;
	int r2, r6, r12, r13, r14;
	if( r1 ) goto label$c0b5e0e_3_3;
	r2 = 0;
	goto label$c0b5e0e_3_4;
	label$c0b5e0e_3_3:
	r2 = *r1;
	label$c0b5e0e_3_4:
	r5 = &t$haxe_StackItem;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r8 = (EReg)hl_alloc_obj(&t$EReg);
	r9 = (String)s$e696748;
	r10 = (String)s$;
	EReg_new(r8,r9,r10);
	r11 = (EReg)hl_alloc_obj(&t$EReg);
	r9 = (String)s$_fun_0_9_0_9_;
	r10 = (String)s$;
	EReg_new(r11,r9,r10);
	r6 = 0;
	r12 = r0->size;
	r13 = 1;
	r12 = r12 - r13;
	label$c0b5e0e_3_20:
	if( r6 >= r12 ) goto label$c0b5e0e_3_73;
	r13 = r6;
	++r6;
	if( r13 >= r2 ) goto label$c0b5e0e_3_26;
	goto label$c0b5e0e_3_20;
	label$c0b5e0e_3_26:
	r15 = ((vbyte**)(r0 + 1))[r13];
	r9 = (String)hl_alloc_obj(&t$String);
	r9->bytes = r15;
	r14 = 0;
	r14 = hl_ucs2length(r15,r14);
	r9->length = r14;
	if( r8 == NULL ) hl_null_access();
	r16 = EReg_match(r8,r9);
	if( !r16 ) goto label$c0b5e0e_3_51;
	if( r3 == NULL ) hl_null_access();
	r14 = 1;
	r17 = EReg_matched(r8,r14);
	r14 = 2;
	r19 = EReg_matched(r8,r14);
	r18 = hl_alloc_enum(&t$haxe_StackItem,3);
	((haxe_StackItem_Method*)r18)->p0 = r17;
	((haxe_StackItem_Method*)r18)->p1 = r19;
	r14 = 4;
	r17 = EReg_matched(r8,r14);
	r14 = 5;
	r19 = EReg_matched(r8,r14);
	r20 = Std_parseInt(r19);
	r14 = r20 ? r20->v.i : 0;
	r20 = NULL;
	{ venum *tmp;
	tmp = hl_alloc_enum(&t$haxe_StackItem,2);
	((haxe_StackItem_FilePos*)tmp)->p0 = r18;
	((haxe_StackItem_FilePos*)tmp)->p1 = r17;
	((haxe_StackItem_FilePos*)tmp)->p2 = r14;
	((haxe_StackItem_FilePos*)tmp)->p3 = r20;
	r18 = tmp; };
	r14 = hl_types_ArrayObj_push(r3,((vdynamic*)r18));
	goto label$c0b5e0e_3_72;
	label$c0b5e0e_3_51:
	if( r11 == NULL ) hl_null_access();
	r16 = EReg_match(r11,r9);
	if( !r16 ) goto label$c0b5e0e_3_69;
	if( r3 == NULL ) hl_null_access();
	r14 = 1;
	r17 = EReg_matched(r11,r14);
	r20 = Std_parseInt(r17);
	r18 = hl_alloc_enum(&t$haxe_StackItem,4);
	((haxe_StackItem_LocalFunction*)r18)->p0 = r20;
	r14 = 2;
	r17 = EReg_matched(r11,r14);
	r14 = 3;
	r19 = EReg_matched(r11,r14);
	r20 = Std_parseInt(r19);
	r14 = r20 ? r20->v.i : 0;
	r20 = NULL;
	{ venum *tmp;
	tmp = hl_alloc_enum(&t$haxe_StackItem,2);
	((haxe_StackItem_FilePos*)tmp)->p0 = r18;
	((haxe_StackItem_FilePos*)tmp)->p1 = r17;
	((haxe_StackItem_FilePos*)tmp)->p2 = r14;
	((haxe_StackItem_FilePos*)tmp)->p3 = r20;
	r18 = tmp; };
	r14 = hl_types_ArrayObj_push(r3,((vdynamic*)r18));
	goto label$c0b5e0e_3_72;
	label$c0b5e0e_3_69:
	if( r3 == NULL ) hl_null_access();
	r18 = hl_alloc_enum(&t$haxe_StackItem,1);
	((haxe_StackItem_Module*)r18)->p0 = r9;
	r14 = hl_types_ArrayObj_push(r3,((vdynamic*)r18));
	label$c0b5e0e_3_72:
	goto label$c0b5e0e_3_20;
	label$c0b5e0e_3_73:
	return r3;
}

