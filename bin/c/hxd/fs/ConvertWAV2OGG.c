// Generated by HLC 4.1.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <hxd/fs/ConvertWAV2OGG.h>
extern String s$wav;
extern hl_type t$vrt_f85eed7;
extern String s$ogg;
void hxd_fs_Convert_new(hxd__fs__Convert,vvirtual*,String);
#include <sys/io/FileInput.h>
#include <format/wav/WAVEFormat.h>
#include <format/wav/Reader.h>
extern String s$oggenc;
extern hl_type t$String;
#include <hl/natives.h>
extern String s$_resample;
extern String s$44100;
extern String s$_Q;
extern String s$_o;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
String Sys_systemName(void);
extern String s$Windows;
int String___compare(String,vdynamic*);
extern String s$oggenc2;
extern String s$mono;
bool hxd_fs_Convert_hasParam(hxd__fs__Convert,String);
sys__io__FileInput sys_io_File_read(String,bool*);
extern hl_type t$format_wav_Reader;
#include <haxe/io/Input.h>
void format_wav_Reader_new(format__wav__Reader,haxe__io__Input);
vvirtual* format_wav_Reader_read(format__wav__Reader);
void sys_io_FileInput_close(sys__io__FileInput);
extern hl_type t$vrt_c2cbdf6;
extern hl_type t$_i32;
extern String s$_downmix;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
void hxd_fs_Convert_command(hxd__fs__Convert,String,hl__types__ArrayObj);

void hxd_fs_ConvertWAV2OGG_new(hxd__fs__ConvertWAV2OGG r0) {
	String r2;
	vvirtual *r3;
	r2 = (String)s$wav;
	r3 = hl_to_virtual(&t$vrt_f85eed7,(vdynamic*)r2);
	r2 = (String)s$ogg;
	hxd_fs_Convert_new(((hxd__fs__Convert)r0),r3,r2);
	return;
}

void hxd_fs_ConvertWAV2OGG_convert(hxd__fs__ConvertWAV2OGG r0) {
	bool *r11;
	String r1, r7, r8;
	vvirtual *r12, *r14;
	hl__types__ArrayObj r3;
	hl_type *r5;
	format__wav__Reader r13;
	bool r9;
	sys__io__FileInput r10;
	int r6, r15;
	varray *r4;
	r1 = (String)s$oggenc;
	r5 = &t$String;
	r6 = 6;
	r4 = hl_alloc_array(r5,r6);
	r7 = (String)s$_resample;
	r6 = 0;
	((String*)(r4 + 1))[r6] = r7;
	r7 = (String)s$44100;
	r6 = 1;
	((String*)(r4 + 1))[r6] = r7;
	r7 = (String)s$_Q;
	r6 = 2;
	((String*)(r4 + 1))[r6] = r7;
	r7 = r0->srcPath;
	r6 = 3;
	((String*)(r4 + 1))[r6] = r7;
	r7 = (String)s$_o;
	r6 = 4;
	((String*)(r4 + 1))[r6] = r7;
	r7 = r0->dstPath;
	r6 = 5;
	((String*)(r4 + 1))[r6] = r7;
	r3 = hl_types_ArrayObj_alloc(r4);
	r7 = Sys_systemName();
	r8 = (String)s$Windows;
	if( r7 != r8 && (!r7 || !r8 || String___compare(r7,(vdynamic*)r8) != 0) ) goto label$6ef4a07_2_28;
	r7 = (String)s$oggenc2;
	r1 = r7;
	label$6ef4a07_2_28:
	r7 = (String)s$mono;
	r9 = hxd_fs_Convert_hasParam(((hxd__fs__Convert)r0),r7);
	if( !r9 ) goto label$6ef4a07_2_48;
	r7 = r0->srcPath;
	r11 = NULL;
	r10 = sys_io_File_read(r7,r11);
	r13 = (format__wav__Reader)hl_alloc_obj(&t$format_wav_Reader);
	format_wav_Reader_new(r13,((haxe__io__Input)r10));
	r12 = format_wav_Reader_read(r13);
	if( r10 == NULL ) hl_null_access();
	sys_io_FileInput_close(r10);
	if( r12 == NULL ) hl_null_access();
	r14 = hl_vfields(r12)[2] ? (*(vvirtual**)(hl_vfields(r12)[2])) : (vvirtual*)hl_dyn_getp(r12->value,-50329203/*header*/,&t$vrt_c2cbdf6);
	if( r14 == NULL ) hl_null_access();
	r6 = hl_vfields(r14)[3] ? (*(int*)(hl_vfields(r14)[3])) : (int)hl_dyn_geti(r14->value,183413727/*channels*/,&t$_i32);
	r15 = 2;
	if( r6 < r15 ) goto label$6ef4a07_2_48;
	if( r3 == NULL ) hl_null_access();
	r7 = (String)s$_downmix;
	r6 = hl_types_ArrayObj_push(r3,((vdynamic*)r7));
	label$6ef4a07_2_48:
	hxd_fs_Convert_command(((hxd__fs__Convert)r0),r1,r3);
	return;
}

