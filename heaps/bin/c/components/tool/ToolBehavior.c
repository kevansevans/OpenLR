// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <components/tool/ToolBehavior.h>
#include <hxd/Event.h>
#include <h2d/Interactive.h>
#include <_std/Main.h>
extern $Main g$_Main;
void h2d_Interactive_focus(h2d__Interactive);
#include <components/stage/Canvas.h>
#include <components/managers/Simulation.h>
extern hl_type t$h2d_col_Point;
#include <h2d/Scene.h>
double h2d_Scene_get_mouseX(h2d__Scene);
double h2d_Scene_get_mouseY(h2d__Scene);
void h2d_col_Point_new(h2d__col__Point,double*,double*);
void components_managers_Simulation_backSim(components__managers__Simulation);
void components_managers_Simulation_stepSim(components__managers__Simulation);
void components_stage_Canvas_zoomCanvas(components__stage__Canvas,int);
#include <h2d/Object.h>
void h2d_Object_removeChildren(h2d__Object);
void components_stage_Canvas_addCanvasPosition(components__stage__Canvas,double,double);
#include <h2d/Graphics.h>
#include <hxlr/lines/Undefined.h>
#include <hxlr/lines/Floor.h>
#include <hxlr/lines/Accel.h>
#include <hxlr/lines/Scenery.h>
void h2d_Graphics_clear(h2d__Graphics);
extern venum* g$components_tool_ToolMode_ERASER;
#include <hl/natives.h>
extern hl_type t$hxlr_lines_Undefined;
void hxlr_lines_Undefined_new(hxlr__lines__Undefined,h2d__col__Point,h2d__col__Point,bool,vdynamic*);
extern hl_type t$hxlr_lines_Floor;
void hxlr_lines_Floor_new(hxlr__lines__Floor,h2d__col__Point,h2d__col__Point,bool);
extern hl_type t$hxlr_lines_Accel;
void hxlr_lines_Accel_new(hxlr__lines__Accel,h2d__col__Point,h2d__col__Point,bool);
extern hl_type t$hxlr_lines_Scenery;
void hxlr_lines_Scenery_new(hxlr__lines__Scenery,h2d__col__Point,h2d__col__Point,bool);
void components_stage_Canvas_drawPreviewLine(components__stage__Canvas,hxlr__lines__LineBase);
#include <hxd/EventKind.h>
#include <components/stage/DrawMode.h>
#include <components/managers/Musicplayer.h>
#include <components/managers/Riders.h>
#include <components/stage/Camera.h>
#include <h3d/Engine.h>
#include <hxlr/rider/RiderBase.h>
venum* components_stage_Canvas_get_drawMode(components__stage__Canvas);
extern venum* g$994fdec;
venum* components_stage_Canvas_set_drawMode(components__stage__Canvas,venum*);
extern venum* g$92fe76c;
extern venum* g$ab5747c;
extern venum* g$ba7542c;
extern venum* g$2a65ad1;
extern venum* g$6537d82;
void components_managers_Musicplayer_stopMusic(components__managers__Musicplayer);
void components_managers_Simulation_pauseSim(components__managers__Simulation);
void components_managers_Simulation_resumeSim(components__managers__Simulation);
void components_managers_Simulation_setFlagState(components__managers__Simulation);
void components_managers_Simulation_startSim(components__managers__Simulation);
void components_managers_Simulation_endSim(components__managers__Simulation);
void components_managers_Riders_resetPositions(components__managers__Riders);
void components_managers_Simulation_updateSim(components__managers__Simulation);
void components_managers_Musicplayer_playMusic(components__managers__Musicplayer,int);
h2d__col__Point h2d_Object_localToGlobal(h2d__Object,h2d__col__Point);
#include <components/stage/LRConsole.h>
extern String s$Color_eraser_;
extern String s$on;
extern String s$off;
String String___add__(String,String);
#include <h2d/Console.h>
void h2d_Console_log(h2d__Console,String,vdynamic*);
void components_tool_ToolBehavior_updateCursor(components__tool__ToolBehavior);
extern String s$Tool_set_to_Eraser;
extern hl_type t$_i32;
extern venum* g$components_tool_ToolMode_PENCIL;
extern String s$Tool_set_to_Pencil;
extern venum* g$components_tool_ToolMode_LINE;
extern String s$Tool_set_to_Line;
extern venum* g$hxd_Cursor_Default;
venum* h2d_Interactive_set_cursor(h2d__Interactive,venum*);
void components_tool_ToolBehavior_updatePencilCursor(components__tool__ToolBehavior);
void components_tool_ToolBehavior_updateLineCursor(components__tool__ToolBehavior);
void components_tool_ToolBehavior_updateEraserCursor(components__tool__ToolBehavior);
#include <hxd/res/Loader.h>
#include <hxd/res/Resource.h>
#include <hxd/res/Image.h>
#include <hxd/CustomCursor.h>
#include <hl/types/ArrayObj.h>
extern hl_type t$fun_b4832bf;
extern hl_type t$fun_112ee0a;
hxd__res__Loader hxd_Res_get_loader(void);
extern String s$tool_pencilBlue_png;
extern hxd__res__$Image g$_hxd_res_Image;
hxd__res__Resource hxd_res_Loader_loadCache(hxd__res__Loader,String,hl__Class);
hxd__BitmapData hxd_res_Image_toBitmap(hxd__res__Image);
extern hl_type t$hxd_CustomCursor;
extern hl_type t$hxd_BitmapData;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
void hxd_CustomCursor_new(hxd__CustomCursor,hl__types__ArrayObj,double,int,int);
extern hl_type t$hxd_Cursor;
extern String s$tool_pencilRed_png;
extern String s$tool_pencilGreen_png;
extern String s$tool_lineBlue_png;
extern String s$tool_lineRed_png;
extern String s$tool_lineGreen_png;
extern String s$tool_eraser_png;
extern String s$tool_eraserBlue_png;
extern String s$tool_eraserRed_png;
extern String s$tool_eraserGreen_png;

void components_tool_ToolBehavior_new__$1(hxd__Event r0) {
	$Main r3;
	h2d__Interactive r2;
	r3 = ($Main)g$_Main;
	r2 = r3->canvas_interaction;
	if( r2 == NULL ) hl_null_access();
	h2d_Interactive_focus(r2);
	return;
}

void components_tool_ToolBehavior_mouseDown(components__tool__ToolBehavior r0,hxd__Event r1) {
	bool r4;
	$Main r8;
	h2d__col__Point r5;
	components__stage__Canvas r7;
	components__managers__Simulation r12;
	double r6, r10;
	double *r9, *r11;
	int r3;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->button;
	switch(r3) {
		default:
			goto label$80df762_2_31;
		case 0:
			return;
		case 1:
			return;
		case 2:
			r4 = true;
			r0->middleIsDown = r4;
			r5 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r6 = h2d_Scene_get_mouseX(((h2d__Scene)r7));
			r9 = &r6;
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r10 = h2d_Scene_get_mouseY(((h2d__Scene)r7));
			r11 = &r10;
			h2d_col_Point_new(r5,r9,r11);
			r0->mouseStart = r5;
			goto label$80df762_2_31;
		case 3:
			r8 = ($Main)g$_Main;
			r12 = r8->simulation;
			if( r12 == NULL ) hl_null_access();
			components_managers_Simulation_backSim(r12);
			goto label$80df762_2_31;
		case 4:
			r8 = ($Main)g$_Main;
			r12 = r8->simulation;
			if( r12 == NULL ) hl_null_access();
			components_managers_Simulation_stepSim(r12);
	}
	label$80df762_2_31:
	return;
}

void components_tool_ToolBehavior_mouseWheel(components__tool__ToolBehavior r0,hxd__Event r1) {
	$Main r6;
	components__stage__Canvas r5;
	double r3, r4;
	int r7;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->wheelDelta;
	r4 = 0.;
	if( !(r4 < r3) ) goto label$80df762_3_10;
	r6 = ($Main)g$_Main;
	r5 = r6->canvas;
	if( r5 == NULL ) hl_null_access();
	r7 = 1;
	components_stage_Canvas_zoomCanvas(r5,r7);
	goto label$80df762_3_18;
	label$80df762_3_10:
	r3 = r1->wheelDelta;
	r4 = 0.;
	if( !(r3 < r4) ) goto label$80df762_3_18;
	r6 = ($Main)g$_Main;
	r5 = r6->canvas;
	if( r5 == NULL ) hl_null_access();
	r7 = -1;
	components_stage_Canvas_zoomCanvas(r5,r7);
	label$80df762_3_18:
	return;
}

void components_tool_ToolBehavior_mouseMove(components__tool__ToolBehavior r0,hxd__Event r1) {
	venum *r7;
	bool r8;
	h2d__Object r3;
	$Main r5;
	h2d__col__Point r9;
	components__stage__Canvas r4;
	double r10, r12, r14, r15, r16, r17;
	double *r11, *r13;
	int r6;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->preview;
	if( r3 == NULL ) hl_null_access();
	h2d_Object_removeChildren(r3);
	r7 = r0->tool;
	if( r7 == NULL ) hl_null_access();
	r6 = HL__ENUM_INDEX__(r7);
	switch(r6) {
		default:
			goto label$80df762_4_15;
		case 0:
			goto label$80df762_4_15;
		case 1:
			return;
		case 2:
			return;
		case 3:
			return;
	}
	label$80df762_4_15:
	r8 = r0->middleIsDown;
	if( !r8 ) goto label$80df762_4_73;
	r9 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r10 = h2d_Scene_get_mouseX(((h2d__Scene)r4));
	r11 = &r10;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r12 = h2d_Scene_get_mouseY(((h2d__Scene)r4));
	r13 = &r12;
	h2d_col_Point_new(r9,r11,r13);
	r0->mouseEnd = r9;
	r9 = r0->mouseStart;
	if( r9 == NULL ) hl_null_access();
	r14 = r9->x;
	r9 = r0->mouseEnd;
	if( r9 == NULL ) hl_null_access();
	r15 = r9->x;
	r14 = r14 - r15;
	r14 = -r14;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r15 = r4->scaleX;
	r14 = r14 * r15;
	r9 = r0->mouseStart;
	if( r9 == NULL ) hl_null_access();
	r15 = r9->y;
	r9 = r0->mouseEnd;
	if( r9 == NULL ) hl_null_access();
	r16 = r9->y;
	r15 = r15 - r16;
	r15 = -r15;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r16 = r4->scaleX;
	r15 = r15 * r16;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	components_stage_Canvas_addCanvasPosition(r4,r14,r15);
	r9 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r16 = h2d_Scene_get_mouseX(((h2d__Scene)r4));
	r11 = &r16;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r17 = h2d_Scene_get_mouseY(((h2d__Scene)r4));
	r13 = &r17;
	h2d_col_Point_new(r9,r11,r13);
	r0->mouseStart = r9;
	label$80df762_4_73:
	return;
}

void components_tool_ToolBehavior_updatePreview(components__tool__ToolBehavior r0) {
	hxlr__lines__Undefined r13;
	venum *r6, *r7;
	h2d__Graphics r3;
	hxlr__lines__Scenery r19;
	bool r2;
	hxlr__lines__Floor r17;
	h2d__Object r8;
	hxlr__lines__Accel r18;
	$Main r5;
	h2d__col__Point r10, r14;
	hxlr__lines__LineBase r20;
	components__stage__Canvas r4;
	double r9, r11, r12;
	vdynamic *r15;
	int r16;
	r2 = r0->leftIsDown;
	if( r2 ) goto label$80df762_5_11;
	r2 = r0->rightIsDown;
	if( r2 ) goto label$80df762_5_11;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->previewLayer;
	if( r3 == NULL ) hl_null_access();
	h2d_Graphics_clear(r3);
	return;
	label$80df762_5_11:
	r6 = r0->tool;
	r7 = (venum*)g$components_tool_ToolMode_ERASER;
	if( r6 != r7 ) goto label$80df762_5_15;
	return;
	label$80df762_5_15:
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r8 = r4->preview;
	r10 = r0->mouseEnd;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->x;
	r10 = r0->mouseStart;
	if( r10 == NULL ) hl_null_access();
	r11 = r10->x;
	r9 = r9 - r11;
	r11 = 2.;
	r9 = hl_math_pow(r9,r11);
	r10 = r0->mouseEnd;
	if( r10 == NULL ) hl_null_access();
	r11 = r10->y;
	r10 = r0->mouseStart;
	if( r10 == NULL ) hl_null_access();
	r12 = r10->y;
	r11 = r11 - r12;
	r12 = 2.;
	r11 = hl_math_pow(r11,r12);
	r9 = r9 + r11;
	r9 = hl_math_sqrt(r9);
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r11 = r4->scaleX;
	r9 = r9 * r11;
	r11 = 10.;
	if( !(r9 < r11) ) goto label$80df762_5_54;
	r13 = (hxlr__lines__Undefined)hl_alloc_obj(&t$hxlr_lines_Undefined);
	r10 = r0->mouseStart;
	r14 = r0->mouseEnd;
	r2 = r0->shifted;
	r15 = NULL;
	hxlr_lines_Undefined_new(r13,r10,r14,r2,r15);
	r0->tempLine = ((hxlr__lines__LineBase)r13);
	goto label$80df762_5_101;
	label$80df762_5_54:
	r16 = r0->color;
	switch(r16) {
		default:
			goto label$80df762_5_101;
		case 0:
			r2 = r0->leftIsDown;
			if( !r2 ) goto label$80df762_5_66;
			r17 = (hxlr__lines__Floor)hl_alloc_obj(&t$hxlr_lines_Floor);
			r10 = r0->mouseStart;
			r14 = r0->mouseEnd;
			r2 = r0->shifted;
			hxlr_lines_Floor_new(r17,r10,r14,r2);
			r0->tempLine = ((hxlr__lines__LineBase)r17);
			goto label$80df762_5_75;
			label$80df762_5_66:
			r2 = r0->rightIsDown;
			if( !r2 ) goto label$80df762_5_75;
			r17 = (hxlr__lines__Floor)hl_alloc_obj(&t$hxlr_lines_Floor);
			r10 = r0->mouseEnd;
			r14 = r0->mouseStart;
			r2 = r0->shifted;
			r2 = !r2;
			hxlr_lines_Floor_new(r17,r10,r14,r2);
			r0->tempLine = ((hxlr__lines__LineBase)r17);
			label$80df762_5_75:
			goto label$80df762_5_101;
		case 1:
			r2 = r0->leftIsDown;
			if( !r2 ) goto label$80df762_5_85;
			r18 = (hxlr__lines__Accel)hl_alloc_obj(&t$hxlr_lines_Accel);
			r10 = r0->mouseStart;
			r14 = r0->mouseEnd;
			r2 = r0->shifted;
			hxlr_lines_Accel_new(r18,r10,r14,r2);
			r0->tempLine = ((hxlr__lines__LineBase)r18);
			goto label$80df762_5_94;
			label$80df762_5_85:
			r2 = r0->rightIsDown;
			if( !r2 ) goto label$80df762_5_94;
			r18 = (hxlr__lines__Accel)hl_alloc_obj(&t$hxlr_lines_Accel);
			r10 = r0->mouseEnd;
			r14 = r0->mouseStart;
			r2 = r0->shifted;
			r2 = !r2;
			hxlr_lines_Accel_new(r18,r10,r14,r2);
			r0->tempLine = ((hxlr__lines__LineBase)r18);
			label$80df762_5_94:
			goto label$80df762_5_101;
		case 2:
			r19 = (hxlr__lines__Scenery)hl_alloc_obj(&t$hxlr_lines_Scenery);
			r10 = r0->mouseStart;
			r14 = r0->mouseEnd;
			r2 = r0->shifted;
			hxlr_lines_Scenery_new(r19,r10,r14,r2);
			r0->tempLine = ((hxlr__lines__LineBase)r19);
	}
	label$80df762_5_101:
	r5 = ($Main)g$_Main;
	r4 = r5->canvas;
	if( r4 == NULL ) hl_null_access();
	r20 = r0->tempLine;
	components_stage_Canvas_drawPreviewLine(r4,r20);
	return;
}

void components_tool_ToolBehavior_mouseUp(components__tool__ToolBehavior r0,hxd__Event r1) {
	bool r4;
	h2d__Object r5;
	$Main r7;
	components__stage__Canvas r6;
	int r3;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->button;
	switch(r3) {
		default:
			goto label$80df762_6_7;
		case 0:
		case 1:
			return;
		case 2:
			r4 = false;
			r0->middleIsDown = r4;
	}
	label$80df762_6_7:
	r4 = false;
	r0->leftIsDown = r4;
	r4 = false;
	r0->rightIsDown = r4;
	r7 = ($Main)g$_Main;
	r6 = r7->canvas;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->preview;
	if( r5 == NULL ) hl_null_access();
	h2d_Object_removeChildren(r5);
	components_tool_ToolBehavior_updatePreview(r0);
	return;
}

void components_tool_ToolBehavior_keyInputDown(components__tool__ToolBehavior r0,hxd__Event r1) {
	String r18;
	components__managers__Riders r12;
	venum *r4, *r6;
	bool r10;
	components__managers__Musicplayer r11;
	hxlr__rider__RiderBase r23;
	$Main r8;
	h3d__Engine r21;
	h2d__col__Point r13;
	components__stage__Canvas r7;
	double r14, r16, r20, r22, r24;
	components__managers__Simulation r9;
	double *r15, *r17;
	components__stage__Camera r19;
	int r3, r5;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->kind;
	if( r4 == NULL ) hl_null_access();
	r3 = HL__ENUM_INDEX__(r4);
	switch(r3) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
			goto label$80df762_7_297;
		case 8:
			r3 = r1->keyCode;
			r5 = 9;
			if( r5 == r3 ) goto label$80df762_7_44;
			r5 = 17;
			if( r5 == r3 ) goto label$80df762_7_88;
			r5 = 32;
			if( r5 == r3 ) goto label$80df762_7_98;
			r5 = 49;
			if( r5 == r3 ) goto label$80df762_7_118;
			r5 = 50;
			if( r5 == r3 ) goto label$80df762_7_119;
			r5 = 51;
			if( r5 == r3 ) goto label$80df762_7_120;
			r5 = 65;
			if( r5 == r3 ) goto label$80df762_7_121;
			r5 = 68;
			if( r5 == r3 ) goto label$80df762_7_126;
			r5 = 69;
			if( r5 == r3 ) goto label$80df762_7_131;
			r5 = 70;
			if( r5 == r3 ) goto label$80df762_7_132;
			r5 = 81;
			if( r5 == r3 ) goto label$80df762_7_137;
			r5 = 83;
			if( r5 == r3 ) goto label$80df762_7_138;
			r5 = 87;
			if( r5 == r3 ) goto label$80df762_7_143;
			r5 = 88;
			if( r5 == r3 ) goto label$80df762_7_144;
			r5 = 219;
			if( r5 == r3 ) goto label$80df762_7_153;
			r5 = 221;
			if( r5 == r3 ) goto label$80df762_7_154;
			r5 = 272;
			if( r5 == r3 ) goto label$80df762_7_155;
			r5 = 528;
			if( r5 == r3 ) goto label$80df762_7_158;
			goto label$80df762_7_162;
			label$80df762_7_44:
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r6 = components_stage_Canvas_get_drawMode(r7);
			if( r6 == NULL ) hl_null_access();
			r3 = HL__ENUM_INDEX__(r6);
			switch(r3) {
				default:
					goto label$80df762_7_87;
				case 0:
					r8 = ($Main)g$_Main;
					r7 = r8->canvas;
					if( r7 == NULL ) hl_null_access();
					r6 = (venum*)g$994fdec;
					r6 = components_stage_Canvas_set_drawMode(r7,r6);
					goto label$80df762_7_87;
				case 1:
					r8 = ($Main)g$_Main;
					r7 = r8->canvas;
					if( r7 == NULL ) hl_null_access();
					r6 = (venum*)g$92fe76c;
					r6 = components_stage_Canvas_set_drawMode(r7,r6);
					goto label$80df762_7_87;
				case 2:
					r8 = ($Main)g$_Main;
					r7 = r8->canvas;
					if( r7 == NULL ) hl_null_access();
					r6 = (venum*)g$ab5747c;
					r6 = components_stage_Canvas_set_drawMode(r7,r6);
					goto label$80df762_7_87;
				case 3:
					r8 = ($Main)g$_Main;
					r7 = r8->canvas;
					if( r7 == NULL ) hl_null_access();
					r6 = (venum*)g$ba7542c;
					r6 = components_stage_Canvas_set_drawMode(r7,r6);
					goto label$80df762_7_87;
				case 4:
					r8 = ($Main)g$_Main;
					r7 = r8->canvas;
					if( r7 == NULL ) hl_null_access();
					r6 = (venum*)g$2a65ad1;
					r6 = components_stage_Canvas_set_drawMode(r7,r6);
					goto label$80df762_7_87;
				case 5:
					r8 = ($Main)g$_Main;
					r7 = r8->canvas;
					if( r7 == NULL ) hl_null_access();
					r6 = (venum*)g$6537d82;
					r6 = components_stage_Canvas_set_drawMode(r7,r6);
			}
			label$80df762_7_87:
			goto label$80df762_7_162;
			label$80df762_7_88:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			r10 = true;
			r9->rewinding = r10;
			r8 = ($Main)g$_Main;
			r11 = r8->audio;
			if( r11 == NULL ) hl_null_access();
			components_managers_Musicplayer_stopMusic(r11);
			goto label$80df762_7_162;
			label$80df762_7_98:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			r10 = r9->paused;
			if( r10 ) goto label$80df762_7_108;
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_pauseSim(r9);
			goto label$80df762_7_117;
			label$80df762_7_108:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			r10 = r9->paused;
			if( !r10 ) goto label$80df762_7_117;
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_resumeSim(r9);
			label$80df762_7_117:
			goto label$80df762_7_162;
			label$80df762_7_118:
			return;
			label$80df762_7_119:
			return;
			label$80df762_7_120:
			return;
			label$80df762_7_121:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_backSim(r9);
			goto label$80df762_7_162;
			label$80df762_7_126:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_stepSim(r9);
			goto label$80df762_7_162;
			label$80df762_7_131:
			return;
			label$80df762_7_132:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_setFlagState(r9);
			goto label$80df762_7_162;
			label$80df762_7_137:
			return;
			label$80df762_7_138:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_startSim(r9);
			goto label$80df762_7_162;
			label$80df762_7_143:
			return;
			label$80df762_7_144:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_endSim(r9);
			r8 = ($Main)g$_Main;
			r12 = r8->riders;
			if( r12 == NULL ) hl_null_access();
			components_managers_Riders_resetPositions(r12);
			goto label$80df762_7_162;
			label$80df762_7_153:
			return;
			label$80df762_7_154:
			return;
			label$80df762_7_155:
			r10 = true;
			r0->shifted = r10;
			goto label$80df762_7_162;
			label$80df762_7_158:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			components_managers_Simulation_updateSim(r9);
			label$80df762_7_162:
			goto label$80df762_7_297;
		case 9:
			r3 = r1->keyCode;
			r5 = 17;
			if( r5 == r3 ) goto label$80df762_7_173;
			r5 = 35;
			if( r5 == r3 ) goto label$80df762_7_187;
			r5 = 36;
			if( r5 == r3 ) goto label$80df762_7_208;
			r5 = 272;
			if( r5 == r3 ) goto label$80df762_7_295;
			goto label$80df762_7_297;
			label$80df762_7_173:
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			r10 = false;
			r9->rewinding = r10;
			r8 = ($Main)g$_Main;
			r11 = r8->audio;
			if( r11 == NULL ) hl_null_access();
			r8 = ($Main)g$_Main;
			r9 = r8->simulation;
			if( r9 == NULL ) hl_null_access();
			r3 = r9->frames;
			components_managers_Musicplayer_playMusic(r11,r3);
			goto label$80df762_7_297;
			label$80df762_7_187:
			r13 = r0->lastViewedPosition;
			if( !r13 ) goto label$80df762_7_207;
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r10 = true;
			r7->posChanged = r10;
			r13 = r0->lastViewedPosition;
			if( r13 == NULL ) hl_null_access();
			r14 = r13->x;
			r7->x = r14;
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r10 = true;
			r7->posChanged = r10;
			r13 = r0->lastViewedPosition;
			if( r13 == NULL ) hl_null_access();
			r14 = r13->y;
			r7->y = r14;
			label$80df762_7_207:
			goto label$80df762_7_297;
			label$80df762_7_208:
			r13 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r14 = r7->x;
			r15 = &r14;
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r16 = r7->y;
			r17 = &r16;
			h2d_col_Point_new(r13,r15,r17);
			r0->lastViewedPosition = r13;
			r8 = ($Main)g$_Main;
			r19 = r8->camera;
			if( r19 == NULL ) hl_null_access();
			r18 = r19->riderFollow;
			if( r18 ) goto label$80df762_7_253;
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r10 = true;
			r7->posChanged = r10;
			r8 = ($Main)g$_Main;
			r21 = r8->locengine;
			if( r21 == NULL ) hl_null_access();
			r3 = r21->width;
			r20 = (double)r3;
			r22 = 2.;
			r20 = r20 / r22;
			r7->x = r20;
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r10 = true;
			r7->posChanged = r10;
			r8 = ($Main)g$_Main;
			r21 = r8->locengine;
			if( r21 == NULL ) hl_null_access();
			r3 = r21->height;
			r20 = (double)r3;
			r22 = 2.;
			r20 = r20 / r22;
			r7->y = r20;
			goto label$80df762_7_294;
			label$80df762_7_253:
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r8 = ($Main)g$_Main;
			r19 = r8->camera;
			if( r19 == NULL ) hl_null_access();
			r23 = r19->rider;
			if( r23 == NULL ) hl_null_access();
			r13 = r23->startPos;
			r13 = h2d_Object_localToGlobal(((h2d__Object)r7),r13);
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r10 = true;
			r7->posChanged = r10;
			if( r13 == NULL ) hl_null_access();
			r20 = r13->x;
			r8 = ($Main)g$_Main;
			r21 = r8->locengine;
			if( r21 == NULL ) hl_null_access();
			r3 = r21->width;
			r22 = (double)r3;
			r24 = 2.;
			r22 = r22 / r24;
			r20 = r20 + r22;
			r7->x = r20;
			r8 = ($Main)g$_Main;
			r7 = r8->canvas;
			if( r7 == NULL ) hl_null_access();
			r10 = true;
			r7->posChanged = r10;
			r20 = r13->y;
			r8 = ($Main)g$_Main;
			r21 = r8->locengine;
			if( r21 == NULL ) hl_null_access();
			r3 = r21->height;
			r22 = (double)r3;
			r24 = 2.;
			r22 = r22 / r24;
			r20 = r20 + r22;
			r7->y = r20;
			label$80df762_7_294:
			goto label$80df762_7_297;
			label$80df762_7_295:
			r10 = false;
			r0->shifted = r10;
	}
	label$80df762_7_297:
	return;
}

void components_tool_ToolBehavior_setToolEraser(components__tool__ToolBehavior r0) {
	String r7, r8;
	venum *r2, *r3;
	bool r4, r9;
	$Main r6;
	vdynamic *r10;
	int r11;
	components__stage__LRConsole r5;
	r2 = r0->tool;
	r3 = (venum*)g$components_tool_ToolMode_ERASER;
	if( r2 != r3 ) goto label$80df762_8_19;
	r4 = r0->colorEraser;
	r4 = !r4;
	r0->colorEraser = r4;
	r6 = ($Main)g$_Main;
	r5 = r6->console;
	if( r5 == NULL ) hl_null_access();
	r7 = (String)s$Color_eraser_;
	r4 = r0->colorEraser;
	r9 = true;
	if( r4 != r9 ) goto label$80df762_8_15;
	r8 = (String)s$on;
	goto label$80df762_8_16;
	label$80df762_8_15:
	r8 = (String)s$off;
	label$80df762_8_16:
	r7 = String___add__(r7,r8);
	r10 = NULL;
	h2d_Console_log(((h2d__Console)r5),r7,r10);
	label$80df762_8_19:
	r2 = (venum*)g$components_tool_ToolMode_ERASER;
	r0->tool = r2;
	components_tool_ToolBehavior_updateCursor(r0);
	r6 = ($Main)g$_Main;
	r5 = r6->console;
	if( r5 == NULL ) hl_null_access();
	r7 = (String)s$Tool_set_to_Eraser;
	r11 = 187;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r11;
	h2d_Console_log(((h2d__Console)r5),r7,r10);
	return;
}

void components_tool_ToolBehavior_setToolPencil(components__tool__ToolBehavior r0) {
	String r5;
	venum *r1;
	$Main r4;
	vdynamic *r7;
	int r6;
	components__stage__LRConsole r3;
	r1 = (venum*)g$components_tool_ToolMode_PENCIL;
	r0->tool = r1;
	components_tool_ToolBehavior_updateCursor(r0);
	r4 = ($Main)g$_Main;
	r3 = r4->console;
	if( r3 == NULL ) hl_null_access();
	r5 = (String)s$Tool_set_to_Pencil;
	r6 = 187;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r6;
	h2d_Console_log(((h2d__Console)r3),r5,r7);
	return;
}

void components_tool_ToolBehavior_setToolLine(components__tool__ToolBehavior r0) {
	String r5;
	venum *r1;
	$Main r4;
	vdynamic *r7;
	int r6;
	components__stage__LRConsole r3;
	r1 = (venum*)g$components_tool_ToolMode_LINE;
	r0->tool = r1;
	components_tool_ToolBehavior_updateCursor(r0);
	r4 = ($Main)g$_Main;
	r3 = r4->console;
	if( r3 == NULL ) hl_null_access();
	r5 = (String)s$Tool_set_to_Line;
	r6 = 187;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r6;
	h2d_Console_log(((h2d__Console)r3),r5,r7);
	return;
}

void components_tool_ToolBehavior_updateCursor(components__tool__ToolBehavior r0) {
	venum *r3, *r4;
	$Main r6;
	h2d__Interactive r5;
	int r2;
	r3 = r0->tool;
	if( r3 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r3);
	switch(r2) {
		default:
		case 0:
			r6 = ($Main)g$_Main;
			r5 = r6->canvas_interaction;
			if( r5 == NULL ) hl_null_access();
			r4 = (venum*)g$hxd_Cursor_Default;
			r4 = h2d_Interactive_set_cursor(r5,r4);
			goto label$80df762_11_15;
		case 1:
			components_tool_ToolBehavior_updatePencilCursor(r0);
			goto label$80df762_11_15;
		case 2:
			components_tool_ToolBehavior_updateLineCursor(r0);
			goto label$80df762_11_15;
		case 3:
			components_tool_ToolBehavior_updateEraserCursor(r0);
	}
	label$80df762_11_15:
	return;
}

void components_tool_ToolBehavior_updateEraserCursor(components__tool__ToolBehavior r0) {
	venum *r3;
	bool r2;
	$Main r5;
	h2d__Interactive r4;
	int r6;
	r2 = r0->colorEraser;
	if( r2 ) goto label$80df762_12_8;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r3 = r0->cursorEraser;
	r3 = h2d_Interactive_set_cursor(r4,r3);
	goto label$80df762_12_33;
	label$80df762_12_8:
	r6 = r0->color;
	switch(r6) {
		default:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = (venum*)g$hxd_Cursor_Default;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_12_33;
		case 0:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorEraserBlue;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_12_33;
		case 1:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorEraserRed;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_12_33;
		case 2:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorEraserGreen;
			r3 = h2d_Interactive_set_cursor(r4,r3);
	}
	label$80df762_12_33:
	return;
}

void components_tool_ToolBehavior_updateLineCursor(components__tool__ToolBehavior r0) {
	venum *r3;
	$Main r5;
	h2d__Interactive r4;
	int r2;
	r2 = r0->color;
	switch(r2) {
		default:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = (venum*)g$hxd_Cursor_Default;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_13_25;
		case 0:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorLineBlue;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_13_25;
		case 1:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorLineRed;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_13_25;
		case 2:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorLineGreen;
			r3 = h2d_Interactive_set_cursor(r4,r3);
	}
	label$80df762_13_25:
	return;
}

void components_tool_ToolBehavior_updatePencilCursor(components__tool__ToolBehavior r0) {
	venum *r3;
	$Main r5;
	h2d__Interactive r4;
	int r2;
	r2 = r0->color;
	switch(r2) {
		default:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = (venum*)g$hxd_Cursor_Default;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_14_25;
		case 0:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorPencilBlue;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_14_25;
		case 1:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorPencilRed;
			r3 = h2d_Interactive_set_cursor(r4,r3);
			goto label$80df762_14_25;
		case 2:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas_interaction;
			if( r4 == NULL ) hl_null_access();
			r3 = r0->cursorPencilGreen;
			r3 = h2d_Interactive_set_cursor(r4,r3);
	}
	label$80df762_14_25:
	return;
}

void components_tool_ToolBehavior_new(components__tool__ToolBehavior r0) {
	String r12;
	hl__types__ArrayObj r17;
	hl_type *r19;
	hxd__CustomCursor r16;
	hxd__res__Resource r10;
	venum *r2, *r15;
	bool r1;
	hxd__BitmapData r9;
	$Main r5;
	hxd__res__Loader r7, r11, r22, r23, r24, r25, r26, r27, r28, r29;
	hxd__res__$Image r13;
	double r20;
	vclosure *r6;
	hxd__res__Image r14;
	h2d__Interactive r4;
	varray *r18;
	int r3, r21;
	static vclosure cl$0 = { &t$fun_b4832bf, components_tool_ToolBehavior_new__$1, 0 };
	r1 = false;
	r0->shifted = r1;
	r1 = false;
	r0->rightIsDown = r1;
	r1 = false;
	r0->middleIsDown = r1;
	r1 = false;
	r0->leftIsDown = r1;
	r1 = false;
	r0->colorEraser = r1;
	r1 = false;
	r0->gridSnapping = r1;
	r1 = true;
	r0->lineSnapping = r1;
	r2 = (venum*)g$components_tool_ToolMode_PENCIL;
	r0->tool = r2;
	r3 = 0;
	r0->color = r3;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r1 = true;
	r4->enableRightButton = r1;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r6 = hl_alloc_closure_ptr(&t$fun_112ee0a,components_tool_ToolBehavior_keyInputDown,r0);
	r4->onKeyDown = r6;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r6 = hl_alloc_closure_ptr(&t$fun_112ee0a,components_tool_ToolBehavior_keyInputDown,r0);
	r4->onKeyUp = r6;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r6 = hl_alloc_closure_ptr(&t$fun_112ee0a,components_tool_ToolBehavior_mouseDown,r0);
	r4->onPush = r6;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r6 = hl_alloc_closure_ptr(&t$fun_112ee0a,components_tool_ToolBehavior_mouseUp,r0);
	r4->onRelease = r6;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r6 = hl_alloc_closure_ptr(&t$fun_112ee0a,components_tool_ToolBehavior_mouseMove,r0);
	r4->onMove = r6;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r6 = hl_alloc_closure_ptr(&t$fun_112ee0a,components_tool_ToolBehavior_mouseWheel,r0);
	r4->onWheel = r6;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r6 = &cl$0;
	r4->onOver = r6;
	r7 = hxd_Res_get_loader();
	if( r7 == NULL ) hl_null_access();
	r12 = (String)s$tool_pencilBlue_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r7,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapPencilBlue = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapPencilBlue;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 1;
	r21 = 25;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorPencilBlue = r15;
	r11 = hxd_Res_get_loader();
	if( r11 == NULL ) hl_null_access();
	r12 = (String)s$tool_pencilRed_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r11,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapPencilRed = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapPencilRed;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 1;
	r21 = 25;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorPencilRed = r15;
	r22 = hxd_Res_get_loader();
	if( r22 == NULL ) hl_null_access();
	r12 = (String)s$tool_pencilGreen_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r22,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapPencilGreen = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapPencilGreen;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 1;
	r21 = 25;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorPencilGreen = r15;
	r23 = hxd_Res_get_loader();
	if( r23 == NULL ) hl_null_access();
	r12 = (String)s$tool_lineBlue_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r23,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapLineBlue = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapLineBlue;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 12;
	r21 = 12;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorLineBlue = r15;
	r24 = hxd_Res_get_loader();
	if( r24 == NULL ) hl_null_access();
	r12 = (String)s$tool_lineRed_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r24,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapLineRed = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapLineRed;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 12;
	r21 = 12;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorLineRed = r15;
	r25 = hxd_Res_get_loader();
	if( r25 == NULL ) hl_null_access();
	r12 = (String)s$tool_lineGreen_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r25,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapLineGreen = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapLineGreen;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 12;
	r21 = 12;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorLineGreen = r15;
	r26 = hxd_Res_get_loader();
	if( r26 == NULL ) hl_null_access();
	r12 = (String)s$tool_eraser_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r26,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapEraser = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapEraser;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 5;
	r21 = 5;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorEraser = r15;
	r27 = hxd_Res_get_loader();
	if( r27 == NULL ) hl_null_access();
	r12 = (String)s$tool_eraserBlue_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r27,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapEraserBlue = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapEraserBlue;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 5;
	r21 = 5;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorEraserBlue = r15;
	r28 = hxd_Res_get_loader();
	if( r28 == NULL ) hl_null_access();
	r12 = (String)s$tool_eraserRed_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r28,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapEraserRed = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapEraserRed;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 5;
	r21 = 5;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorEraserRed = r15;
	r29 = hxd_Res_get_loader();
	if( r29 == NULL ) hl_null_access();
	r12 = (String)s$tool_eraserGreen_png;
	r13 = (hxd__res__$Image)g$_hxd_res_Image;
	r10 = hxd_res_Loader_loadCache(r29,r12,((hl__Class)r13));
	r14 = (hxd__res__Image)r10;
	if( r14 == NULL ) hl_null_access();
	r9 = hxd_res_Image_toBitmap(r14);
	r0->bitmapEraserGreen = r9;
	r16 = (hxd__CustomCursor)hl_alloc_obj(&t$hxd_CustomCursor);
	r19 = &t$hxd_BitmapData;
	r3 = 1;
	r18 = hl_alloc_array(r19,r3);
	r9 = r0->bitmapEraserGreen;
	r3 = 0;
	((hxd__BitmapData*)(r18 + 1))[r3] = r9;
	r17 = hl_types_ArrayObj_alloc(r18);
	r20 = 0.;
	r3 = 5;
	r21 = 5;
	hxd_CustomCursor_new(r16,r17,r20,r3,r21);
	r15 = hl_alloc_enum(&t$hxd_Cursor,5);
	((hxd_Cursor_Custom*)r15)->p0 = r16;
	r0->cursorEraserGreen = r15;
	r5 = ($Main)g$_Main;
	r4 = r5->canvas_interaction;
	if( r4 == NULL ) hl_null_access();
	r15 = r0->cursorPencilBlue;
	r15 = h2d_Interactive_set_cursor(r4,r15);
	return;
}

