// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <components/stage/TextInfo.h>
#include <h2d/Font.h>
#include <h2d/Object.h>
#include <h3d/Vector.h>
#include <h2d/Align.h>
extern hl_type t$h2d_Text;
h2d__Font hxd_res_DefaultFont_get(void);
void h2d_Text_new(h2d__Text,h2d__Font,h2d__Object);
extern hl_type t$h3d_Vector;
void h3d_Vector_new(h3d__Vector,double*,double*,double*,double*);
extern venum* g$h2d_Align_MultilineRight;
venum* h2d_Text_set_textAlign(h2d__Text,venum*);
#include <_std/Main.h>
#include <h3d/Engine.h>
#include <components/managers/Simulation.h>
#include <hxlr/engine/Grid.h>
#include <hl/types/ArrayBytes_Int.h>
extern $Main g$_Main;
extern String s$Untitled;
extern String s$f910c9f;
#include <hl/natives.h>
String String___alloc__(vbyte*,int);
String String___add__(String,String);
extern String s$FPS_;
extern String s$Draw_calls_;
extern String s$68b329d;
extern String s$;
String components_stage_TextInfo_timeStamp(components__stage__TextInfo,int);
String components_stage_TextInfo_getSimState(components__stage__TextInfo);
extern String s$ee59caa;
extern String s$b26fc71;
String components_stage_TextInfo_getLineVisibility(components__stage__TextInfo,int);
extern String s$95bfd39;
extern String s$f6e44bc;
#include <components/stage/DrawMode.h>
#include <components/stage/Canvas.h>
venum* components_stage_Canvas_get_drawMode(components__stage__Canvas);
extern String s$_Not_visible_;
extern String s$0_0;
extern String s$0_;
extern String s$853ae90;
extern String s$0;
extern String s$336d5eb;
extern String s$Rewinding;
extern String s$Stopped;
extern String s$Playing;
extern String s$Paused;
extern String s$lousy_smarch_weather;

void components_stage_TextInfo_new(components__stage__TextInfo r0) {
	venum *r13;
	h2d__Object r3;
	h2d__Font r2;
	h2d__Text r1;
	h3d__Vector r5;
	double r6, r8, r10;
	double *r7, *r9, *r11, *r12;
	r1 = (h2d__Text)hl_alloc_obj(&t$h2d_Text);
	r2 = hxd_res_DefaultFont_get();
	r3 = NULL;
	h2d_Text_new(r1,r2,r3);
	r0->info = r1;
	r1 = r0->info;
	if( r1 == NULL ) hl_null_access();
	r5 = (h3d__Vector)hl_alloc_obj(&t$h3d_Vector);
	r6 = 0.20000000000000001;
	r7 = &r6;
	r8 = 0.20000000000000001;
	r9 = &r8;
	r10 = 0.20000000000000001;
	r11 = &r10;
	r12 = NULL;
	h3d_Vector_new(r5,r7,r9,r11,r12);
	r1->color = r5;
	r1 = r0->info;
	if( r1 == NULL ) hl_null_access();
	r13 = (venum*)g$h2d_Align_MultilineRight;
	r13 = h2d_Text_set_textAlign(r1,r13);
	return;
}

void components_stage_TextInfo_update(components__stage__TextInfo r0) {
	String r1, r4, r10;
	hl__types__ArrayBytes_Int r15;
	hxlr__engine__Grid r14;
	$Main r3;
	h2d__Text r2;
	h3d__Engine r12;
	components__managers__Simulation r13;
	double r6, r7;
	int *r8;
	vbyte *r9;
	int r5, r16;
	r2 = r0->info;
	if( r2 == NULL ) hl_null_access();
	r3 = ($Main)g$_Main;
	r1 = r3->trackName;
	if( r1 ) goto label$47952d5_2_7;
	r1 = (String)s$Untitled;
	goto label$47952d5_2_9;
	label$47952d5_2_7:
	r3 = ($Main)g$_Main;
	r1 = r3->trackName;
	label$47952d5_2_9:
	r4 = (String)s$f910c9f;
	r6 = 1.;
	r7 = r0->framerate;
	r6 = r6 / r7;
	r5 = hl_math_floor(r6);
	r8 = &r5;
	r9 = hl_itos(r5,r8);
	r10 = String___alloc__(r9,r5);
	r4 = String___add__(r4,r10);
	r10 = (String)s$FPS_;
	r4 = String___add__(r4,r10);
	r1 = String___add__(r1,r4);
	r1 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r1);
	r2 = r0->info;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->text;
	r4 = (String)s$Draw_calls_;
	r3 = ($Main)g$_Main;
	r12 = r3->locengine;
	if( r12 == NULL ) hl_null_access();
	r5 = r12->drawCalls;
	r8 = &r5;
	r9 = hl_itos(r5,r8);
	r10 = String___alloc__(r9,r5);
	r4 = String___add__(r4,r10);
	r10 = (String)s$68b329d;
	r4 = String___add__(r4,r10);
	r1 = String___add__(r1,r4);
	r1 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r1);
	r2 = r0->info;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->text;
	r4 = (String)s$;
	r3 = ($Main)g$_Main;
	r13 = r3->simulation;
	if( r13 == NULL ) hl_null_access();
	r5 = r13->frames;
	r10 = components_stage_TextInfo_timeStamp(r0,r5);
	r4 = String___add__(r4,r10);
	r10 = (String)s$f910c9f;
	r4 = String___add__(r4,r10);
	r10 = components_stage_TextInfo_getSimState(r0);
	r4 = String___add__(r4,r10);
	r10 = (String)s$68b329d;
	r4 = String___add__(r4,r10);
	r1 = String___add__(r1,r4);
	r1 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r1);
	r2 = r0->info;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->text;
	r4 = (String)s$ee59caa;
	r3 = ($Main)g$_Main;
	r14 = r3->grid;
	if( r14 == NULL ) hl_null_access();
	r5 = r14->lineCount;
	r8 = &r5;
	r9 = hl_itos(r5,r8);
	r10 = String___alloc__(r9,r5);
	r4 = String___add__(r4,r10);
	r10 = (String)s$68b329d;
	r4 = String___add__(r4,r10);
	r1 = String___add__(r1,r4);
	r1 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r1);
	r2 = r0->info;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->text;
	r4 = (String)s$b26fc71;
	r3 = ($Main)g$_Main;
	r14 = r3->grid;
	if( r14 == NULL ) hl_null_access();
	r15 = r14->subTypeCount;
	if( r15 == NULL ) hl_null_access();
	r5 = 0;
	r16 = r15->length;
	if( ((unsigned)r5) < ((unsigned)r16) ) goto label$47952d5_2_86;
	r5 = 0;
	goto label$47952d5_2_90;
	label$47952d5_2_86:
	r9 = r15->bytes;
	r16 = 2;
	r16 = r5 << r16;
	r5 = *(int*)(r9 + r16);
	label$47952d5_2_90:
	r8 = &r5;
	r9 = hl_itos(r5,r8);
	r10 = String___alloc__(r9,r5);
	r4 = String___add__(r4,r10);
	r5 = 0;
	r10 = components_stage_TextInfo_getLineVisibility(r0,r5);
	r4 = String___add__(r4,r10);
	r10 = (String)s$68b329d;
	r4 = String___add__(r4,r10);
	r1 = String___add__(r1,r4);
	r1 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r1);
	r2 = r0->info;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->text;
	r4 = (String)s$95bfd39;
	r3 = ($Main)g$_Main;
	r14 = r3->grid;
	if( r14 == NULL ) hl_null_access();
	r15 = r14->subTypeCount;
	if( r15 == NULL ) hl_null_access();
	r5 = 1;
	r16 = r15->length;
	if( ((unsigned)r5) < ((unsigned)r16) ) goto label$47952d5_2_115;
	r5 = 0;
	goto label$47952d5_2_119;
	label$47952d5_2_115:
	r9 = r15->bytes;
	r16 = 2;
	r16 = r5 << r16;
	r5 = *(int*)(r9 + r16);
	label$47952d5_2_119:
	r8 = &r5;
	r9 = hl_itos(r5,r8);
	r10 = String___alloc__(r9,r5);
	r4 = String___add__(r4,r10);
	r5 = 1;
	r10 = components_stage_TextInfo_getLineVisibility(r0,r5);
	r4 = String___add__(r4,r10);
	r10 = (String)s$68b329d;
	r4 = String___add__(r4,r10);
	r1 = String___add__(r1,r4);
	r1 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r1);
	r2 = r0->info;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->text;
	r4 = (String)s$f6e44bc;
	r3 = ($Main)g$_Main;
	r14 = r3->grid;
	if( r14 == NULL ) hl_null_access();
	r15 = r14->subTypeCount;
	if( r15 == NULL ) hl_null_access();
	r5 = 2;
	r16 = r15->length;
	if( ((unsigned)r5) < ((unsigned)r16) ) goto label$47952d5_2_144;
	r5 = 0;
	goto label$47952d5_2_148;
	label$47952d5_2_144:
	r9 = r15->bytes;
	r16 = 2;
	r16 = r5 << r16;
	r5 = *(int*)(r9 + r16);
	label$47952d5_2_148:
	r8 = &r5;
	r9 = hl_itos(r5,r8);
	r10 = String___alloc__(r9,r5);
	r4 = String___add__(r4,r10);
	r5 = 2;
	r10 = components_stage_TextInfo_getLineVisibility(r0,r5);
	r4 = String___add__(r4,r10);
	r10 = (String)s$68b329d;
	r4 = String___add__(r4,r10);
	r1 = String___add__(r1,r4);
	r1 = ((String (*)(h2d__Text,String))r2->$type->vobj_proto[16])(r2,r1);
	return;
}

String components_stage_TextInfo_getLineVisibility(components__stage__TextInfo r0,int r1) {
	String r6;
	venum *r3;
	$Main r5;
	components__stage__Canvas r4;
	int r2;
	switch(r1) {
		default:
			goto label$47952d5_3_35;
		case 0:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas;
			if( r4 == NULL ) hl_null_access();
			r3 = components_stage_Canvas_get_drawMode(r4);
			if( r3 == NULL ) hl_null_access();
			r2 = HL__ENUM_INDEX__(r3);
			switch(r2) {
				default:
					r6 = (String)s$_Not_visible_;
					return r6;
				case 0:
				case 1:
				case 2:
				case 3:
					r6 = (String)s$;
					return r6;
			}
		case 1:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas;
			if( r4 == NULL ) hl_null_access();
			r3 = components_stage_Canvas_get_drawMode(r4);
			if( r3 == NULL ) hl_null_access();
			r2 = HL__ENUM_INDEX__(r3);
			switch(r2) {
				default:
					r6 = (String)s$_Not_visible_;
					return r6;
				case 0:
				case 1:
				case 2:
				case 3:
					r6 = (String)s$;
					return r6;
			}
		case 2:
			r5 = ($Main)g$_Main;
			r4 = r5->canvas;
			if( r4 == NULL ) hl_null_access();
			r3 = components_stage_Canvas_get_drawMode(r4);
			if( r3 == NULL ) hl_null_access();
			r2 = HL__ENUM_INDEX__(r3);
			switch(r2) {
				default:
				case 0:
				case 1:
					r6 = (String)s$;
					return r6;
				case 2:
				case 3:
					r6 = (String)s$_Not_visible_;
					return r6;
			}
	}
	label$47952d5_3_35:
	r6 = (String)s$;
	return r6;
}

String components_stage_TextInfo_timeStamp(components__stage__TextInfo r0,int r1) {
	String r12, r14, r17, r18;
	bool r2, r6;
	int *r15;
	vbyte *r16;
	int r3, r4, r5, r7, r8, r9, r10, r11, r13;
	r2 = false;
	r3 = r1;
	r5 = 0;
	if( r1 >= r5 ) goto label$47952d5_4_9;
	r6 = true;
	r2 = r6;
	r5 = -1;
	r4 = r1 * r5;
	r3 = r4;
	label$47952d5_4_9:
	r5 = 40;
	r4 = r5 == 0 ? 0 : r3 / r5;
	r7 = 60;
	r5 = r7 == 0 ? 0 : r4 / r7;
	r8 = 60;
	r7 = r8 == 0 ? 0 : r5 / r8;
	r9 = 40;
	r8 = r9 == 0 ? 0 : r3 % r9;
	r10 = 60;
	r9 = r10 == 0 ? 0 : r4 % r10;
	r11 = 60;
	r10 = r11 == 0 ? 0 : r5 % r11;
	r12 = (String)s$;
	r13 = 40;
	if( r3 >= r13 ) goto label$47952d5_4_41;
	r13 = 10;
	if( r3 >= r13 ) goto label$47952d5_4_33;
	r14 = (String)s$0_0;
	r11 = r3;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r17 = String___alloc__(r16,r11);
	r14 = String___add__(r14,r17);
	goto label$47952d5_4_39;
	label$47952d5_4_33:
	r14 = (String)s$0_;
	r11 = r3;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r17 = String___alloc__(r16,r11);
	r14 = String___add__(r14,r17);
	label$47952d5_4_39:
	r12 = r14;
	goto label$47952d5_4_181;
	label$47952d5_4_41:
	r13 = 40;
	if( r3 < r13 ) goto label$47952d5_4_74;
	r13 = 60;
	if( r4 >= r13 ) goto label$47952d5_4_74;
	r13 = 10;
	if( r8 >= r13 ) goto label$47952d5_4_61;
	r11 = r4;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r14 = String___alloc__(r16,r11);
	r17 = (String)s$853ae90;
	r14 = String___add__(r14,r17);
	r17 = (String)s$0;
	r14 = String___add__(r14,r17);
	r11 = r8;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r17 = String___alloc__(r16,r11);
	r14 = String___add__(r14,r17);
	goto label$47952d5_4_72;
	label$47952d5_4_61:
	r11 = r4;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r14 = String___alloc__(r16,r11);
	r17 = (String)s$853ae90;
	r14 = String___add__(r14,r17);
	r11 = r8;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r17 = String___alloc__(r16,r11);
	r14 = String___add__(r14,r17);
	label$47952d5_4_72:
	r12 = r14;
	goto label$47952d5_4_181;
	label$47952d5_4_74:
	r13 = 60;
	if( r4 < r13 ) goto label$47952d5_4_120;
	r13 = 60;
	if( r5 >= r13 ) goto label$47952d5_4_120;
	r11 = r5;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r14 = String___alloc__(r16,r11);
	r17 = (String)s$853ae90;
	r14 = String___add__(r14,r17);
	r13 = 10;
	if( r9 >= r13 ) goto label$47952d5_4_93;
	r17 = (String)s$0;
	r11 = r9;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	goto label$47952d5_4_99;
	label$47952d5_4_93:
	r17 = (String)s$;
	r11 = r9;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	label$47952d5_4_99:
	r14 = String___add__(r14,r17);
	r17 = (String)s$853ae90;
	r14 = String___add__(r14,r17);
	r13 = 10;
	if( r8 >= r13 ) goto label$47952d5_4_111;
	r17 = (String)s$0;
	r11 = r8;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	goto label$47952d5_4_117;
	label$47952d5_4_111:
	r17 = (String)s$;
	r11 = r8;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	label$47952d5_4_117:
	r14 = String___add__(r14,r17);
	r12 = r14;
	goto label$47952d5_4_181;
	label$47952d5_4_120:
	r13 = 60;
	if( r5 < r13 ) goto label$47952d5_4_181;
	r11 = r7;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r14 = String___alloc__(r16,r11);
	r17 = (String)s$853ae90;
	r14 = String___add__(r14,r17);
	r13 = 10;
	if( r5 >= r13 ) goto label$47952d5_4_137;
	r17 = (String)s$0;
	r11 = r10;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	goto label$47952d5_4_143;
	label$47952d5_4_137:
	r17 = (String)s$;
	r11 = r10;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	label$47952d5_4_143:
	r14 = String___add__(r14,r17);
	r17 = (String)s$853ae90;
	r14 = String___add__(r14,r17);
	r13 = 10;
	if( r9 >= r13 ) goto label$47952d5_4_155;
	r17 = (String)s$0;
	r11 = r9;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	goto label$47952d5_4_161;
	label$47952d5_4_155:
	r17 = (String)s$;
	r11 = r9;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	label$47952d5_4_161:
	r14 = String___add__(r14,r17);
	r17 = (String)s$853ae90;
	r14 = String___add__(r14,r17);
	r13 = 10;
	if( r8 >= r13 ) goto label$47952d5_4_173;
	r17 = (String)s$0;
	r11 = r8;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	goto label$47952d5_4_179;
	label$47952d5_4_173:
	r17 = (String)s$;
	r11 = r8;
	r15 = &r11;
	r16 = hl_itos(r11,r15);
	r18 = String___alloc__(r16,r11);
	r17 = String___add__(r17,r18);
	label$47952d5_4_179:
	r14 = String___add__(r14,r17);
	r12 = r14;
	label$47952d5_4_181:
	if( !r2 ) goto label$47952d5_4_185;
	r14 = (String)s$336d5eb;
	r14 = String___add__(r14,r12);
	r12 = r14;
	label$47952d5_4_185:
	return r12;
}

String components_stage_TextInfo_getSimState(components__stage__TextInfo r0) {
	String r4;
	bool r3;
	$Main r2;
	components__managers__Simulation r1;
	r2 = ($Main)g$_Main;
	r1 = r2->simulation;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->rewinding;
	if( !r3 ) goto label$47952d5_5_7;
	r4 = (String)s$Rewinding;
	return r4;
	label$47952d5_5_7:
	r3 = r1->playing;
	if( r3 ) goto label$47952d5_5_15;
	r3 = r1->paused;
	if( r3 ) goto label$47952d5_5_15;
	r3 = r1->rewinding;
	if( r3 ) goto label$47952d5_5_15;
	r4 = (String)s$Stopped;
	return r4;
	label$47952d5_5_15:
	r3 = r1->playing;
	if( !r3 ) goto label$47952d5_5_23;
	r3 = r1->paused;
	if( r3 ) goto label$47952d5_5_23;
	r3 = r1->rewinding;
	if( r3 ) goto label$47952d5_5_23;
	r4 = (String)s$Playing;
	return r4;
	label$47952d5_5_23:
	r3 = r1->paused;
	if( !r3 ) goto label$47952d5_5_29;
	r3 = r1->rewinding;
	if( r3 ) goto label$47952d5_5_29;
	r4 = (String)s$Paused;
	return r4;
	label$47952d5_5_29:
	r4 = (String)s$lousy_smarch_weather;
	return r4;
}

