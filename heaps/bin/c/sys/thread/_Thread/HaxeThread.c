// Generated by HLC 4.2.0 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <sys/thread/_Thread/HaxeThread.h>
#include <hl/natives.h>
extern sys__thread___Thread__$HaxeThread g$_sys_thread__Thread_HaxeThread;
extern hl_type t$vrt_256ad9a;
extern hl_type t$hl_thread;
extern hl_type t$sys_thread__Thread_HaxeThread;
void sys_thread__Thread_HaxeThread_new(sys__thread___Thread__HaxeThread);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);

sys__thread___Thread__HaxeThread sys_thread__Thread_HaxeThread_current() {
	sys__thread___Thread__HaxeThread r5, r13;
	vvirtual *r11;
	hl__types__ArrayObj r9;
	hl_thread *r0, *r2, *r3;
	hl_mutex *r7;
	sys__thread___Thread__$HaxeThread r4;
	vdynamic *r6;
	varray *r12;
	int r8, r10;
	r0 = hl_thread_current();
	r4 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r3 = r4->mainThreadHandle;
	if( r0 != r3 ) goto label$ca28e11_1_7;
	r4 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r5 = r4->mainThread;
	return r5;
	label$ca28e11_1_7:
	r4 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r7 = r4->threadsMutex;
	hl_mutex_acquire(r7);
	r5 = NULL;
	r8 = 0;
	r4 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r9 = r4->threads;
	label$ca28e11_1_14:
	if( r9 == NULL ) hl_null_access();
	r10 = r9->length;
	if( r8 >= r10 ) goto label$ca28e11_1_33;
	r10 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$ca28e11_1_22;
	r11 = NULL;
	goto label$ca28e11_1_25;
	label$ca28e11_1_22:
	r12 = r9->array;
	r6 = ((vdynamic**)(r12 + 1))[r8];
	r11 = hl_to_virtual(&t$vrt_256ad9a,(vdynamic*)r6);
	label$ca28e11_1_25:
	++r8;
	if( r11 == NULL ) hl_null_access();
	r2 = hl_vfields(r11)[0] ? (*(hl_thread**)(hl_vfields(r11)[0])) : (hl_thread*)hl_dyn_getp(r11->value,-134380898/*handle*/,&t$hl_thread);
	if( r2 != r0 ) goto label$ca28e11_1_32;
	r13 = hl_vfields(r11)[1] ? (*(sys__thread___Thread__HaxeThread*)(hl_vfields(r11)[1])) : (sys__thread___Thread__HaxeThread)hl_dyn_getp(r11->value,-289834693/*thread*/,&t$sys_thread__Thread_HaxeThread);
	r5 = r13;
	goto label$ca28e11_1_33;
	label$ca28e11_1_32:
	goto label$ca28e11_1_14;
	label$ca28e11_1_33:
	if( r5 ) goto label$ca28e11_1_44;
	r13 = (sys__thread___Thread__HaxeThread)hl_alloc_obj(&t$sys_thread__Thread_HaxeThread);
	sys_thread__Thread_HaxeThread_new(r13);
	r5 = r13;
	r4 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r9 = r4->threads;
	if( r9 == NULL ) hl_null_access();
	r11 = hl_alloc_virtual(&t$vrt_256ad9a);
	if( hl_vfields(r11)[1] ) *(sys__thread___Thread__HaxeThread*)(hl_vfields(r11)[1]) = (sys__thread___Thread__HaxeThread)r13; else hl_dyn_setp(r11->value,-289834693/*thread*/,&t$sys_thread__Thread_HaxeThread,r13);
	if( hl_vfields(r11)[0] ) *(hl_thread**)(hl_vfields(r11)[0]) = (hl_thread*)r0; else hl_dyn_setp(r11->value,-134380898/*handle*/,&t$hl_thread,r0);
	r8 = hl_types_ArrayObj_push(r9,((vdynamic*)r11));
	label$ca28e11_1_44:
	r4 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r7 = r4->threadsMutex;
	hl_mutex_release(r7);
	return r5;
}

void sys_thread__Thread_HaxeThread_new(sys__thread___Thread__HaxeThread r0) {
	return;
}

