// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <h3d/prim/Quads.h>
void h3d_prim_Primitive_new(h3d__prim__Primitive);
#include <h3d/col/Bounds.h>
#include <h3d/col/Point.h>
extern hl_type t$h3d_col_Bounds;
void h3d_col_Bounds_new(h3d__col__Bounds);
#include <h3d/prim/UV.h>
extern hl_type t$h3d_prim_UV;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
void h3d_prim_UV_new(h3d__prim__UV,double,double);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
#include <h3d/Engine.h>
#include <hl/types/ArrayBytes_hl_F32.h>
#include <h3d/BufferFlag.h>
void h3d_prim_Primitive_dispose(h3d__prim__Primitive);
extern hl_type t$hl_types_ArrayBytes_hl_F32;
void hl_types_ArrayBytes_hl_F32_new(hl__types__ArrayBytes_hl_F32);
void hl_types_ArrayBytes_hl_F32___expand(hl__types__ArrayBytes_hl_F32,int);
int hl_types_ArrayBytes_hl_F32_push(hl__types__ArrayBytes_hl_F32,float);
extern hl_type t$h3d_BufferFlag;
extern venum* g$h3d_BufferFlag_Quads;
extern venum* g$h3d_BufferFlag_RawFormat;
h3d__Buffer h3d_Buffer_ofFloats(hl__types__ArrayBytes_hl_F32,int,hl__types__ArrayObj);
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
extern hl_type t$h3d_col_Point;
void h3d_col_Point_new(h3d__col__Point,double*,double*,double*);
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
#include <h3d/impl/ManagedBuffer.h>
#include <h3d/impl/MemoryManager.h>
void h3d_Engine_renderBuffer(h3d__Engine,h3d__Buffer,h3d__Indexes,int,int*,int*);

void h3d_prim_Quads_new(h3d__prim__Quads r0,hl__types__ArrayObj r1,hl__types__ArrayObj r2,hl__types__ArrayObj r3) {
	h3d_prim_Primitive_new(((h3d__prim__Primitive)r0));
	r0->pts = r1;
	r0->uvs = r2;
	r0->normals = r3;
	return;
}

h3d__col__Bounds h3d_prim_Quads_getBounds(h3d__prim__Quads r0) {
	hl__types__ArrayObj r4;
	h3d__col__Bounds r1;
	double r9, r10;
	h3d__col__Point r6;
	vdynamic *r7;
	varray *r8;
	int r3, r5;
	r1 = (h3d__col__Bounds)hl_alloc_obj(&t$h3d_col_Bounds);
	h3d_col_Bounds_new(r1);
	r3 = 0;
	r4 = r0->pts;
	label$fec2451_2_4:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r3 >= r5 ) goto label$fec2451_2_49;
	r5 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r5) ) goto label$fec2451_2_12;
	r6 = NULL;
	goto label$fec2451_2_15;
	label$fec2451_2_12:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r3];
	r6 = (h3d__col__Point)r7;
	label$fec2451_2_15:
	++r3;
	if( r6 == NULL ) hl_null_access();
	r9 = r6->x;
	if( r1 == NULL ) hl_null_access();
	r10 = r1->xMin;
	if( !(r9 < r10) ) goto label$fec2451_2_23;
	r9 = r6->x;
	r1->xMin = r9;
	label$fec2451_2_23:
	r9 = r6->x;
	r10 = r1->xMax;
	if( !(r10 < r9) ) goto label$fec2451_2_28;
	r9 = r6->x;
	r1->xMax = r9;
	label$fec2451_2_28:
	r9 = r6->y;
	r10 = r1->yMin;
	if( !(r9 < r10) ) goto label$fec2451_2_33;
	r9 = r6->y;
	r1->yMin = r9;
	label$fec2451_2_33:
	r9 = r6->y;
	r10 = r1->yMax;
	if( !(r10 < r9) ) goto label$fec2451_2_38;
	r9 = r6->y;
	r1->yMax = r9;
	label$fec2451_2_38:
	r9 = r6->z;
	r10 = r1->zMin;
	if( !(r9 < r10) ) goto label$fec2451_2_43;
	r9 = r6->z;
	r1->zMin = r9;
	label$fec2451_2_43:
	r9 = r6->z;
	r10 = r1->zMax;
	if( !(r10 < r9) ) goto label$fec2451_2_48;
	r9 = r6->z;
	r1->zMax = r9;
	label$fec2451_2_48:
	goto label$fec2451_2_4;
	label$fec2451_2_49:
	return r1;
}

void h3d_prim_Quads_addUVs(h3d__prim__Quads r0) {
	h3d__prim__UV r5, r9, r10, r11;
	hl__types__ArrayObj r1;
	hl_type *r3;
	double r6, r7;
	int r4, r12, r13, r14;
	varray *r2;
	r3 = &t$h3d_prim_UV;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->uvs = r1;
	r5 = (h3d__prim__UV)hl_alloc_obj(&t$h3d_prim_UV);
	r6 = 0.;
	r7 = 1.;
	h3d_prim_UV_new(r5,r6,r7);
	r9 = (h3d__prim__UV)hl_alloc_obj(&t$h3d_prim_UV);
	r6 = 1.;
	r7 = 1.;
	h3d_prim_UV_new(r9,r6,r7);
	r10 = (h3d__prim__UV)hl_alloc_obj(&t$h3d_prim_UV);
	r6 = 0.;
	r7 = 0.;
	h3d_prim_UV_new(r10,r6,r7);
	r11 = (h3d__prim__UV)hl_alloc_obj(&t$h3d_prim_UV);
	r6 = 1.;
	r7 = 0.;
	h3d_prim_UV_new(r11,r6,r7);
	r4 = 0;
	r1 = r0->pts;
	if( r1 == NULL ) hl_null_access();
	r12 = r1->length;
	r13 = 2;
	r12 = r12 >> r13;
	label$fec2451_3_27:
	if( r4 >= r12 ) goto label$fec2451_3_43;
	++r4;
	r1 = r0->uvs;
	if( r1 == NULL ) hl_null_access();
	r14 = hl_types_ArrayObj_push(r1,((vdynamic*)r5));
	r1 = r0->uvs;
	if( r1 == NULL ) hl_null_access();
	r14 = hl_types_ArrayObj_push(r1,((vdynamic*)r9));
	r1 = r0->uvs;
	if( r1 == NULL ) hl_null_access();
	r14 = hl_types_ArrayObj_push(r1,((vdynamic*)r10));
	r1 = r0->uvs;
	if( r1 == NULL ) hl_null_access();
	r14 = hl_types_ArrayObj_push(r1,((vdynamic*)r11));
	goto label$fec2451_3_27;
	label$fec2451_3_43:
	return;
}

void h3d_prim_Quads_alloc(h3d__prim__Quads r0,h3d__Engine r1) {
	h3d__prim__UV r19;
	hl__types__ArrayObj r11, r22;
	venum *r21;
	hl_type *r20;
	hl__types__ArrayBytes_hl_F32 r4, r7;
	float r9;
	h3d__Buffer r23;
	h3d__col__Point r15, r18;
	double r8;
	vdynamic *r16;
	varray *r17;
	vbyte *r10;
	int r3, r5, r6, r12, r13, r14;
	h3d_prim_Primitive_dispose(((h3d__prim__Primitive)r0));
	r3 = 0;
	r4 = (hl__types__ArrayBytes_hl_F32)hl_alloc_obj(&t$hl_types_ArrayBytes_hl_F32);
	hl_types_ArrayBytes_hl_F32_new(r4);
	r6 = 0;
	if( r6 >= r3 ) goto label$fec2451_4_19;
	r6 = r4->length;
	if( r6 >= r3 ) goto label$fec2451_4_19;
	r6 = 1;
	r5 = r3 - r6;
	r8 = 0.;
	r9 = (float)r8;
	r6 = r4->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$fec2451_4_15;
	hl_types_ArrayBytes_hl_F32___expand(r4,r5);
	label$fec2451_4_15:
	r10 = r4->bytes;
	r6 = 2;
	r6 = r5 << r6;
	*(float*)(r10 + r6) = r9;
	label$fec2451_4_19:
	r7 = r4;
	r5 = 0;
	r11 = r0->pts;
	if( r11 == NULL ) hl_null_access();
	r6 = r11->length;
	label$fec2451_4_24:
	if( r5 >= r6 ) goto label$fec2451_4_88;
	r12 = r5;
	++r5;
	r11 = r0->pts;
	if( r11 == NULL ) hl_null_access();
	r14 = r11->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$fec2451_4_34;
	r15 = NULL;
	goto label$fec2451_4_37;
	label$fec2451_4_34:
	r17 = r11->array;
	r16 = ((vdynamic**)(r17 + 1))[r12];
	r15 = (h3d__col__Point)r16;
	label$fec2451_4_37:
	if( r7 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r8 = r15->x;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	r8 = r15->y;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	r8 = r15->z;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	r11 = r0->normals;
	if( !r11 ) goto label$fec2451_4_69;
	r11 = r0->normals;
	if( r11 == NULL ) hl_null_access();
	r14 = r11->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$fec2451_4_56;
	r18 = NULL;
	goto label$fec2451_4_59;
	label$fec2451_4_56:
	r17 = r11->array;
	r16 = ((vdynamic**)(r17 + 1))[r12];
	r18 = (h3d__col__Point)r16;
	label$fec2451_4_59:
	if( r18 == NULL ) hl_null_access();
	r8 = r18->x;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	r8 = r18->y;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	r8 = r18->z;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	label$fec2451_4_69:
	r11 = r0->uvs;
	if( !r11 ) goto label$fec2451_4_87;
	r11 = r0->uvs;
	if( r11 == NULL ) hl_null_access();
	r14 = r11->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$fec2451_4_77;
	r19 = NULL;
	goto label$fec2451_4_80;
	label$fec2451_4_77:
	r17 = r11->array;
	r16 = ((vdynamic**)(r17 + 1))[r12];
	r19 = (h3d__prim__UV)r16;
	label$fec2451_4_80:
	if( r19 == NULL ) hl_null_access();
	r8 = r19->u;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	r8 = r19->v;
	r9 = (float)r8;
	r13 = hl_types_ArrayBytes_hl_F32_push(r7,r9);
	label$fec2451_4_87:
	goto label$fec2451_4_24;
	label$fec2451_4_88:
	r5 = 3;
	r11 = r0->normals;
	if( !r11 ) goto label$fec2451_4_94;
	r12 = 3;
	r6 = r5 + r12;
	r5 = r6;
	label$fec2451_4_94:
	r11 = r0->uvs;
	if( !r11 ) goto label$fec2451_4_99;
	r12 = 2;
	r6 = r5 + r12;
	r5 = r6;
	label$fec2451_4_99:
	r20 = &t$h3d_BufferFlag;
	r6 = 1;
	r17 = hl_alloc_array(r20,r6);
	r21 = (venum*)g$h3d_BufferFlag_Quads;
	r6 = 0;
	((venum**)(r17 + 1))[r6] = r21;
	r11 = hl_types_ArrayObj_alloc(r17);
	r22 = r0->normals;
	if( r22 ) goto label$fec2451_4_111;
	if( r11 == NULL ) hl_null_access();
	r21 = (venum*)g$h3d_BufferFlag_RawFormat;
	r6 = hl_types_ArrayObj_push(r11,((vdynamic*)r21));
	label$fec2451_4_111:
	r23 = h3d_Buffer_ofFloats(r7,r5,r11);
	r0->buffer = r23;
	return;
}

void h3d_prim_Quads_addNormals(h3d__prim__Quads r0) {
	hl__types__ArrayObj r1, r5;
	double r22, r24, r25, r26, r27, r28, r29, r30, r31, r32, r33, r40, r41, r42, r43, r44, r45, r46, r47;
	h3d__col__Point r8, r20, r21, r23, r37, r38, r39;
	vdynamic *r19;
	double *r9, *r10, *r11;
	varray *r13;
	int r3, r4, r6, r7, r12, r14, r15, r16, r17, r18, r34, r35, r36;
	r1 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r1);
	r0->normals = r1;
	r1 = r0->pts;
	r3 = 0;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->length;
	label$fec2451_5_7:
	if( r3 >= r4 ) goto label$fec2451_5_24;
	r6 = r3;
	++r3;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r8 = (h3d__col__Point)hl_alloc_obj(&t$h3d_col_Point);
	r9 = NULL;
	r10 = NULL;
	r11 = NULL;
	h3d_col_Point_new(r8,r9,r10,r11);
	r12 = r5->length;
	if( ((unsigned)r6) < ((unsigned)r12) ) goto label$fec2451_5_21;
	hl_types_ArrayObj___expand(r5,r6);
	label$fec2451_5_21:
	r13 = r5->array;
	((h3d__col__Point*)(r13 + 1))[r6] = r8;
	goto label$fec2451_5_7;
	label$fec2451_5_24:
	r3 = 0;
	r4 = 0;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->length;
	r7 = 2;
	r6 = r6 >> r7;
	label$fec2451_5_30:
	if( r4 >= r6 ) goto label$fec2451_5_384;
	r7 = r4;
	++r4;
	r14 = 2;
	r12 = r7 << r14;
	r16 = 1;
	r15 = r12 + r16;
	r17 = 2;
	r16 = r12 + r17;
	if( r1 == NULL ) hl_null_access();
	r18 = r1->length;
	if( ((unsigned)r12) < ((unsigned)r18) ) goto label$fec2451_5_45;
	r8 = NULL;
	goto label$fec2451_5_48;
	label$fec2451_5_45:
	r13 = r1->array;
	r19 = ((vdynamic**)(r13 + 1))[r12];
	r8 = (h3d__col__Point)r19;
	label$fec2451_5_48:
	r18 = r1->length;
	if( ((unsigned)r15) < ((unsigned)r18) ) goto label$fec2451_5_52;
	r20 = NULL;
	goto label$fec2451_5_55;
	label$fec2451_5_52:
	r13 = r1->array;
	r19 = ((vdynamic**)(r13 + 1))[r15];
	r20 = (h3d__col__Point)r19;
	label$fec2451_5_55:
	r18 = r1->length;
	if( ((unsigned)r16) < ((unsigned)r18) ) goto label$fec2451_5_59;
	r21 = NULL;
	goto label$fec2451_5_62;
	label$fec2451_5_59:
	r13 = r1->array;
	r19 = ((vdynamic**)(r13 + 1))[r16];
	r21 = (h3d__col__Point)r19;
	label$fec2451_5_62:
	if( r20 == NULL ) hl_null_access();
	r22 = r20->x;
	if( r8 == NULL ) hl_null_access();
	r24 = r8->x;
	r22 = r22 - r24;
	r24 = r20->y;
	r25 = r8->y;
	r24 = r24 - r25;
	r25 = r20->z;
	r26 = r8->z;
	r25 = r25 - r26;
	if( r21 == NULL ) hl_null_access();
	r26 = r21->x;
	r27 = r8->x;
	r26 = r26 - r27;
	r27 = r21->y;
	r28 = r8->y;
	r27 = r27 - r28;
	r28 = r21->z;
	r29 = r8->z;
	r28 = r28 - r29;
	r29 = r24 * r28;
	r30 = r25 * r27;
	r29 = r29 - r30;
	r30 = r25 * r26;
	r31 = r22 * r28;
	r30 = r30 - r31;
	r31 = r22 * r27;
	r32 = r24 * r26;
	r31 = r31 - r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r12) < ((unsigned)r18) ) goto label$fec2451_5_98;
	r23 = NULL;
	goto label$fec2451_5_101;
	label$fec2451_5_98:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r12];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_101:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->x;
	r32 = r32 + r29;
	r23->x = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r12) < ((unsigned)r18) ) goto label$fec2451_5_111;
	r23 = NULL;
	goto label$fec2451_5_114;
	label$fec2451_5_111:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r12];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_114:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->y;
	r32 = r32 + r30;
	r23->y = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r12) < ((unsigned)r18) ) goto label$fec2451_5_124;
	r23 = NULL;
	goto label$fec2451_5_127;
	label$fec2451_5_124:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r12];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_127:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->z;
	r32 = r32 + r31;
	r23->z = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r15) < ((unsigned)r18) ) goto label$fec2451_5_137;
	r23 = NULL;
	goto label$fec2451_5_140;
	label$fec2451_5_137:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r15];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_140:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->x;
	r32 = r32 + r29;
	r23->x = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r15) < ((unsigned)r18) ) goto label$fec2451_5_150;
	r23 = NULL;
	goto label$fec2451_5_153;
	label$fec2451_5_150:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r15];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_153:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->y;
	r32 = r32 + r30;
	r23->y = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r15) < ((unsigned)r18) ) goto label$fec2451_5_163;
	r23 = NULL;
	goto label$fec2451_5_166;
	label$fec2451_5_163:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r15];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_166:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->z;
	r32 = r32 + r31;
	r23->z = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r16) < ((unsigned)r18) ) goto label$fec2451_5_176;
	r23 = NULL;
	goto label$fec2451_5_179;
	label$fec2451_5_176:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r16];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_179:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->x;
	r32 = r32 + r29;
	r23->x = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r16) < ((unsigned)r18) ) goto label$fec2451_5_189;
	r23 = NULL;
	goto label$fec2451_5_192;
	label$fec2451_5_189:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r16];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_192:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->y;
	r32 = r32 + r30;
	r23->y = r32;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r18 = r5->length;
	if( ((unsigned)r16) < ((unsigned)r18) ) goto label$fec2451_5_202;
	r23 = NULL;
	goto label$fec2451_5_205;
	label$fec2451_5_202:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r16];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_205:
	if( r23 == NULL ) hl_null_access();
	r32 = r23->z;
	r32 = r32 + r31;
	r23->z = r32;
	r18 = 3;
	r17 = r12 + r18;
	r34 = 2;
	r18 = r12 + r34;
	r35 = 1;
	r34 = r12 + r35;
	r36 = r1->length;
	if( ((unsigned)r17) < ((unsigned)r36) ) goto label$fec2451_5_219;
	r23 = NULL;
	goto label$fec2451_5_222;
	label$fec2451_5_219:
	r13 = r1->array;
	r19 = ((vdynamic**)(r13 + 1))[r17];
	r23 = (h3d__col__Point)r19;
	label$fec2451_5_222:
	r36 = r1->length;
	if( ((unsigned)r18) < ((unsigned)r36) ) goto label$fec2451_5_226;
	r37 = NULL;
	goto label$fec2451_5_229;
	label$fec2451_5_226:
	r13 = r1->array;
	r19 = ((vdynamic**)(r13 + 1))[r18];
	r37 = (h3d__col__Point)r19;
	label$fec2451_5_229:
	r36 = r1->length;
	if( ((unsigned)r34) < ((unsigned)r36) ) goto label$fec2451_5_233;
	r38 = NULL;
	goto label$fec2451_5_236;
	label$fec2451_5_233:
	r13 = r1->array;
	r19 = ((vdynamic**)(r13 + 1))[r34];
	r38 = (h3d__col__Point)r19;
	label$fec2451_5_236:
	if( r37 == NULL ) hl_null_access();
	r32 = r37->x;
	if( r23 == NULL ) hl_null_access();
	r33 = r23->x;
	r32 = r32 - r33;
	r33 = r37->y;
	r40 = r23->y;
	r33 = r33 - r40;
	r40 = r37->z;
	r41 = r23->z;
	r40 = r40 - r41;
	if( r38 == NULL ) hl_null_access();
	r41 = r38->x;
	r42 = r23->x;
	r41 = r41 - r42;
	r42 = r38->y;
	r43 = r23->y;
	r42 = r42 - r43;
	r43 = r38->z;
	r44 = r23->z;
	r43 = r43 - r44;
	r44 = r33 * r43;
	r45 = r40 * r42;
	r44 = r44 - r45;
	r45 = r40 * r41;
	r46 = r32 * r43;
	r45 = r45 - r46;
	r46 = r32 * r42;
	r47 = r33 * r41;
	r46 = r46 - r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r17) < ((unsigned)r36) ) goto label$fec2451_5_272;
	r39 = NULL;
	goto label$fec2451_5_275;
	label$fec2451_5_272:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r17];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_275:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->x;
	r47 = r47 + r44;
	r39->x = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r17) < ((unsigned)r36) ) goto label$fec2451_5_285;
	r39 = NULL;
	goto label$fec2451_5_288;
	label$fec2451_5_285:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r17];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_288:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->y;
	r47 = r47 + r45;
	r39->y = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r17) < ((unsigned)r36) ) goto label$fec2451_5_298;
	r39 = NULL;
	goto label$fec2451_5_301;
	label$fec2451_5_298:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r17];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_301:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->z;
	r47 = r47 + r46;
	r39->z = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r18) < ((unsigned)r36) ) goto label$fec2451_5_311;
	r39 = NULL;
	goto label$fec2451_5_314;
	label$fec2451_5_311:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r18];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_314:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->x;
	r47 = r47 + r44;
	r39->x = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r18) < ((unsigned)r36) ) goto label$fec2451_5_324;
	r39 = NULL;
	goto label$fec2451_5_327;
	label$fec2451_5_324:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r18];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_327:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->y;
	r47 = r47 + r45;
	r39->y = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r18) < ((unsigned)r36) ) goto label$fec2451_5_337;
	r39 = NULL;
	goto label$fec2451_5_340;
	label$fec2451_5_337:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r18];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_340:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->z;
	r47 = r47 + r46;
	r39->z = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r34) < ((unsigned)r36) ) goto label$fec2451_5_350;
	r39 = NULL;
	goto label$fec2451_5_353;
	label$fec2451_5_350:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r34];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_353:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->x;
	r47 = r47 + r44;
	r39->x = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r34) < ((unsigned)r36) ) goto label$fec2451_5_363;
	r39 = NULL;
	goto label$fec2451_5_366;
	label$fec2451_5_363:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r34];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_366:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->y;
	r47 = r47 + r45;
	r39->y = r47;
	r5 = r0->normals;
	if( r5 == NULL ) hl_null_access();
	r36 = r5->length;
	if( ((unsigned)r34) < ((unsigned)r36) ) goto label$fec2451_5_376;
	r39 = NULL;
	goto label$fec2451_5_379;
	label$fec2451_5_376:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r34];
	r39 = (h3d__col__Point)r19;
	label$fec2451_5_379:
	if( r39 == NULL ) hl_null_access();
	r47 = r39->z;
	r47 = r47 + r46;
	r39->z = r47;
	goto label$fec2451_5_30;
	label$fec2451_5_384:
	r4 = 0;
	r5 = r0->normals;
	label$fec2451_5_386:
	if( r5 == NULL ) hl_null_access();
	r7 = r5->length;
	if( r4 >= r7 ) goto label$fec2451_5_429;
	r7 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$fec2451_5_394;
	r8 = NULL;
	goto label$fec2451_5_397;
	label$fec2451_5_394:
	r13 = r5->array;
	r19 = ((vdynamic**)(r13 + 1))[r4];
	r8 = (h3d__col__Point)r19;
	label$fec2451_5_397:
	++r4;
	if( r8 == NULL ) hl_null_access();
	r22 = r8->x;
	r24 = r8->x;
	r22 = r22 * r24;
	r24 = r8->y;
	r25 = r8->y;
	r24 = r24 * r25;
	r22 = r22 + r24;
	r24 = r8->z;
	r25 = r8->z;
	r24 = r24 * r25;
	r22 = r22 + r24;
	r25 = 1e-010;
	if( !(r22 < r25) ) goto label$fec2451_5_415;
	r24 = 0.;
	r22 = r24;
	goto label$fec2451_5_419;
	label$fec2451_5_415:
	r24 = 1.;
	r25 = hl_math_sqrt(r22);
	r24 = r24 / r25;
	r22 = r24;
	label$fec2451_5_419:
	r24 = r8->x;
	r24 = r24 * r22;
	r8->x = r24;
	r24 = r8->y;
	r24 = r24 * r22;
	r8->y = r24;
	r24 = r8->z;
	r24 = r24 * r22;
	r8->z = r24;
	goto label$fec2451_5_386;
	label$fec2451_5_429:
	return;
}

void h3d_prim_Quads_render(h3d__prim__Quads r0,h3d__Engine r1) {
	vvirtual *r6;
	bool r4;
	h3d__impl__MemoryManager r8;
	h3d__Buffer r3;
	int *r11, *r13;
	int r9, r10, r12;
	h3d__Indexes r7;
	h3d__impl__ManagedBuffer r5;
	r3 = r0->buffer;
	if( !r3 ) goto label$fec2451_6_14;
	r3 = r0->buffer;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->buffer;
	if( !r5 ) goto label$fec2451_6_12;
	r5 = r3->buffer;
	if( r5 == NULL ) hl_null_access();
	r6 = r5->vbuf;
	if( !r6 ) goto label$fec2451_6_12;
	r4 = false;
	goto label$fec2451_6_13;
	label$fec2451_6_12:
	r4 = true;
	label$fec2451_6_13:
	goto label$fec2451_6_15;
	label$fec2451_6_14:
	r4 = true;
	label$fec2451_6_15:
	if( !r4 ) goto label$fec2451_6_17;
	h3d_prim_Quads_alloc(r0,r1);
	label$fec2451_6_17:
	if( r1 == NULL ) hl_null_access();
	r3 = r0->buffer;
	r8 = r1->mem;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->quadIndexes;
	r9 = 2;
	r10 = 0;
	r11 = &r10;
	r12 = -1;
	r13 = &r12;
	h3d_Engine_renderBuffer(r1,r3,r7,r9,r11,r13);
	return;
}

