// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <hxlr/rider/ContactPoint.h>
extern hl_type t$h2d_col_Point;
void h2d_col_Point_new(h2d__col__Point,double*,double*);
extern hl_type t$vrt_6c2da0f;

void hxlr_rider_ContactPoint_new(hxlr__rider__ContactPoint r0,double* r1,double* r2,double* r3) {
	h2d__col__Point r7;
	double r4, r5, r6, r8, r9;
	if( r1 ) goto label$665258f_1_3;
	r4 = 0.;
	goto label$665258f_1_4;
	label$665258f_1_3:
	r4 = *r1;
	label$665258f_1_4:
	if( r2 ) goto label$665258f_1_7;
	r5 = 0.;
	goto label$665258f_1_8;
	label$665258f_1_7:
	r5 = *r2;
	label$665258f_1_8:
	if( r3 ) goto label$665258f_1_11;
	r6 = 0.;
	goto label$665258f_1_12;
	label$665258f_1_11:
	r6 = *r3;
	label$665258f_1_12:
	r7 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r8 = r4;
	r1 = &r8;
	r9 = r5;
	r2 = &r9;
	h2d_col_Point_new(r7,r1,r2);
	r0->pos = r7;
	r7 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r1 = NULL;
	r2 = NULL;
	h2d_col_Point_new(r7,r1,r2);
	r0->dir = r7;
	r7 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r1 = NULL;
	r2 = NULL;
	h2d_col_Point_new(r7,r1,r2);
	r0->vel = r7;
	r0->friction = r6;
	return;
}

void hxlr_rider_ContactPoint_iterate(hxlr__rider__ContactPoint r0,h2d__col__Point r1) {
	h2d__col__Point r2, r4, r6, r8, r11;
	double r5, r7, r12, r13, r14;
	double *r9, *r10;
	if( r1 ) goto label$665258f_2_3;
	r2 = r0->gravity;
	goto label$665258f_2_4;
	label$665258f_2_3:
	r2 = r1;
	label$665258f_2_4:
	r4 = r0->dir;
	if( r4 == NULL ) hl_null_access();
	r6 = r0->pos;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->x;
	r6 = r0->vel;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->x;
	r5 = r5 - r7;
	if( r2 == NULL ) hl_null_access();
	r7 = r2->x;
	r5 = r5 + r7;
	r4->x = r5;
	r4 = r0->dir;
	if( r4 == NULL ) hl_null_access();
	r6 = r0->pos;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->y;
	r6 = r0->vel;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->y;
	r5 = r5 - r7;
	r7 = r2->y;
	r5 = r5 + r7;
	r4->y = r5;
	r4 = r0->pos;
	r6 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r4 == NULL ) hl_null_access();
	r5 = r4->x;
	r9 = &r5;
	r7 = r4->y;
	r10 = &r7;
	h2d_col_Point_new(r6,r9,r10);
	r0->vel = r6;
	r6 = r0->pos;
	r8 = r0->dir;
	r11 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r6 == NULL ) hl_null_access();
	r12 = r6->x;
	if( r8 == NULL ) hl_null_access();
	r13 = r8->x;
	r12 = r12 + r13;
	r9 = &r12;
	r13 = r6->y;
	r14 = r8->y;
	r13 = r13 + r14;
	r10 = &r13;
	h2d_col_Point_new(r11,r9,r10);
	r0->pos = r11;
	return;
}

vvirtual* hxlr_rider_ContactPoint_serialize(hxlr__rider__ContactPoint r0) {
	vvirtual *r1;
	h2d__col__Point r2;
	r1 = hl_alloc_virtual(&t$vrt_6c2da0f);
	r2 = r0->pos;
	if( hl_vfields(r1)[0] ) *(h2d__col__Point*)(hl_vfields(r1)[0]) = (h2d__col__Point)r2; else hl_dyn_setp(r1->value,-352673756/*position*/,&t$h2d_col_Point,r2);
	r2 = r0->vel;
	if( hl_vfields(r1)[1] ) *(h2d__col__Point*)(hl_vfields(r1)[1]) = (h2d__col__Point)r2; else hl_dyn_setp(r1->value,519963165/*velocity*/,&t$h2d_col_Point,r2);
	return r1;
}

void hxlr_rider_ContactPoint_deserialize(hxlr__rider__ContactPoint r0,vvirtual* r1) {
	h2d__col__Point r2;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[0] ? (*(h2d__col__Point*)(hl_vfields(r1)[0])) : (h2d__col__Point)hl_dyn_getp(r1->value,-352673756/*position*/,&t$h2d_col_Point);
	r0->pos = r2;
	r2 = hl_vfields(r1)[1] ? (*(h2d__col__Point*)(hl_vfields(r1)[1])) : (h2d__col__Point)hl_dyn_getp(r1->value,519963165/*velocity*/,&t$h2d_col_Point);
	r0->vel = r2;
	return;
}

