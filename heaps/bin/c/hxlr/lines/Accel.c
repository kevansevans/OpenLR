// Generated by HLC 4.1.5 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <hxlr/lines/Accel.h>
void hxlr_lines_LineBase_calculateConstants(hxlr__lines__LineBase);
#include <hxlr/rider/ContactPoint.h>
void hxlr_lines_LineBase_new(hxlr__lines__LineBase,h2d__col__Point,h2d__col__Point,bool,vdynamic*);

void hxlr_lines_Accel_calculateConstants(hxlr__lines__Accel r0) {
	bool r5;
	double r2, r3;
	int r4;
	hxlr_lines_LineBase_calculateConstants(((hxlr__lines__LineBase)r0));
	r2 = r0->ny;
	r3 = r0->accConst;
	r2 = r2 * r3;
	r5 = r0->shifted;
	if( !r5 ) goto label$e5c4dd6_1_8;
	r4 = 1;
	goto label$e5c4dd6_1_9;
	label$e5c4dd6_1_8:
	r4 = -1;
	label$e5c4dd6_1_9:
	r3 = (double)r4;
	r2 = r2 * r3;
	r0->accx = r2;
	r2 = r0->nx;
	r3 = r0->accConst;
	r2 = r2 * r3;
	r5 = r0->shifted;
	if( !r5 ) goto label$e5c4dd6_1_19;
	r4 = -1;
	goto label$e5c4dd6_1_20;
	label$e5c4dd6_1_19:
	r4 = 1;
	label$e5c4dd6_1_20:
	r3 = (double)r4;
	r2 = r2 * r3;
	r0->accy = r2;
	return;
}

void hxlr_lines_Accel_collide(hxlr__lines__Accel r0,hxlr__rider__ContactPoint r1) {
	h2d__col__Point r3, r12;
	double r2, r4, r6, r7, r8, r9, r10, r13;
	int r11;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->x;
	r3 = r0->start;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->x;
	r2 = r2 - r4;
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->y;
	r3 = r0->start;
	if( r3 == NULL ) hl_null_access();
	r6 = r3->y;
	r4 = r4 - r6;
	r6 = r0->nx;
	r6 = r6 * r2;
	r7 = r0->ny;
	r7 = r7 * r4;
	r6 = r6 + r7;
	r8 = r0->dx;
	r7 = r2 * r8;
	r9 = r0->dy;
	r8 = r4 * r9;
	r7 = r7 + r8;
	r8 = r0->invSqrDistance;
	r7 = r7 * r8;
	r3 = r1->dir;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->x;
	r9 = r0->nx;
	r8 = r8 * r9;
	r3 = r1->dir;
	if( r3 == NULL ) hl_null_access();
	r9 = r3->y;
	r10 = r0->ny;
	r9 = r9 * r10;
	r8 = r8 + r9;
	r9 = 0.;
	if( !(r9 < r8) ) goto label$e5c4dd6_2_113;
	r9 = 0.;
	if( !(r9 < r6) ) goto label$e5c4dd6_2_113;
	r11 = r0->zone;
	r9 = (double)r11;
	if( !(r6 < r9) ) goto label$e5c4dd6_2_113;
	r9 = r0->limStart;
	if( !(r7 >= r9) ) goto label$e5c4dd6_2_113;
	r9 = r0->limEnd;
	if( !(r9 >= r7) ) goto label$e5c4dd6_2_113;
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->x;
	r10 = r0->nx;
	r9 = r6 * r10;
	r8 = r8 - r9;
	r3->x = r8;
	r3 = r1->pos;
	if( r3 == NULL ) hl_null_access();
	r8 = r3->y;
	r10 = r0->ny;
	r9 = r6 * r10;
	r8 = r8 - r9;
	r3->y = r8;
	r3 = r1->vel;
	if( r3 == NULL ) hl_null_access();
	r12 = r1->vel;
	if( r12 == NULL ) hl_null_access();
	r8 = r12->x;
	r9 = r0->ny;
	r10 = r1->friction;
	r9 = r9 * r10;
	r9 = r9 * r6;
	r12 = r1->vel;
	if( r12 == NULL ) hl_null_access();
	r10 = r12->x;
	r12 = r1->pos;
	if( r12 == NULL ) hl_null_access();
	r13 = r12->x;
	if( !(r10 < r13) ) goto label$e5c4dd6_2_81;
	r11 = 1;
	goto label$e5c4dd6_2_82;
	label$e5c4dd6_2_81:
	r11 = -1;
	label$e5c4dd6_2_82:
	r10 = (double)r11;
	r9 = r9 * r10;
	r8 = r8 + r9;
	r9 = r0->accx;
	r8 = r8 + r9;
	r3->x = r8;
	r3 = r1->vel;
	if( r3 == NULL ) hl_null_access();
	r12 = r1->vel;
	if( r12 == NULL ) hl_null_access();
	r8 = r12->y;
	r9 = r0->nx;
	r10 = r1->friction;
	r9 = r9 * r10;
	r9 = r9 * r6;
	r12 = r1->vel;
	if( r12 == NULL ) hl_null_access();
	r10 = r12->y;
	r12 = r1->pos;
	if( r12 == NULL ) hl_null_access();
	r13 = r12->y;
	if( !(r10 < r13) ) goto label$e5c4dd6_2_106;
	r11 = -1;
	goto label$e5c4dd6_2_107;
	label$e5c4dd6_2_106:
	r11 = 1;
	label$e5c4dd6_2_107:
	r10 = (double)r11;
	r9 = r9 * r10;
	r8 = r8 - r9;
	r9 = r0->accy;
	r8 = r8 + r9;
	r3->y = r8;
	label$e5c4dd6_2_113:
	return;
}

void hxlr_lines_Accel_new(hxlr__lines__Accel r0,h2d__col__Point r1,h2d__col__Point r2,bool r3) {
	double r4;
	vdynamic *r6;
	int r7;
	r4 = 0.10000000000000001;
	r0->accConst = r4;
	r6 = NULL;
	hxlr_lines_LineBase_new(((hxlr__lines__LineBase)r0),r1,r2,r3,r6);
	r7 = 1;
	r0->type = r7;
	return;
}

